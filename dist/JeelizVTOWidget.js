 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

"use strict";var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(ra,va){return Object.prototype.hasOwnProperty.call(ra,va)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(ra,va,Ga){if(ra==Array.prototype||ra==Object.prototype)return ra;ra[va]=Ga.value;return ra};
$jscomp.getGlobal=function(ra){ra=["object"==typeof globalThis&&globalThis,ra,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var va=0;va<ra.length;++va){var Ga=ra[va];if(Ga&&Ga.Math==Math)return Ga}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(ra,va){var Ga=$jscomp.propertyToPolyfillSymbol[va];if(null==Ga)return ra[va];Ga=ra[Ga];return void 0!==Ga?Ga:ra[va]};$jscomp.polyfill=function(ra,va,Ga,Sa){va&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(ra,va,Ga,Sa):$jscomp.polyfillUnisolated(ra,va,Ga,Sa))};
$jscomp.polyfillUnisolated=function(ra,va,Ga,Sa){Ga=$jscomp.global;ra=ra.split(".");for(Sa=0;Sa<ra.length-1;Sa++){var za=ra[Sa];if(!(za in Ga))return;Ga=Ga[za]}ra=ra[ra.length-1];Sa=Ga[ra];va=va(Sa);va!=Sa&&null!=va&&$jscomp.defineProperty(Ga,ra,{configurable:!0,writable:!0,value:va})};
$jscomp.polyfillIsolated=function(ra,va,Ga,Sa){var za=ra.split(".");ra=1===za.length;Sa=za[0];Sa=!ra&&Sa in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Cb=0;Cb<za.length-1;Cb++){var pa=za[Cb];if(!(pa in Sa))return;Sa=Sa[pa]}za=za[za.length-1];Ga=$jscomp.IS_SYMBOL_NATIVE&&"es6"===Ga?Sa[za]:null;va=va(Ga);null!=va&&(ra?$jscomp.defineProperty($jscomp.polyfills,za,{configurable:!0,writable:!0,value:va}):va!==Ga&&($jscomp.propertyToPolyfillSymbol[za]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(za):
$jscomp.POLYFILL_PREFIX+za,za=$jscomp.propertyToPolyfillSymbol[za],$jscomp.defineProperty(Sa,za,{configurable:!0,writable:!0,value:va})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(ra,va){for(var Ga=1;Ga<arguments.length;Ga++){var Sa=arguments[Ga];if(Sa)for(var za in Sa)$jscomp.owns(Sa,za)&&(ra[za]=Sa[za])}return ra};$jscomp.polyfill("Object.assign",function(ra){return ra||$jscomp.assign},"es6","es3");
$jscomp.arrayIteratorImpl=function(ra){var va=0;return function(){return va<ra.length?{done:!1,value:ra[va++]}:{done:!0}}};$jscomp.arrayIterator=function(ra){return{next:$jscomp.arrayIteratorImpl(ra)}};$jscomp.makeIterator=function(ra){var va="undefined"!=typeof Symbol&&Symbol.iterator&&ra[Symbol.iterator];return va?va.call(ra):$jscomp.arrayIterator(ra)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(ra){function va(){this.batch_=null}function Ga(pa){return pa instanceof za?pa:new za(function(Ha,Pa){Ha(pa)})}if(ra&&!$jscomp.FORCE_POLYFILL_PROMISE)return ra;va.prototype.asyncExecute=function(pa){if(null==this.batch_){this.batch_=[];var Ha=this;this.asyncExecuteFunction(function(){Ha.executeBatch_()})}this.batch_.push(pa)};var Sa=$jscomp.global.setTimeout;va.prototype.asyncExecuteFunction=function(pa){Sa(pa,0)};va.prototype.executeBatch_=function(){for(;this.batch_&&
this.batch_.length;){var pa=this.batch_;this.batch_=[];for(var Ha=0;Ha<pa.length;++Ha){var Pa=pa[Ha];pa[Ha]=null;try{Pa()}catch(db){this.asyncThrow_(db)}}}this.batch_=null};va.prototype.asyncThrow_=function(pa){this.asyncExecuteFunction(function(){throw pa;})};var za=function(pa){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var Ha=this.createResolveAndReject_();try{pa(Ha.resolve,Ha.reject)}catch(Pa){Ha.reject(Pa)}};za.prototype.createResolveAndReject_=function(){function pa(db){return function(mb){Pa||
(Pa=!0,db.call(Ha,mb))}}var Ha=this,Pa=!1;return{resolve:pa(this.resolveTo_),reject:pa(this.reject_)}};za.prototype.resolveTo_=function(pa){if(pa===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(pa instanceof za)this.settleSameAsPromise_(pa);else{a:switch(typeof pa){case "object":var Ha=null!=pa;break a;case "function":Ha=!0;break a;default:Ha=!1}Ha?this.resolveToNonPromiseObj_(pa):this.fulfill_(pa)}};za.prototype.resolveToNonPromiseObj_=function(pa){var Ha=void 0;
try{Ha=pa.then}catch(Pa){this.reject_(Pa);return}"function"==typeof Ha?this.settleSameAsThenable_(Ha,pa):this.fulfill_(pa)};za.prototype.reject_=function(pa){this.settle_(2,pa)};za.prototype.fulfill_=function(pa){this.settle_(1,pa)};za.prototype.settle_=function(pa,Ha){if(0!=this.state_)throw Error("Cannot settle("+pa+", "+Ha+"): Promise already settled in state"+this.state_);this.state_=pa;this.result_=Ha;this.executeOnSettledCallbacks_()};za.prototype.executeOnSettledCallbacks_=function(){if(null!=
this.onSettledCallbacks_){for(var pa=0;pa<this.onSettledCallbacks_.length;++pa)Cb.asyncExecute(this.onSettledCallbacks_[pa]);this.onSettledCallbacks_=null}};var Cb=new va;za.prototype.settleSameAsPromise_=function(pa){var Ha=this.createResolveAndReject_();pa.callWhenSettled_(Ha.resolve,Ha.reject)};za.prototype.settleSameAsThenable_=function(pa,Ha){var Pa=this.createResolveAndReject_();try{pa.call(Ha,Pa.resolve,Pa.reject)}catch(db){Pa.reject(db)}};za.prototype.then=function(pa,Ha){function Pa(tb,Db){return"function"==
typeof tb?function(Nb){try{db(tb(Nb))}catch(Tb){mb(Tb)}}:Db}var db,mb,Ub=new za(function(tb,Db){db=tb;mb=Db});this.callWhenSettled_(Pa(pa,db),Pa(Ha,mb));return Ub};za.prototype.catch=function(pa){return this.then(void 0,pa)};za.prototype.callWhenSettled_=function(pa,Ha){function Pa(){switch(db.state_){case 1:pa(db.result_);break;case 2:Ha(db.result_);break;default:throw Error("Unexpected state: "+db.state_);}}var db=this;null==this.onSettledCallbacks_?Cb.asyncExecute(Pa):this.onSettledCallbacks_.push(Pa)};
za.resolve=Ga;za.reject=function(pa){return new za(function(Ha,Pa){Pa(pa)})};za.race=function(pa){return new za(function(Ha,Pa){for(var db=$jscomp.makeIterator(pa),mb=db.next();!mb.done;mb=db.next())Ga(mb.value).callWhenSettled_(Ha,Pa)})};za.all=function(pa){var Ha=$jscomp.makeIterator(pa),Pa=Ha.next();return Pa.done?Ga([]):new za(function(db,mb){function Ub(Nb){return function(Tb){tb[Nb]=Tb;Db--;0==Db&&db(tb)}}var tb=[],Db=0;do tb.push(void 0),Db++,Ga(Pa.value).callWhenSettled_(Ub(tb.length-1),mb),
Pa=Ha.next();while(!Pa.done)})};return za},"es6","es3");$jscomp.polyfill("Math.log2",function(ra){return ra?ra:function(va){return Math.log(va)/Math.LN2}},"es6","es3");$jscomp.polyfill("Promise.prototype.finally",function(ra){return ra?ra:function(va){return this.then(function(Ga){return Promise.resolve(va()).then(function(){return Ga})},function(Ga){return Promise.resolve(va()).then(function(){throw Ga;})})}},"es9","es3");
$jscomp.polyfill("Math.sign",function(ra){return ra?ra:function(va){va=Number(va);return 0===va||isNaN(va)?va:0<va?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function ra(){Qa.mode=nb.realtime;Qa.isRT=!0;ya.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(ya.adjust){ya.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");ya.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");ya.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");ya.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var U=ya.adjust;U&&U.addEventListener("click",Ub,!1);(U=ya.adjustExit)&&
U.addEventListener("click",tb,!1);[ya.adjust,ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Ga)}Vb.enabled&&Ta.do_instantDetection(Vb.interval,Vb.callback);bc&&(bc(!0),bc=null)}function va(){var U=document.createElement("style");U.setAttribute("type","text/css");U.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var sa=document.getElementsByTagName("head");1<=sa.length?sa[0].appendChild(U):document.body.appendChild(U)}function Ga(U){U&&
(U.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(U).display&&U.classList.add("_jeelizVTOForceShow"))}function Sa(U){U&&(U.classList.add("_jeelizVTOForceHide"),U.classList.remove("_jeelizVTOForceShow"))}function za(U,sa){if(U)for(var Ma in sa)U.style[Ma]=sa[Ma]}function Cb(U){if(!U)return{width:0,height:0};U=U.getBoundingClientRect();return{width:U.width,height:U.height}}function pa(U){return new Promise(function(sa,Ma){var Ka=new XMLHttpRequest;Ka.open("GET",U,!0);Ka.onreadystatechange=
function(){if(4===Ka.readyState)if(200===Ka.status||0===Ka.status)try{var Za=JSON.parse(Ka.responseText);sa(Za)}catch(cb){Ma("INVALID JSON")}else Ma("HTTP ERROR "+Ka.status)};Ka.send()})}function Ha(U,sa){return new Promise(function(Ma,Ka){pa(U).then(function(Za){Ta.set_modelStandalone(Za,Nb.bind(null,sa,Ma),sa)}).catch(Ka)})}function Pa(){db("INVALID_SKU")}function db(U){xc.error?xc.error(U):console.log("ERROR:",U)}function mb(){var U=Cb(ya.container),sa=Math.abs(hb.displayHeight-U.height);if(1>=
Math.abs(hb.displayWidth-U.width)&&1>=sa)console.log("INFO in JeelizVTOWidget.resize: resolution difference too small abord resize");else if(hb.displayWidth=U.width,hb.displayHeight=U.height,console.log("INFO in JeelizVTOWidget.resize: width = "+hb.displayWidth.toString()+" height = "+hb.displayHeight.toString()+" oFactor = "+(1).toString()),hb.cvWidth=Math.round(1*hb.displayWidth),hb.cvHeight=Math.round(1*hb.displayHeight),za(ya.cv,{width:hb.displayWidth.toString()+"px",height:hb.displayHeight.toString()+
"px"}),ya.cv.width=hb.cvWidth,ya.cv.height=hb.cvHeight,Ta)if(Qa.mode===nb.notLoaded)Ta.set_size(hb.cvWidth,hb.cvHeight,!1);else Ta.onLoad(function(){Ta.resize(hb.cvWidth,hb.cvHeight,!1)})}function Ub(){[ya.adjust,ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Sa);Qa.mode=nb.adjust;[ya.adjustNotice,ya.adjustExit].forEach(Ga);ya.cv.style.cursor="move";Ta.switch_modeInteractor("movePinch");lc("ADJUST_START")}function tb(){[ya.adjustNotice,ya.adjustExit].forEach(Sa);[ya.adjust,ya.changeModelContainer,
ya.buttonResizeCanvas].forEach(Ga);ya.cv.style.cursor="auto";Qa.mode=Qa.realtime;Ta.switch_modeInteractor("idle");lc("ADJUST_END")}function Db(){if(!ya.trackIframe){var U=mc.appstaticURL+"jeewidget/";ya.trackIframe=document.createElement("iframe");ya.trackIframe.width="10";ya.trackIframe.height="10";ya.trackIframe.src=U+"trackIframe.html";za(ya.trackIframe,{position:"absolute",zIndex:-1,bottom:"0px",right:"0px"});ya.container.appendChild(ya.trackIframe)}}function Nb(U,sa){Qa.mode=nb.realtime;sa&&
sa();xb.toggle_loading(!1);if(ya.trackIframe){sa=location.href.split("?").shift().split("://").pop();sa=sa.split("/").shift();sa=sa.split("www.").pop();try{ya.trackIframe.contentWindow.postMessage({action:"COUNTTRYONSESSION",domain:sa,sku:U},"*")}catch(Ma){}}}function Tb(U,sa,Ma,Ka){var Za=sa.mod+".json";sa.isStandalone?Ha(yc+"models3DStandalone/"+Za,U).then(Ma):Ta.load_model(Za,sa.mats,Nb.bind(null,U,Ma),U,Ka)}function lc(U){(U=Ic[U])&&U()}var Ta=function(){function U(a,b){return a[0]*(1-b)+a[1]*
b}function sa(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function Ma(a,b){sa(a+"",function(d){b(JSON.parse(d))})}function Ka(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=Ka(a[d],b);return a}function Za(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function cb(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";
case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}function Eb(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}function La(a,b,d){var e=1,k=0;for(d=b+d-1;d>=b;--d)k+=e*Eb(a,d),e*=2;return k}function ib(a){a=
a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var b=a.length,d=new Uint8Array(b),e=0;e<b;++e)d[e]=a.charCodeAt(e);return d}function qb(a){return"string"===typeof a?JSON.parse(a):a}function Kb(a){return"undefined"===typeof qb(a).nb?Ob(a):yb(a)}function yb(a){var b=qb(a);a=b.nb;if(0===a)return new Uint8Array(b.nb);var d=b.n;b=ib(b);for(var e=new Uint32Array(d),k=0;k<d;++k)e[k]=La(b,k*a,a);return e}function Ob(a){var b=qb(a);a=b.ne;var d=b.nf,e=b.n;b=ib(b);
for(var k=new Float32Array(e),n=new Float32Array(d),x=a+d+1,m=0;m<e;++m){var q=x*m,t=0===Eb(b,q)?1:-1,z=La(b,q+1,a);q=q+1+a;for(var G=n.length,y=0,H=q;H<q+G;++H)n[y]=Eb(b,H),++y;for(G=q=0;G<d;++G)q+=n[G]*Math.pow(2,-G-1);k[m]=0===q&&0===z?0:t*(1+q)*Math.pow(2,1+z-Math.pow(2,a-1))}return k}function cc(a){var b=null,d=null,e=null,k=0,n=this,x=null,m={Lc:[],Yd:"none",cg:!1,Xd:null,grid:null,Ec:[1,1]};this.m=function(){this.Mk(x.Lc);e.mo({Yd:x.Yd,cg:x.cg,Xd:x.Xd})};this.Ql=function(q){return b[q]};this.te=
function(q){["s31","s33","s26"].forEach(function(t){Y.j(t,[{type:"2f",name:"u20",value:q}])});b&&b.forEach(function(t){t.te(q)})};this.Mk=function(q){var t=null;k=q.length;var z=null!==x.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),G=z?x.grid:[1,1];z&&this.te(G);b=q.map(function(y,H){y=Object.assign({},y,{index:H,parent:n,ce:t,ym:H===k-1,Sb:z,Aa:G,Ec:1===H?x.Ec:[1,1]});return t=0===H?$c.instance(y):ad.instance(y)});d=b[0];e=b[k-1];b.forEach(function(y,H){0!==H&&y.ln()})};this.wa=function(q){q.h(0);
var t=q;b.forEach(function(z){t=z.wa(t,!1)});return t};this.Th=function(){return d.Pl()};this.Dc=function(){return e.Tl()};this.Ph=function(){return e.Ph()};this.v=function(){b&&(b.forEach(function(q){q.v()}),e=d=b=null,k=0)};"undefined"!==typeof a&&(x=Object.assign({},m,a),this.m())}function Fb(a,b){a[b]=!0;a.setAttribute(b,"true")}function Wb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function nc(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&
a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function dc(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function ec(a){if(!a)return a;var b=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};b={};"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&
(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&oc(b,a.deviceId);return b}function oc(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)}function fc(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a}function gc(a){function b(y){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(H,v){return Math.abs(H-y)-Math.abs(v-y)})}function d(y){var H=ec(a);
y=y(H);k.push(y);e(y)}function e(y){if(y.video&&y.video.facingMode&&y.video.facingMode.exact){var H=y.video.facingMode.exact;y=ec(y);delete y.video.facingMode.exact;y.video.facingMode.ideal=H;k.push(y)}}var k=[];if(!a||!a.video)return k;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var n=b(a.video.width.ideal).slice(0,3),x=b(a.video.height.ideal).slice(0,3),m={},q=0;for(m.ob=void 0;q<n.length;m={ob:m.ob},++q){m.ob=n[q];var t={},z=0;for(t.mb=void 0;z<x.length;t=
{mb:t.mb},++z)if(t.mb=x[z],m.ob!==a.video.width.ideal||t.mb!==a.video.height.ideal){var G=Math.max(m.ob,t.mb)/Math.min(m.ob,t.mb);G<4/3-.1||G>16/9+.1||d(function(y,H){return function(v){v.video.width.ideal=y.ob;v.video.height.ideal=H.mb;return v}}(m,t))}}}d(function(y){return fc(y)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(y){delete y.video.width.ideal;delete y.video.height.ideal;return y}),d(function(y){delete y.video.width;delete y.video.height;return y}));
a.video.facingMode&&(d(function(y){delete y.video.facingMode;return y}),a.video.width&&a.video.height&&d(function(y){fc(y);delete y.video.facingMode;return y}));k.push({audio:a.audio,video:!0});return k}function pc(a){try{var b=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(e){b=window.innerHeight>window.innerWidth}if(b&&a&&a.video){b=a.video.width;var d=a.video.height;b&&d&&b.ideal&&d.ideal&&b.ideal>d.ideal&&(a.video.height=b,a.video.width=d)}}function Pb(a){a.volume=0;Fb(a,"muted");
if(dc()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;Fb(a,"muted")},5)}}function bd(a){var b=Ba.element,d=Ba.qh;return null===b?Promise.resolve():new Promise(function(e,k){if(b.srcObject&&b.srcObject.getVideoTracks){var n=b.srcObject.getVideoTracks();1!==n.length?k("INVALID_TRACKNUMBER"):(n=
n[0],a?Jc(b,e,k,d):(n.stop(),e()))}else k("BAD_IMPLEMENTATION")})}function Kc(a,b,d,e){function k(x){n||(n=!0,d(x))}var n=!1;navigator.mediaDevices.getUserMedia(e).then(function(x){function m(){setTimeout(function(){if(a.currentTime){var t=a.videoHeight;if(0===a.videoWidth||0===t)k("VIDEO_NULLSIZE");else{var z={Uk:null,Bg:null,Tm:null};try{var G=x.getVideoTracks()[0];G&&(z.Tm=G,z.Uk=G.getCapabilities(),z.Bg=G.getSettings())}catch(y){}dc()||Wb()?a.parentNode&&null!==a.parentNode?(n||b(a,x,z),setTimeout(function(){a.play()},
100)):(document.body.appendChild(a),Pb(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";Pb(a);setTimeout(function(){a.play();n||b(a,x,z)},100)},80)):n||b(a,x,z)}}else k("VIDEO_NOTSTARTED")},700)}function q(){a.removeEventListener("loadeddata",q,!1);var t=a.play();Pb(a);"undefined"===typeof t?m():t.then(function(){m()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=x:
(a.src=window.URL.createObjectURL(x),a.videoStream=x);Pb(a);a.addEventListener("loadeddata",q,!1)}).catch(function(x){k(x)})}function Jc(a,b,d,e){if(a)if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){if(e&&e.video&&Wb()){var k=nc();0!==k[0]&&(12>k[0]||12===k[0]&&2>k[1])&&pc(e)}Fb(a,"autoplay");Fb(a,"playsinline");e&&e.audio?a.volume=0:Fb(a,"muted");Kc(a,b,function(){function n(m){if(0===m.length)d("INVALID_FALLBACKCONSTRAINTS");else{var q=m.shift();Kc(a,b,function(){n(m)},q)}}var x=
gc(e);n(x)},e)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}function cd(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function dd(){function a(K){K=K?qc.hf:1;R.width=K*I.width;
R.height=K*I.height;return R}function b(K){var S=K.length-1,ha=K[S];if("data:"===ha.substring(0,5))return ha;for(ha="";0<=S;--S){var oa=K[S],Da="http"===oa.substring(0,4).toLowerCase();ha=oa+ha;if(Da)break}return ha}function d(K,S,ha){return new Promise(function(oa){wa.zj(S);Aa.$();Na.isEnabled=!0;Ca.isEnabled=!1;Na.Oa||(Na.Oa=hc.instance({}));K.Uh()&&(Na.Oa.nj(K.Uh()),wa.pa(Na.Oa));K.set();Ca.isEnabled=!1;z();var Da=jb.Rh(ha);setTimeout(function(){Na.isEnabled=!1;wa.zj(!1);oa(Da)},1)})}function e(K,
S){ja.Wc=.5;return new Promise(function(ha){Ca.ac=K;Ca.isEnabled=!0;Ca.B=function(){var oa=Lc.instance(S());Ca.B=null;ha(oa)}})}function k(K,S){return new Promise(function(ha,oa){Ma(S+K,function(Da){Da.error?oa("SKU_NOT_FOUND"):ha({Um:Da.intrinsic.mod+".json",Sm:Da.intrinsic.mats})})})}function n(K,S){var ha=b([I.ca,I.ua,I.Ud+"/"]);S=S.map(function(oa){return ha+oa});V.model={url:b([I.ca,I.ua,I.Vd+"/"+K]),Oc:S,Jb:!1,Ib:!1};return new Promise(function(oa){Oa.zi(V.model,function(){T.isBusy=!1;oa()})})}
function x(K,S){if(!S)return K;K=K.slice(0);var ha=gb.Ul().map(function(pb){return pb.toLowerCase()}),oa;for(oa in S){var Da=ha.indexOf(oa.toLowerCase());-1!==Da&&(K[Da]=S[oa])}return K}function m(K,S){return new Promise(function(ha,oa){T.set_model(K,function(){T.set_materials(S,function(){T.isBusy=!1;ha()})},function(){T.isBusy=!1;oa("CANNOT_LOAD_MODEL")})})}function q(){T.load_model=function(K,S,ha,oa,Da,pb){if(T.isBusy)return!1;T.isBusy=!0;S=x(S,Da);(V.model?m(K,S):n(K,S)).then(ha).catch(pb);return!0};
T.set_offset=function(K){O=K;Oa.ue()};T.set_scale=function(K){E=K;Oa.ve()};T.set_rx=function(K){X=K;Oa.Nj()};T.switch_shadow=wa.Gg;T.switch_bgBlur=wa.Fg;T.set_zoom=wa.tg;T.is_viewer3D=function(){return ka===fa.Ha};T.switch_viewer3D=function(K,S){if(ka===fa.lc||ka===fa.mc||ka===fa.W&&!K||ka===fa.Ha&&K||Ca.isEnabled)return!1;if(ka===fa.ta)return lb!==fa.Ha||K?lb===fa.W&&K?(lb=fa.Ha,wa.pa(ja.Eb),wa.cb(1),S&&S(),!0):!1:(lb=fa.W,wa.pa(ja.Ga),wa.cb(0),S&&S(),!0);var ha=0,oa=-1,Da=0;ka===fa.W?(ka=fa.lc,
oa=I.Uo):ka===fa.Ha&&(ka=fa.mc,oa=I.Xo);var pb=zc.pf();Ra=setInterval(function(){var kb=zc.pf();ha+=(kb-pb)/oa;1<=ha&&(ha=1,ka===fa.lc?(ka=fa.Ha,wa.pa(ja.Eb)):(ka=fa.W,wa.pa(ja.Ga)),S&&S(),clearInterval(Ra),Ra=null);var Lb=ka===fa.mc||ka===fa.W?1-I.So(ha):I.Ro(ha);wa.cb(Lb);ka!==fa.mc&&ka!==fa.lc||0!==Da++%2||(wa.pa(ja.Xf),ja.Xf.fo(Lb));pb=kb},.016);return!0};T.capture_image=function(K,S,ha,oa){Ca.ac=K;Ca.isEnabled=!0;"undefined"===typeof isAllocate&&(ha=!1);(oa="undefined"===typeof oa?!1:oa)&&wa.me(!1);
f();Ca.B=function(){wa.Wi(0);c.flush();var Da=jb.Rh(ha);S(Da);oa&&wa.me(!0)}};T.capture_detection=function(K,S){var ha=null===la.Fb?la.kb:la.Zc;e(K,function(){return{od:ma.oc.clone(),Yf:gb.Xh(),Uf:gb.Vh(),background:ha.clone(),Oa:ua.Ia.Yh().clone(),Tf:Xa}}).then(S)};T.process_image=function(K){function S(){return new Promise(function(ub,ob){Ca.Qg=kb.updateLightInterval;e(kb.nSteps,ha).then(function(fb){Ca.Qg=3;fb?1>=fb.Wl().data[0]?(fb.H(),ob("FACE_NOT_FOUND")):d(fb,kb.isMask,!0).then(function(ed){wa.pa(ja.Ga);
fb.H();ub(ed)}):ob("CRITICAL")});z()})}function ha(){return{od:ma.oc.clone(),Yf:!1,Uf:!1,background:I.pq?!1:la.kb.clone(!0),Oa:ua.Ia.Yh().clone()}}function oa(){return new Promise(function(ub,ob){k(kb.modelSKU,kb.glassesDBURL).then(function(fb){T.load_model(fb.Um,fb.Sm,function(){ub()},kb.modelSKU,null,function(){ob("CANNOT_LOAD_MODEL")})}).catch(function(fb){ob(fb)})})}function Da(){if(kb.image){var ub=kb.image;pb(ub);return Promise.resolve(ub)}return new Promise(function(ob){var fb=new Image;fb.onload=
function(){pb(fb);ob()};fb.src=kb.imageBase64})}function pb(ub){var ob=ub.width,fb=ub.height;if(ob!==I.width||fb!==I.height)Ba.Md&&(Ba.element.width=ob,Ba.element.height=fb),L(ob,fb,kb.overSamplingFactor);Ba.Eh.drawImage(ub,0,0);f()}var kb=Object.assign({imageBase64:null,image:null,FOVHztDeg:0,nSteps:50,updateLightInterval:3,overSamplingFactor:2,modelSKU:"undef",glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",isMask:!0},K);if(I.Jc)throw Error("This feature cannot be called");var Lb=$a.FOVforced;
kb.FOVHztDeg&&($a.FOVforced=kb.FOVHztDeg);wa.pa(ja.Ga);return new Promise(function(ub,ob){return oa().then(Da).then(function(){S().then(function(fb){$a.FOVforced=Lb;ub(fb)}).catch(ob)}).catch(ob).catch(ob)})};T.process_offlineRendering=function(K,S,ha,oa,Da){Oa.Gn();oa&&(T.Zj.drawImage(jb.ub(),0,0),jb.ub().parentNode.insertBefore(T.Gb,jb.ub()),T.Gb.setAttribute("class","jeefitMask"));T.set_model(S,function(){T.set_materials(ha,function(){setTimeout(function(){d(K,oa).then(Da);Oa.Dn(oa?function(){jb.ub().parentNode.removeChild(T.Gb)}:
!1)},1)})})};T.serialize_detection=function(K){return K.bc()};T.unserialize_detection=function(K,S,ha){return Lc.Yc(K,S,ha)};T.do_instantDetection=function(K,S){Mc.m(ma.oc);Mc.start(K,S)};T.relieve_DOM=function(K,S){if(Q.Vb)return!1;y(S||160);Ia=!1;da&&clearTimeout(da);da=setTimeout(function(){y(I.ya);da=!1;v()},K);return!0};T.switch_slow=function(K,S){if(Q.Vb)return!1;"undefined"===typeof S&&(S=I.gk);da&&(y(I.ya),v(),clearTimeout(da),da=!1);K?Ia=!1:v();y(K?S:I.ya);return!0};T.switch_deepSleep=function(K){if(ab===
K)return!1;ab=!1;T.switch_sleep(K);ab=K;return!0};T.switch_sleep=function(K,S){function ha(){T.isBusy=!1;K?(lb=ka,ka=fa.ta):(ka=lb,z())}if(Q.Vb||ab||T.isBusy)return S?Promise.reject():null;if(K&&ka===fa.ta||!K&&ka!==fa.ta)return S?Promise.resolve(!1):!1;Ra&&(clearInterval(Ra),Ra=null);ka===fa.mc?(ka=fa.W,wa.pa(ja.Ga),wa.cb(0)):ka===fa.lc&&(ka=fa.Ha,wa.pa(ja.Eb),wa.cb(1));zb.stop();var oa=null;T.isBusy=!0;S?oa=bd(!K).then(ha):ha();return S?oa:!0};T.set_modelStandalone=function(K,S){wa.oe(!1);Ac.instance({url:K.model,
Oc:K.materials,Jb:!1,Ib:!1,B:function(ha){Mb=[0,0,0];ca=1;ta=F=C=0;Ya=I.Mc;T.ready&&Oa.we();S&&S();G(ha);Oa.Dg();wa.oe(!0)}})};T.start_rendering=Oa.Dg;T.update_material=function(K,S){gb&&gb.Go(K,S)};T.set_model=function(K,S,ha){gb&&(K=b([I.ca,I.ua,I.Vd+"/",K]),gb.replace(K,function(){S&&S(gb.Yk())},ha))};T.set_tweaker=function(K,S){function ha(oa){T.eh(oa);S&&S()}"string"===typeof K?sa(I.ca+I.ua+I.yo+"/"+K,ha):ha(K)};T.eh=function(K){K&&(K.preOffset&&(Mb=K.preOffset),K.preScale&&(ca=K.preScale),K.rx&&
(C=K.rx),K.beginBendZ&&(F=K.beginBendZ),K.bendStrength&&(ta=K.bendStrength),K.maskBranchStartEnd&&(Ya=K.maskBranchStartEnd),T.ready&&Oa.we())};T.set_materials=function(K,S){if(gb){var ha=b([I.ca,I.ua,I.Ud+"/"]);K=K.map(function(oa){var Da=oa;"string"===typeof oa&&(Da=ha+oa,Da=Da.replace(/([^:])\/\//,"$1/"));return Da});gb.ug(K,S)}}}function t(){ea.Tg(qc.Al);Oa.Xc();I.Zb&&(Aa.reset(),ua.Ia.ih(Ba.ha),ua.Ia.hh());T.ready=!0;T.dd.forEach(function(K){K()});T.dd.splice(0)}function z(){Gb.reset();zb.stop();
Aa.$();H(0)}function G(K){gb&&(wa.xn(gb),gb.remove());wa.bk(K);gb=K}function y(K){N=K;zb.update({ya:N})}function H(K){na=-1;Ca.isEnabled?na=Ca.ac:Na.isEnabled?na=Na.ac:Ia?(f(),na=ka===fa.W?Gb.V():1):(na=I.ad[0],f());Aa.$();if(!Na.isEnabled)for(var S=0;S<na;++S)Y.set("s63"),la.Ef.M(),la.kb.h(0),ma.Pc.h(1),W.l(!1,!1),w.wa(la.Ef),Ca.isEnabled&&0===(S+1)%Ca.Qg&&h();Ca.isEnabled?(Ca.B&&Ca.B(),Ca.isEnabled=!1,c.flush(),ka!==fa.ta&&zb.og(H)):(wa.animate(K),la.kg&&xa-ja.wi>ja.Cj&&I.Zb&&ka===fa.W&&(Aa.$(),
h(),Aa.ba()),Na.isEnabled||(Ia&&(Gb.Gj(),S=Gb.Qh(1),Z=U(I.ek,S),I.Zb&&ka===fa.W&&(ja.Cj=U(I.yi,S),ja.Wc=U(I.Lm,S),ja.Wc=Math.min(ja.Wc,.5))),xa=K,ka!==fa.ta&&zb.og(H)))}function v(){xa=zc.pf();Ia=!0}function f(){var K=15;if(!Ba.Md){var S=Ba.element.currentTime;K=S-rc;0>K&&(rc=S);if(1E3*K<I.Mo)return}Ba.ha.refresh();rc+=K;Ba.vd=K;Ea=!0;Aa.$();Y.set("s0");ma.lg.M();ma.Pc.Jk(0);W.l(!0,!0);Y.set("s61");la.kb.M();Ba.ha.h(0);W.l(!1,!1);null!==la.Fb&&(Y.set("s62"),la.Zc.o(),la.kb.h(0),la.Fb.h(1),W.l(!1,
!1))}function g(){la.Rj=ba.instance({isPot:!0,isLinear:!0,isFloat:!1,url:I.ca+I.ua+I.No});var K={isPot:!1,isLinear:!0,isFloat:!1,width:R.width,height:R.height};la.kb=ba.instance(K);la.Zc=ba.instance(K);Q.Dj.push(la.kb,la.Zc);la.Ef=ba.instance({isPot:!0,isFloat:!1,width:w.Th()});I.Rd&&(rb=ba.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(I.Sf||-1!==I.Rf.indexOf("//")?"":I.ca+I.ua)+I.Rf}))}function A(){function K(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0,0,0,0,
0,0,0,0,0])}}var S={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};ma.Pc=Nc.instance(K());ma.lg=ba.instance(K());ma.oc=ba.instance(K());ma.$d=Nc.instance(K());ma.bf=ba.instance(S);S={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0])};ma.Ug=ba.instance(S);ma.ye=ba.instance(S);ja.ae=ba.instance({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function J(K){la.kg=K;if(Ea){Ea=!1;Y.set("s69");ma.Ug.M();ma.ye.h(2);
var S=U(I.Lk,Gb.Qh(.5));Y.G("u67",S);ma.lg.h(1);Y.G("u68",1E3*Ba.vd);W.l(!1,!1);Y.set("s70");ma.ye.o();ma.Ug.h(0);W.l(!1,!1)}K.h(0);ma.Pc.jj(1);c.viewport(0,0,1,1);Y.set("s64");Y.zg("u47",Oc.get(0));W.l(!1,!1);Y.set("s65");c.viewport(1,0,2,1);W.l(!1,!1);ma.bf.M();Y.set("s66");Y.N("u58",I.Je[0]*Z,I.Je[1]);ma.Pc.h(0);ma.$d.h(1);W.l(!1,!1);Y.set("s67");ma.$d.jj(1);ma.bf.h(0);ma.ye.h(2);ma.Pc.h(3);W.l(!1,!1);Y.set("s68");ma.$d.h(0);ma.oc.o();W.l(!1,!1)}function h(){ja.wi=xa;ja.ae.M();Y.set(aa.li?"s72":
"s71");la.kg.h(0);W.l(!1,!1);ua.Ia.Qj(Ba.ha,ja.ae,ja.Wc)}function p(){return new Promise(function(K){var S=I.ca,ha=I.$c.split("://").shift();if("http"===ha||"https"===ha)S="";S+=I.$c;"json"!==S.split(".").pop()&&(S+=I.neuralNetworkPath);sa(S,function(oa){oa=JSON.parse(oa);if(oa.exportData){var Da=oa.exportData;aa.ab=aa.ab||Da.rotationEulerAnglesFactors;aa.Ac=aa.Ac||Da.deformScaleXFactor;aa.ra=aa.ra||Da.translationScalingFactors;aa.Dh=Da.dyOffset||0;aa.Bh=Da.dsOffset||0;aa.li=Da.isLThetaSplitCosSin||
!1}w=new cc({Lc:oa.layers,Yd:"gpuRawAvg",Xd:J});K()})})}function l(K){a(K);K=I.width;var S=I.height;M.rb[0]=1;M.rb[1]=K/S;Oc.m({Zd:I.scanOverlapFactors,Gi:I.scanNScaleLevels,Z:K,Af:S,bj:I.scanScale0Factor,ra:aa.ra,pg:!0});sc=K>S?[K/S,1]:[1,S/K];Q.Ma=!0}function B(){Y.j("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:M.rb},{type:"1f",name:"u43",value:aa.Ac},{type:"1f",name:"u45",value:aa.Dh},{type:"1f",name:"u44",value:aa.Bh}]);Y.j("s64",[{type:"1i",
name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u51",value:I.wo},{type:"1f",name:"u52",value:I.el},{type:"3f",name:"u48",value:[aa.ra[0]*M.rb[0],aa.ra[1]*M.rb[1],aa.ra[2]]},{type:"3f",name:"u49",value:[I.nc[0][0],I.nc[1][0],I.nc[2][0]]},{type:"3f",name:"u50",value:[I.nc[0][1],I.nc[1][1],I.nc[2][1]]}]);Y.j("s65",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u55",value:I.on},{type:"3f",name:"u53",value:aa.ab},{type:"3f",name:"u54",value:I.Fj},{type:"1f",
name:"u56",value:I.Bl}]);Y.j("s66",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u57",value:1},{type:"2f",name:"u58",value:I.Je},{type:"1f",name:"u59",value:I.En},{type:"1f",name:"u60",value:I.nn}]);Y.j("s67",[{type:"1i",name:"u57",value:1},{type:"1i",name:"u61",value:0},{type:"1i",name:"u62",value:2},{type:"1i",name:"u63",value:3},{type:"2f",name:"u42",value:M.rb},{type:"1f",name:"u65",value:w.Th()},{type:"2f",name:"u64",value:I.An}]);Y.j("s68",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u66",
value:I.Hn}]);Y.j("s69",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1i",name:"u62",value:2},{type:"3f",name:"u53",value:aa.ab},{type:"3f",name:"u54",value:I.Fj}]);Y.j("s70",[{type:"1i",name:"u62",value:0},{type:"2f",name:"u70",value:I.xo},{type:"2f",name:"u71",value:I.Fn}]);Y.j("s71",[{type:"1i",name:"u46",value:0}]);Y.j("s72",[{type:"1i",name:"u46",value:0}]);Y.j("s62",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u72",value:1}])}function L(K,S,ha){var oa=0===ha,Da=a(oa);
I.width=K;I.height=S;l(oa);B();Q.Dj.forEach(function(pb){pb.resize(K,S)});ha=oa?1:ha;ea.resize(Da.width*ha,Da.height*ha);Oa.Xc();eb.Ag(Ba.element.videoWidth||Ba.element.width,Ba.element.videoHeight||Ba.element.height);eb.Hg();eb.Aj()}function P(){zb.stop();Q.hb&&(clearTimeout(Q.hb),Q.hb=null);if(!Q.Vb){var K=Q.width,S=Q.height;if(I.width===K&&I.height===S)z();else if(ka!==fa.W&&ka!==fa.Ha)Q.hb=setTimeout(P,I.$i);else{var ha="undefined"===typeof wb?!1:wb.get_mode(),oa=ka;ka=fa.ta;Q.Vb=!0;Ca.isEnabled=
!0;Ca.B=function(){Ca.isEnabled=!1;Q.Vb=!1;v();y(I.ya);da&&clearTimeout(da);da=!1;ka=oa};L(K,S,0);z();ka===fa.Ha&&(ka=fa.W,T.switch_viewer3D(!0,!1));ha&&wb.switch_mode(ha)}}}var C,F,M={rb:[-1,-1]},r=null,u=[.5,0,0,.5],R={width:-1,height:-1},Q={width:-1,height:-1,hb:null,Vb:!1,Ma:!1,Dj:[]},ia=[0,I.be[1],I.be[2]],aa={ab:[-I.ab[0],-I.ab[1],I.ab[2]],Ac:I.Ac,ra:I.ra,Dh:0,Bh:0,li:!1},N=I.ya,da=null,w=null;a(!0);var O=[0,0,0],E=1,X=0,la={kb:null,Zc:null,Ef:null,Rj:null,kg:null,Fb:null},ma={lg:null,oc:null,
$d:null,bf:null,Ug:null,ye:null},xa=0,Ea=!1,ja={Ga:null,Eb:null,Xf:null,wi:0,Cj:I.yi[1],Wc:.1,ae:null},qa=!1,Ia=!0,Z=1,na=-1,fa={ta:-1,W:0,Ha:1,lc:2,mc:3},ka=fa.W,Ra=null,lb=fa.W,ab=!1,Ca={isEnabled:!1,ac:1,Qg:3,B:null},Na={isEnabled:!1,Oa:null,ac:0},rb=null,sc=-1,Ab=!1,Hb=!1,Qb=!1,ic=[0,0,0],Rb=1,Xb,jc,Ua,Mb=[0,0,0],ca=1,ta=F=C=0,Ya=I.Mc,Ja=[0,0,0],Xa={scale:1,offsetX:0,offsetY:0},rc=0,Oa={m:function(){Y.tc([{id:"s61",name:"_",u:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u40*a0;}",
I:["a0"],P:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u40"],precision:"lowp"},{id:"s63",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u43,u44,u45;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5,.5);varying vec2 vv0;void main(){vec4 b=texture2D(u41,h);vec2 c=b.gb,a=b.a*u42;vec4 l=texture2D(u41,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u43),1.);a*=n,a*=1.+u44;vec2 o=a0*.5;float d=texture2D(u41,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5,-.5)*a*(g*vec2(0.,u45)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",
I:["a0"],P:[2],i:"u1 u41 u42 u43 u44 u45".split(" "),precision:"lowp"},{id:"s64",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46,u41;uniform vec3 u47,u48,u49,u50;uniform float u51,u52;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u46,vec2(.625,.625)),k=texture2D(u46,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u52;vec4 a=texture2D(u41,f);m?a.r=2.:a.r>u51?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u47);else{float n=dot(e,texture2D(u46,vec2(.875,.875))),o=dot(e,texture2D(u46,vec2(.125,.625))),p=dot(e,texture2D(u46,vec2(.375,.625))),b=texture2D(u41,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u41,g).a;vec3 s=mix(u49,u50,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u48*s*a.a;}gl_FragColor=a;}",
i:"u46 u41 u47 u51 u48 u52 u49 u50".split(" ")},{id:"s65",name:"_",g:"uniform sampler2D u46,u41;uniform vec3 u53,u54;uniform vec2 u55;uniform float u56;const vec4 v=vec4(1.,1.,1.,1.),f=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u41,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u46,vec2(.125,.125)),e),a=smoothstep(u55.x,u55.y,m);vec4 n=texture2D(u41,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u46,vec2(.125,.875))),q=dot(e,texture2D(u46,vec2(.375,.875))),r=dot(e,texture2D(u46,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u54+s*u53;float c=texture2D(u41,i).r,d=b.z*u56;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u46 u41 u55 u53 u54 u56".split(" ")},{id:"s66",name:"_",g:"uniform sampler2D u41,u57;uniform vec2 u58;uniform float u59,u60;const vec4 f=vec4(1.,1.,1.,1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 c=texture2D(u41,vv0),d=texture2D(u57,vv0),o=texture2D(u41,g),j=texture2D(u57,g);float k=pow(j.a,u60),l=mix(u58.x,u58.y,1.-k),a=step(.34,vv0.x)*step(vv0.x,.66);vec4 m=mix(h,i,a),b=max(l*f,m);b*=mix(f,u59*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),a);vec4 n=c-d;gl_FragColor=n*b;}",
i:["u41","u57","u58","u59","u60"],precision:"highp"},{id:"s67",name:"_",g:"uniform sampler2D u57,u61,u62,u63;uniform vec2 u42,u64;uniform float u65;const vec4 u=vec4(1.,1.,1.,1.);const vec2 g=vec2(.25,.5),h=vec2(.75,.5),f=vec2(.16,.5),i=vec2(.5,.5);varying vec2 vv0;void main(){float j=step(.33,vv0.x)*step(vv0.x,.66),v=step(.66,vv0.x);vec4 k=texture2D(u63,i);float a=k.a;a*=texture2D(u62,g).a,a*=texture2D(u62,h).a;vec4 l=texture2D(u57,vv0),m=texture2D(u61,vv0),b=l+m;b.a=mix(b.a,a,j);vec4 c=texture2D(u57,f),n=texture2D(u63,f);vec2 o=c.gb,p=n.gb;float q=c.a;vec2 d=u65*abs(o-p)/(u42*q);float r=max(d.x,d.y),s=smoothstep(u64.x,u64.y,r);vec4 t=texture2D(u63,vv0);gl_FragColor=mix(b,t,s);}",
i:"u57 u61 u62 u63 u42 u65 u64".split(" "),precision:"highp"},{id:"s68",name:"_",g:"uniform sampler2D u41;uniform float u66;const vec4 g=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u41,vv0);float b=step(vv0.x,.33),c=texture2D(u41,f).g;a.a+=b*a.a*u66*abs(sin(c)),gl_FragColor=a;}",i:["u41","u66"],precision:"highp"},{id:"s69",name:"_",g:"uniform sampler2D u41,u62,u46;uniform vec3 u53,u54;uniform float u67,u68;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(1.,1.,1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u41,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u62,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u46,k)),o=dot(e,texture2D(u46,l)),p=dot(e,texture2D(u46,m));vec3 q=mix(i,u53,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u54+b-r,a)/u68;vec4 s=mix(vec4(b,0.),j,vec4(u67*g,0.));gl_FragColor=s;}",
i:"u41 u62 u46 u67 u68 u53 u54".split(" "),precision:"highp"},{id:"s70",name:"_",g:"uniform sampler2D u62;uniform vec2 u70,u71;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u70.x,u71.x,a),d=mix(u70.y,u71.y,a);vec3 b=texture2D(u62,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u62","u70","u71"],precision:"highp"},{id:"s71",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415;void main(){float a=dot(texture2D(u46,vec2(.375,.375)),e),b=dot(texture2D(u46,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u46,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u46,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",
i:["u46"]},{id:"s72",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u46,vec2(.875,.375)),e),c=dot(texture2D(u46,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u46,vec2(.625,.375)),e),a=dot(texture2D(u46,vec2(.125,.375)),e),h=dot(texture2D(u46,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}",i:["u46"]},{id:"s62",name:"_",
g:"uniform sampler2D u1,u72;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u72);}",
i:["u1","u72"]}]);A();zb.m({ki:!1,ya:N});Gb.m({$f:0,n:I.ad[1]-I.ad[0]+1,xi:I.ad[0]});T.set_videoRotation=function(K){$a.rotate=K;T.ready&&(eb.Ag(Ba.element.videoWidth,Ba.element.videoHeight),eb.Hg())};T.set_viewRotation=function(){};T.set_LUT=function(K){return new Promise(function(S){K?ba.instance({url:K,isFloat:!1,isFlipY:!1,B:function(ha){la.Fb=ha;Oa.Xc();S()}}):(la.Fb=null,Oa.Xc(),S())})};T.resize=function(K,S,ha){T.ready&&(Q.hb&&(clearTimeout(Q.hb),Q.hb=null),zb.stop(),ha=ha?qc.hf:1,Q.width=
K*ha,Q.height=S*ha,Q.hb=setTimeout(P,I.$i))};return p()},to:function(){g();l(!0);B();Oa.Aj();q();T.cd.forEach(function(K){K()});T.cd.splice(0);V.model&&!T.isBusy?Oa.zi(V.model):I.Jc||t();return Promise.resolve()},Vl:function(){return R},v:function(){zb.v();return new Promise(function(K){T.switch_sleep(!0,!0).finally(function(){w&&w.v();ea.v();jb.v();c&&(c=null);w=null;I.Sf=!1;gb=null;Ia=!0;Z=1;na=-1;ka=fa.W;Ra=null;lb=fa.W;Object.assign(Ba,Pc);Object.assign(I,Qc);K()}).catch(function(S){throw Error(S);
})})},Xc:function(){wa.hj(ma.oc,null===la.Fb?la.kb:la.Zc,ja.ae,la.Rj)},Sl:function(){return Xa},pj:function(K){Xa=K},ue:function(){Ja[0]=O[0]-Xa.offsetX;Ja[1]=O[1]+Xa.offsetY;Ja[2]=O[2];wa.Nn(ia,Mb,Ja)},ve:function(){wa.On(E*I.jn,ca,Xa.scale)},Nj:function(){wa.Pn(X+C)},Do:function(){wa.Ln(I.hd+F,I.Lb+ta)},Fo:function(){wa.Mn(Ya)},we:function(){Oa.ue();Oa.ve();Oa.Nj();Oa.Do();Oa.Fo()},Gn:function(){zb.stop();Ra&&(clearInterval(Ra),Ra=null);Na.isEnabled=!0;Na.ac=0;Ab=wa.Rl();Hb=gb.Xh();Qb=gb.Vh();Rb=
ca;ic=Mb;Xb=Ya;jc=F;Ua=ta;Ca.isEnabled=!1;wa.me(!1)},Dn:function(K){function S(){2===++ha&&(Na.isEnabled=!1,ca=Rb,Mb=ic,Ya=Xb,F=jc,ta=Ua,Oa.we(),wa.pa(Ab),z(),K&&K())}var ha=0;ka===fa.lc?ka=fa.Ha:ka===fa.mc&&(ka=fa.W);wa.cb(ka===fa.W?0:1);gb.replace(Hb,S);gb.ug(Qb,S);Oa.Xc();wa.me(!0)},Aj:function(){var K=Math.tan(Ba.Pb/2);wa.gj({kf:I.kf/K,In:K,mn:Ba.Ri,Ea:I.Ea,Zf:I.Zf,Uj:M.rb,Yj:I.Qo,Fc:I.Fc,zf:I.zf,xf:I.xf,yf:I.yf,Mc:Ya,Ke:I.Ke,Xe:I.Xe,ng:I.ng,ic:I.ic,no:I.uj,oo:I.vj,le:I.le,jc:I.jc,pd:I.pd,$e:I.$e,
Ze:I.Ze,Ye:I.Ye,Ne:I.Ne,Me:I.ca+I.ua+I.Me,hd:I.hd+F,Lb:I.Lb+ta,vf:I.vf,Zg:I.Zg,Yg:I.Yg,Be:I.Be,Wo:I.Vo,Ae:Ba.Ae,Rd:I.Rd,Nm:rb,Qd:I.Qd,Sd:I.Sd,Qf:I.Qf,Mm:sc,Ig:I.Ig})},Vk:function(){var K=$a.Ee,S=$a.De,ha=1/Math.tan(Ba.Pb/2),oa=jb.Y()/jb.O();Ba.Ri=[ha,0,0,0,0,ha/oa,0,0,0,0,-(S+K)/(S-K),-1,0,0,-2*K*S/(S-K),0];Ba.Ae=1/Math.tan(I.To*Math.PI/360)/ha},Ag:function(K,S){r=[.5,.5];K=S/K;S=jb.Y()/jb.O();90===Math.abs($a.rotate)&&(K=1/K);K>S?r[1]*=S/K:r[0]*=K/S;u[0]=0;u[1]=0;u[2]=0;u[3]=0;switch($a.rotate){case 0:u[0]=
r[0];u[3]=r[1];break;case 180:u[0]=-r[0];u[3]=-r[1];break;case 90:u[1]=r[0];u[2]=-r[1];break;case -90:u[1]=-r[0],u[2]=r[1]}I.mi||(u[0]*=-1,u[1]*=-1);S=$a.FOVforced;Ba.Pb=2*Math.atan(2*r[0]*Math.tan((S?S:1<K?$a.FOVmobile:$a.FOVdesktop)*Math.PI/180/2));Oa.Vk()},Hg:function(){Y.j("s61",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u40",value:u}])},Df:function(K,S){return new Promise(function(ha,oa){Oa.lm(K,S);Promise.all([Oa.m(),Oa.mm()]).then(function(){Oa.ei();ha()}).catch(function(Da){T.qb&&T.qb("GL_INCOMPATIBLE",
"Cannot init JEELIZVTO");oa(Da)})})},lm:function(K,S){T.Hb=document.createElement("canvas");T.Gb=document.createElement("canvas");T.Gb.width=I.width;T.Gb.height=I.height;T.Zj=T.Gb.getContext("2d");T.replace_video=function(ha){Ba.element=ha;Ba.Og.ka=Ba.element;return!0};T.sc=T.Hb.getContext("2d");T.capture_background=function(ha,oa){ha="undefined"===typeof ha?K:ha;oa="undefined"===typeof oa?S:oa;T.Hb.width=ha;T.Hb.height=oa;var Da=ha/oa,pb=0,kb=0;if(K/S>Da){var Lb=S*Da;Da=S;pb=Math.round((K-Lb)/2)}else Lb=
K,Da=K/Da,kb=Math.round((S-Da)/2);T.sc.save();T.sc.translate(ha,0);T.sc.scale(-1,1);T.sc.drawImage(Ba.element,pb,kb,Lb,Da,0,0,ha,oa);T.sc.restore();ha=document.createElement("canvas");ha.width=T.Hb.width;ha.height=T.Hb.height;ha.getContext("2d").drawImage(T.Hb,0,0);return ha}},ei:function(){window.CanvasListeners&&(wb.init({qa:jb.ub()}),T.init_listeners=Oa.ei,T.add_listener=wb.add_listener,T.remove_listener=wb.remove_listener,T.animate_swipe=wb.animate_swipe,T.switch_modeInteractor=wb.switch_mode,
T.get_modeInteractor=wb.get_mode,wb.add_listener("move",function(K,S){ka===fa.W&&(I.Om&&(Xa.offsetX-=S[0]*I.Bi,Xa.offsetX=Math.min(Math.max(Xa.offsetX,-I.Td),I.Td)),Xa.offsetY-=S[1]*I.Bi,Xa.offsetY=Math.min(Math.max(Xa.offsetY,-I.Td),I.Td),Oa.ue())},!0).add_listener("pinch",function(K,S){ka===fa.W&&(Xa.scale+=S*I.Pm,Xa.scale=Math.min(Math.max(Xa.scale,I.Ci[0]),I.Ci[1]),Oa.ve())},!0))},mm:function(){return new Promise(function(K,S){ea.m({Kd:!1,Tk:!1,expand:!1,qa:jb.ub(),Qb:jb,onload:function(){ja.Eb=
hc.instance({Kb:I.ca+I.ua+bb.Oo,vc:I.ca+I.ua+bb.Po,uc:bb.Sj,wc:bb.Tj});I.Zb?(ja.Ga=hc.instance({}),ua.Ia.pa(ja.Ga)):ja.Ga=ja.Eb;wa.pa(ja.Ga);ja.Xf=I.Zb?fd.instance({Km:ja.Ga,Im:ja.Eb}):ja.Eb;K()}})||S("CANNOT_INIT_JE3D")})},Dg:function(){qa||(qa=!0,Oa.we(),t(),xa=0,I.Jc&&z())},zi:function(K,S){K=Ac.instance({Oe:function(){Oa.Dg();S&&S()},url:K.url,Oc:K.Oc,Jb:K.Jb,Ib:K.Ib});G(K)},Bj:function(){if(I.Zb){var K=Object.assign({},bb,{Ab:b([I.ca,I.ua,bb.Ab])});ua.Ia.ib(K)}}};return Oa}function gd(){return new Promise(function(a,
b){T.Ge&&T.Ge();Ba.Md=!1;var d={width:{min:$a.minWidth,max:$a.maxWidth,ideal:$a.idealWidth},height:{min:$a.minHeight,max:$a.maxHeight,ideal:$a.idealHeight},facingMode:{ideal:"user"}},e={video:d,audio:!1};Ba.qh=e;d&&-1!==Ba.deviceId&&oc(e,Ba.deviceId);Jc(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):!1,function(k){T.He&&T.He(k);Rc(k).then(a).catch(b)},function(k){T.qb&&T.qb("WEBCAM_UNAVAILABLE",k);b(k)},e)})}function Rc(a){Ba.element=a;a=Ba.element.videoWidth||
Ba.element.width;var b=Ba.element.videoHeight||Ba.element.height;Ba.Og={ka:Ba.element,isPot:!1,isFloat:!1,isFlipY:!0};Ba.ha=ba.instance(Ba.Og);eb.Ag(a,b);return eb.Df(a,b).then(function(){eb.Hg();return eb.to()}).catch(function(d){return Promise.reject(d)})}function hd(){var a=document.createElement("canvas");a.width=I.width;a.height=I.height;Ba.Eh=a.getContext("2d");Ba.Md=!0;return Rc(a)}function Yb(a){return 3===arguments.length?this.sb(arguments):this.set(a)}function Sc(a,b){b=Math.floor(b);a.r=
(b>>16&255)/255;a.X=(b>>8&255)/255;a.b=(b&255)/255}function id(a,b){function d(m){void 0!==m&&1>parseFloat(m)&&console.warn("JETHREE.Color: Alpha component of "+b+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var k=e[2];switch(e[1]){case "rgb":case "rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){a.r=Math.min(255,parseInt(e[1],10))/255;a.X=Math.min(255,parseInt(e[2],10))/255;a.b=Math.min(255,parseInt(e[3],10))/255;d(e[5]);return}if(e=
/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){a.r=Math.min(100,parseInt(e[1],10))/100;a.X=Math.min(100,parseInt(e[2],10))/100;a.b=Math.min(100,parseInt(e[3],10))/100;d(e[5]);return}break;case "hsl":case "hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){k=parseFloat(e[1])/360;var n=parseInt(e[2],10)/100,x=parseInt(e[3],10)/100;d(e[5]);a.Kn(k,n,x);return}}}else if(e=/^#([A-Fa-f0-9]+)$/.exec(b)){e=e[1];k=e.length;if(3===k){a.r=
parseInt(e.charAt(0)+e.charAt(0),16)/255;a.X=parseInt(e.charAt(1)+e.charAt(1),16)/255;a.b=parseInt(e.charAt(2)+e.charAt(2),16)/255;return}if(6===k){a.r=parseInt(e.charAt(0)+e.charAt(1),16)/255;a.X=parseInt(e.charAt(2)+e.charAt(3),16)/255;a.b=parseInt(e.charAt(4)+e.charAt(5),16)/255;return}}b&&0<b.length&&(e=jd[b],void 0!==e?Sc(a,e):console.warn("JETHREE.Color: Unknown color "+b))}function tc(a,b,d,e){this.C=a||0;this.D=b||0;this.F=d||0;this.R=void 0!==e?e:1}function Tc(a,b,d){var e=b.C,k=b.D,n=b.F;
b=b.R;var x=d.C,m=d.D,q=d.F;d=d.R;a.C=e*d+b*x+k*q-n*m;a.D=k*d+b*m+n*x-e*q;a.F=n*d+b*q+e*m-k*x;a.R=b*d-e*x-k*m-n*q;return a}function Zb(a,b){this.x=a||0;this.y=b||0}function Va(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0}function Uc(a,b){var d=a.x,e=a.y,k=a.z;a.x=e*b.z-k*b.y;a.y=k*b.x-d*b.z;a.z=d*b.y-e*b.x}function $b(a,b,d,e){this.C=a||0;this.D=b||0;this.F=d||0;this.Ra=e||$b.Vj}function Bc(a,b){this.min=void 0!==a?a:new Va(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new Va(-Infinity,-Infinity,
-Infinity)}function uc(a){return(new Va).ed(a.min,a.max).Ca(.5)}function kd(a,b){a.min.min(b);a.max.max(b)}function ac(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Vc(a,b,d){var e=b.elements,k=d.elements;d=a.elements;b=e[0];var n=e[4],x=e[8],m=e[12],q=e[1],t=e[5],z=e[9],G=e[13],y=e[2],H=e[6],v=e[10],f=e[14],g=e[3],A=e[7],J=e[11];e=e[15];var h=k[0],p=
k[4],l=k[8],B=k[12],L=k[1],P=k[5],C=k[9],F=k[13],M=k[2],r=k[6],u=k[10],R=k[14],Q=k[3],ia=k[7],aa=k[11];k=k[15];d[0]=b*h+n*L+x*M+m*Q;d[4]=b*p+n*P+x*r+m*ia;d[8]=b*l+n*C+x*u+m*aa;d[12]=b*B+n*F+x*R+m*k;d[1]=q*h+t*L+z*M+G*Q;d[5]=q*p+t*P+z*r+G*ia;d[9]=q*l+t*C+z*u+G*aa;d[13]=q*B+t*F+z*R+G*k;d[2]=y*h+H*L+v*M+f*Q;d[6]=y*p+H*P+v*r+f*ia;d[10]=y*l+H*C+v*u+f*aa;d[14]=y*B+H*F+v*R+f*k;d[3]=g*h+A*L+J*M+e*Q;d[7]=g*p+A*P+J*r+e*ia;d[11]=g*l+A*C+J*u+e*aa;d[15]=g*B+A*F+J*R+e*k;return a}function Cc(a,b,d,e,k,n){this.a=
a;this.b=b;this.c=d;this.Da=e instanceof Va?e:new Va;this.ze=Array.isArray(e)?e:[];this.color=k instanceof Yb?k:new Yb;this.Wg=Array.isArray(k)?k:[];this.$b=void 0!==n?n:0}function ld(a,b,d){var e=new XMLHttpRequest;e.open("GET",a,!0);var k=e.withCredentials=!1;e.onreadystatechange=function(){404!==e.status||k||(k=!0,d&&d(404));if(4===e.readyState&&200===e.status){var n=null;try{n=JSON.parse(e.responseText)}catch(x){d&&d(-1)}b&&n&&b(n)}};e.onerror=function(){d&&d(0)};e.send()}function Dc(a,b,d){"object"===
typeof a?b(a):ld(a,b,d)}function md(a){return new Promise(function(b,d){Dc(a,b,d)})}function nd(a,b){for(var d=new Va,e=new Va,k=0,n=b.length;k<n;k++){var x=b[k],m=a[x.a],q=a[x.b],t=a[x.c];m&&q&&t&&(d.gb(t,q),e.gb(m,q),Uc(d,e),0!==d.Lf()&&(d.normalize(),x.Da.L(d)))}}function od(a,b){for(var d=Array(a.length),e=0,k=a.length;e<k;++e)d[e]=new Va;e=new Va;k=new Va;for(var n=0,x=b.length;n<x;++n){var m=b[n],q=a[m.a],t=a[m.b],z=a[m.c];q&&t&&z&&(e.gb(z,t),k.gb(q,t),Uc(e,k),d[m.a].add(e),d[m.b].add(e),d[m.c].add(e))}e=
0;for(a=a.length;e<a;++e)d[e].normalize();a=0;for(e=b.length;a<e;++a)m=b[a],k=m.ze,n=d[m.a],x=d[m.b],m=d[m.c],n&&x&&m&&(3===k.length?(k[0].L(n),k[1].L(x),k[2].L(m)):(k[0]=n.clone(),k[1]=x.clone(),k[2]=m.clone()));return d}function pd(a,b,d,e){function k(B){p.L(b[B]);l.L(p);var L=m[B];J.L(L);J.sub(p.Ca(p.rd(L))).normalize();var P=l.x,C=l.y,F=l.z,M=L.x,r=L.y;L=L.z;h.x=C*L-F*r;h.y=F*M-P*L;h.z=P*r-C*M;P=0>h.rd(q[B])?-1:1;x[4*B]=J.x;x[4*B+1]=J.y;x[4*B+2]=J.z;x[4*B+3]=P}for(var n=a.length,x=new Float32Array(4*
n),m=Array(n),q=Array(n),t=0;t<n;t++)m[t]=new Va,q[t]=new Va;var z=new Va,G=new Va,y=new Va,H=new Zb,v=new Zb,f=new Zb,g=new Va,A=new Va;e.forEach(function(B){var L=B.a,P=B.b;B=B.c;z.L(a[L]);G.L(a[P]);y.L(a[B]);H.L(d[L]);v.L(d[P]);f.L(d[B]);var C=G.x-z.x,F=y.x-z.x,M=G.y-z.y,r=y.y-z.y,u=G.z-z.z,R=y.z-z.z,Q=v.x-H.x,ia=f.x-H.x,aa=v.y-H.y,N=f.y-H.y,da=1/(Q*N-ia*aa);g.set((N*C-aa*F)*da,(N*M-aa*r)*da,(N*u-aa*R)*da);A.set((Q*F-ia*C)*da,(Q*r-ia*M)*da,(Q*R-ia*u)*da);m[L].add(g);m[P].add(g);m[B].add(g);q[L].add(A);
q[P].add(A);q[B].add(A)});var J=new Va,h=new Va,p=new Va,l=new Va;e.forEach(function(B){k(B.a);k(B.b);k(B.c)});return x}function Wc(a,b,d,e){return Math.sqrt((a-d)*(a-d)+(b-e)*(b-e))}var V={th:!0,wp:!1,xp:!1,dl:!1,sh:!1,vp:!1,Pa:!1,Kd:!1,gq:!1,ca:"",Ei:"",Bk:700,Ak:200,uh:!1,Io:!1,Jo:!1,Ho:!1,hk:3,Nb:!1,fh:!0,Kb:"images/backgrounds/interior2.jpg",vc:"images/backgrounds/interior_light.jpg",Dk:[256,256,512,512],uc:2.1,wc:8,Ck:[64,128,256,256],sm:[60,96,160,250],rm:[8,12,18,40],Qc:2.2,hg:1,Pe:300,jh:500,
Qe:50,Nk:0,Ok:0,kp:45,mp:1,lp:1E3,kh:20,Yo:10,Zo:10,$o:5,hn:.1,Li:20,Oi:100,Pi:100,gn:-Math.PI/3,fn:Math.PI/3,Ni:0,Ej:0,vd:[40,32,16,16],fk:[0,.87,.92,.9],cn:2,Xm:100,ea:!1,ik:16,jk:.4,lk:[.72,.73,.72,.74],wk:1.2,tk:[.5,.5,.5,1],yk:140,xk:280,zk:1.2,mk:20,nk:40,vk:[6,9,9,12],sk:[.03,.02,.02,.018],rk:[.35,.35,.4,.5],pk:[.2,.2,.2,.2],kk:[.1,.15,.15,.15],uk:[200,200,150,120],qk:[1,2,3,5],po:1.1,Aq:[.25,.5,1,2],Bq:256,zq:256,yq:200,qo:[40,80,200,500],ro:[35,45,80,120],Zk:!0,$k:"CCW"},Xc={},Y=function(){function a(r,
u,R){u=r.createShader(u);r.shaderSource(u,R);r.compileShader(u);return r.getShaderParameter(u,r.COMPILE_STATUS)?u:null}function b(r,u,R){u=a(r,r.VERTEX_SHADER,u);R=a(r,r.FRAGMENT_SHADER,R);r===c&&m.push(u,R);var Q=r.createProgram();r.attachShader(Q,u);r.attachShader(Q,R);r.linkProgram(Q);return Q}function d(r){return["float","sampler2D","int"].map(function(u){return"precision "+r+" "+u+";\n"}).join("")}function e(r,u){u.T=u.T?!0:!1;if(!u.T){u.u=u.u||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
u.I=u.I||["a0"];u.P=u.P||[2];u.precision=u.precision||y;u.id=z++;void 0!==u.cj&&(u.cj.forEach(function(ia,aa){u.g=u.g.replace(ia,u.Fa[aa])}),u.cj.splice(0));u.Xg=0;u.P.forEach(function(ia){u.Xg+=4*ia});var R=d(u.precision);u.oa=b(r,R+u.u,R+u.g);u.A={};u.i.forEach(function(ia){u.A[ia]=r.getUniformLocation(u.oa,ia)});u.attributes={};u.va=[];u.I.forEach(function(ia){var aa=r.getAttribLocation(u.oa,ia);u.attributes[ia]=aa;u.va.push(aa)});if(u.s){r.useProgram(u.oa);t=u;q=u.id;for(var Q in u.s)r.uniform1i(u.A[Q],
u.s[Q])}u.Ma=!0}}function k(r){vb.sj(M);q!==r.id&&(M.K(),q=r.id,t=r,c.useProgram(r.oa),r.va.forEach(function(u){0!==u&&c.enableVertexAttribArray(u)}))}function n(r,u,R){e(r,u,R);r.useProgram(u.oa);r.enableVertexAttribArray(u.attributes.a0);q=-1;return t=u}function x(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],s:{u1:0}}}var m=[],q=-1,t=null,z=0,G=!1,y="highp",H=["u1"],v=["u0"],f={u1:0},g={u0:0},A={u1:0,u2:1},J={u1:0,u3:1},h=["u1","u3","u4"],
p={u5:0},l=["u6","u7","u8","u9"],B={u6:0,u7:1},L={s0:x(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:H,s:f,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],s:A},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],s:f,T:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:H,s:f},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],s:A},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:H,s:f},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:H,s:f},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],s:g},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],s:g},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:H,s:f},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],s:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],s:f},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:H,s:f,T:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:H,s:f,T:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],s:f},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:v,s:g,T:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:v,s:g},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:v,s:g},
s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:v,s:g},s20:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:v,s:g},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:v,s:g,T:!0},s22:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u16","u17"],s:{u0:0,u16:1},T:!0},s23:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u18"],s:f},s24:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],s:Object.assign({u19:2},
B),T:!0},s25:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:l,s:B},s26:{g:"uniform float u8,u9;uniform vec2 u20,u21;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=u20*u21,f=c+.5*(vec2(1.)-u21)/u20,g=f+fract(b*u8)/d,h=(vec2(.5)+floor(a*b))/a;vec4 i=texture2D(u7,h),j=texture2D(u6,g);gl_FragColor=i*j;}",
i:["u20","u21"].concat(l),s:B,T:!0},s27:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(l),s:Object.assign({u25:3,u22:4,u23:5,u24:6},B),T:!0},s28:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(l),s:Object.assign({u3:2},B)},s29:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],s:B,T:!0},s30:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:h,s:J},s31:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(h),s:J,T:!0},s32:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:h,s:J,T:!0},s33:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(h),s:J,T:!0},s34:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:h,s:J,T:!0},s35:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:H,s:f,precision:"lowp"},s36:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],s:f,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],s:f,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],s:A,T:!0},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],s:A,T:!0},s40:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],s:p},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
s:p,T:!0},s42:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],s:f,precision:"lowp",T:!0},s43:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
s:f,precision:"lowp",T:!0},s44:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],s:{u1:0,u16:1,u31:2},T:!0}},P={s45:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Fa:["1.1111","gl_FragColor\\*=2.2222;"]},s46:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Fa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},C=null,F=null,M={Yb:function(){return G},m:function(){if(!G){C=Ka(L,2);F=Ka(P,2);y="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var r in C)e(c,C[r],r);Y.set("s0");c.enableVertexAttribArray(0);G=!0}},tc:function(r){r.forEach(function(u){M.ma(u)})},ma:function(r){C[r.id]=r;e(c,r,r.id)},pm:function(r,u,
R){u||(u=r);C[u]=Object.create(F[r]);C[u].xm=!0;F[r].Fa&&F[r].Fa.forEach(function(Q,ia){C[u].g=C[u].g.replace(new RegExp(Q,"g"),R[ia])});e(c,C[u],u)},set:function(r){var u=C[r];u.T&&(u.T=!1,e(c,u,r));k(u)},Bb:function(r){return n(r,x(),"s47")},ge:function(r){return n(r,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:y},"s48")},zl:function(r){return"undefined"===typeof C[r]?!1:C[r].Ma},K:function(){-1!==q&&(q=-1,t.va.forEach(function(r){0!==r&&c.disableVertexAttribArray(r)}))},je:function(){var r=
0;t.va.forEach(function(u,R){R=t.P[R];c.vertexAttribPointer(u,R,c.FLOAT,!1,t.Xg,r);r+=4*R})},yl:function(){c.enableVertexAttribArray(0)},ec:function(){M.fc(c)},fc:function(r){r.vertexAttribPointer(t.va[0],2,r.FLOAT,!1,8,0)},he:function(r,u){c.uniform1i(t.A[r],u)},G:function(r,u){c.uniform1f(t.A[r],u)},N:function(r,u,R){c.uniform2f(t.A[r],u,R)},ie:function(r,u){c.uniform2fv(t.A[r],u)},zg:function(r,u){c.uniform3fv(t.A[r],u)},yg:function(r,u,R,Q){c.uniform3f(t.A[r],u,R,Q)},io:function(r,u,R,Q,ia){c.uniform4f(t.A[r],
u,R,Q,ia)},xa:function(r,u){c.uniform4fv(t.A[r],u)},jo:function(r,u){c.uniformMatrix2fv(t.A[r],!1,u)},ko:function(r,u){c.uniformMatrix3fv(t.A[r],!1,u)},Uc:function(r,u){c.uniformMatrix4fv(t.A[r],!1,u)},j:function(r,u){M.set(r);u.forEach(function(R){switch(R.type){case "4f":c.uniform4fv(t.A[R.name],R.value);break;case "3f":c.uniform3fv(t.A[R.name],R.value);break;case "2f":c.uniform2fv(t.A[R.name],R.value);break;case "1f":c.uniform1f(t.A[R.name],R.value);break;case "1i":c.uniform1i(t.A[R.name],R.value);
break;case "mat2":c.uniformMatrix2fv(t.A[R.name],!1,R.value);break;case "mat3":c.uniformMatrix3fv(t.A[R.name],!1,R.value);break;case "mat4":c.uniformMatrix4fv(t.A[R.name],!1,R.value)}})},Lp:function(){return"lowp"},v:function(){M.K();c.disableVertexAttribArray(0);for(var r in C){var u=C[r];u.Ma&&(u.Ma=!1,c.deleteProgram(u.oa));u.xm&&delete C[r]}m.forEach(function(R){c.deleteShader(R)});m.splice(0);z=0;G=!1;t=null;q=-1}};return M}(),c=null,jb=function(){function a(v){console.log("ERROR in ContextFF: ",
v);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(v,f,g){v.setAttribute("width",f);v.setAttribute("height",g)}function e(v){function f(){Ib.v();Fa.reset();A.getExtension("WEBGL_lose_context").loseContext()}if(b())return!1;var g=document.createElement("canvas");d(g,5,5);var A=null;try{A=g.getContext("webgl2",v)}catch(J){return!1}if(!A)return!1;k(A);Fa.Fh(A);v=Fa.af(A);if(!v.Wa&&!v.Ya)return f(),!1;v=Ib.lh(A,v);f();return v?!0:!1}function k(v){v.clearColor(0,
0,0,0);v.disable(v.DEPTH_TEST);v.disable(v.BLEND);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.disable(v.CULL_FACE);v.GENERATE_MIPMAP_HINT&&v.FASTEST&&v.hint(v.GENERATE_MIPMAP_HINT,v.FASTEST);v.disable(v.SAMPLE_ALPHA_TO_COVERAGE);v.disable(v.SAMPLE_COVERAGE);v.depthFunc(v.LEQUAL);v.clearDepth(1)}var n=null,x=null,m=null,q=null,t=!0,z=null,G=null,y=[],H={O:function(){return n.width},Y:function(){return n.height},ub:function(){return n},Dl:function(){return c},la:function(){return t},flush:function(){c.flush()},
Tp:function(){Aa.$();H.Bn()},Bn:function(){ba.reset();W.reset();Y.K();Y.yl();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);W.ld();Y.ec()},Il:function(){z||(z=new Uint8Array(n.width*n.height*4));c.readPixels(0,0,n.width,n.height,c.RGBA,c.UNSIGNED_BYTE,z);return z},Gp:function(){return n.toDataURL("image/jpeg")},Hp:function(){Aa.ba();x||(x=document.createElement("canvas"),m=x.getContext("2d"));d(x,n.width,n.height);for(var v=H.Il(),f=m.createImageData(x.width,x.height),g=x.width,A=x.height,J=f.data,h=
0;h<A;++h)for(var p=A-h-1,l=0;l<g;++l){var B=4*(h*g+l),L=4*(p*g+l);J[B]=v[L];J[B+1]=v[L+1];J[B+2]=v[L+2];J[B+3]=v[L+3]}m.putImageData(f,0,0);return x.toDataURL("image/png")},Rh:function(v){!x&&v&&(x=document.createElement("canvas"),m=x.getContext("2d"));var f=v?x:document.createElement("canvas");d(f,n.width,n.height);(v?m:f.getContext("2d")).drawImage(n,0,0);return f},m:function(v){v=Object.assign({Xa:null,bg:null,qa:null,We:null,width:512,height:512,premultipliedAlpha:!1,vm:!0,antialias:!1,debug:!1,
up:!1},v);v.Xa?(c=v.Xa,n=v.Xa.canvas):v.We&&!v.qa?n=document.getElementById(v.We):v.qa&&(n=v.qa);n||(n=document.createElement("canvas"));n.width=v.width;n.height=v.height;if(c)t=c instanceof WebGL2RenderingContext;else{t=!0;var f={antialias:v.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:v.premultipliedAlpha,stencil:!1,depth:v.vm,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(f.antialias=!1);var g=e(f);g||!f.antialias||b()||(f.antialias=!1,g=e(f));g&&(c=n.getContext("webgl2",f));c?t=!0:((c=n.getContext("webgl",f))||(c=n.getContext("experimental-webgl",f)),t=!1)}if(!c)return a("WebGL1 and 2 are not enabled");v.bg&&n.addEventListener&&(q=c.getExtension("WEBGL_lose_context"))&&(G=v.bg,n.addEventListener("webglcontextlost",G,!1));if(!Fa.m())return a("Not enough GL capabilities");k(c);Y.m();W.m();Ib.lh(c,Fa.Fl());y.forEach(function(A){A(c)});y.splice(0);return!0},jp:function(){return new Promise(function(v){c?
v(c):y.push(v)})},v:function(){c&&(Fa.v(),Y.v(),Ib.v());q&&G&&(n.removeEventListener("webglcontextlost",G,!1),q=G=null);c=z=m=x=n=null;y.splice(0)}};return H}(),vb=function(){function a(){null===b&&("undefined"!==typeof Y?b=Y:"undefined"!==typeof D&&(b=D))}var b=null;return{reset:function(){b=null},sj:function(d){b!==d&&(b&&b.K(),b=d)},Yb:function(){return b.Yb()},ec:function(){return b.ec()},fc:function(d){return b.fc(d)},je:function(){return b.je()},K:function(){return b.K()},set:function(d){a();
return b.set(d)},Bb:function(d){a();return b.Bb(d)},ge:function(d){a();return b.ge(d)}}}(),ba=function(){function a(F){c.bindTexture(c.TEXTURE_2D,F)}function b(F){var M=new Uint16Array(F.length);F.forEach(function(r,u){B[0]=r;var R=L[0];var Q=R>>16&32768;r=R>>12&2047;var ia=R>>23&255;R=103>ia?Q:142<ia?Q|31744|((255==ia?0:1)&&R&8388607):113>ia?(r|=2048,Q|(r>>114-ia)+(r>>113-ia&1)):(Q|ia-112<<10|r>>1)+(r&1);M[u]=R});return M}function d(){if(null!==P.Bf)return P.Bf;var F=e(b([.5,.5,.5,.5]),!0);return null===
F?!0:P.Bf=F}function e(F,M){if(!vb.Yb()||!H)return null;var r=null,u=Math.sqrt(F.length/4);try{var R=c.getError();if("FUCKING_BIG_ERROR"===R)return!1;r=C.instance({isFloat:!1,S:M,array:F,width:u});R=c.getError();if(R!==c.NO_ERROR)return!1}catch(Q){return!1}Aa.ba();c.viewport(0,0,u,u);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);vb.set("s0");r.Ka(0);W.l(!0,!0);F=4*u*u;M=new Uint8Array(F);c.readPixels(0,0,u,u,c.RGBA,c.UNSIGNED_BYTE,M);u=!0;for(R=0;R<F;++R)u=u&&3>Math.abs(M[R]-127);r.remove();Aa.$();
return u}var k=0,n=null,x=0,m=null,q=null,t=null,z=null,G=null,y=null,H=!1,v=[],f={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,ka:null,$h:null,wm:!1,S:!1,B:null,J:4,Vf:0},g=!1,A=null,J=null,h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=!1,l=!1,B=new Float32Array(1),L=new Int32Array(B.buffer),P={Bf:null,Cf:null},C={m:function(){H||(G=[c.RGBA,null,c.RGBA,c.RGBA],y=
[c.RGBA,null,c.RGBA,c.RGBA],n=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],p="undefined"!==typeof ea,l="undefined"!==typeof Fa,m=[-1,-1,-1,-1,-1,-1,-1,-1],z=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],H=!0)},nm:function(){if(!q){for(var F=new Float32Array(16384),M=0;16384>M;++M)F[M]=2*Math.random()-1;q={random:C.instance({isFloat:!0,isPot:!0,array:F,width:64}),Ij:C.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}C.Eo()},oj:function(F){c.framebufferTexture2D(Aa.rf(),
c.COLOR_ATTACHMENT0,c.TEXTURE_2D,F,0)},Zh:function(){return q.Ij},Eo:function(){z[1]=Fa.qf(c)},bo:function(){y=G=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},Xi:function(F){Y.set("s1");Aa.ba();var M=F.O(),r=F.Y();c.viewport(0,0,M,r);F.h(0);W.l(!1,!1)},iq:function(F,M){C.Xi(F);c.readPixels(0,0,F.O(),F.Y(),c.RGBA,c.UNSIGNED_BYTE,M)},jq:function(F,M){C.Xi(F);return Fa.mg(0,0,F.O(),F.Y(),M)},Mh:function(F,M,r,u,R,Q,ia){F.activeTexture(F.TEXTURE0);var aa=F.createTexture();F.bindTexture(F.TEXTURE_2D,aa);R=R instanceof
Float32Array?R:new Float32Array(R);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST);F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,Q);F.texImage2D(F.TEXTURE_2D,0,F.RGBA,r,u,0,F.RGBA,F.FLOAT,R);F.bindTexture(F.TEXTURE_2D,null);F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1);ia&&(Aa.$(),Y.Bb(F));F.viewport(0,0,r,u);F.framebufferTexture2D(F.FRAMEBUFFER,
F.COLOR_ATTACHMENT0,F.TEXTURE_2D,M,0);F.bindTexture(F.TEXTURE_2D,aa);ia?W.l(!0,!0):W.Ob(F);F.deleteTexture(aa);H&&(m[0]=-1,t=null,k=0)},Ie:function(F){F!==k&&(c.activeTexture(n[F]),k=F)},instance:function(F){function M(){ja=void 0!==N.ka.videoWidth?N.ka.videoWidth:N.ka.width;qa=void 0!==N.ka.videoHeight?N.ka.videoHeight:N.ka.height}function r(ca){var ta=c.getError();if("FUCKING_BIG_ERROR"===ta)return!1;c.texImage2D(c.TEXTURE_2D,0,ab,Ca,Na,ca);ta=c.getError();ta!==c.NO_ERROR&&Ca!==c.RGBA&&(Ca=c.RGBA,
c.texImage2D(c.TEXTURE_2D,0,ab,Ca,Na,ca));return!0}function u(){if(!Z){a(ma);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,rb);N.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,N.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,N.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));N.isAnisotropicFiltering&&"undefined"!==typeof V&&c.texParameterf(c.TEXTURE_2D,
ea.Jl().TEXTURE_MAX_ANISOTROPY_EXT,V.hk);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,N.isLinear?c.LINEAR:c.NEAREST);N.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,N.isMipmap&&!Ab?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,N.isMipmap&&!Ab?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);Ca=G[N.J-1];ab=y[N.J-1];Na=z[w];if(Fa.la()){var ca=Fa.Ll();Ca===c.RGBA&&Na===c.FLOAT?N.isMipmap||N.isLinear?ab=Ib.Nl(c):Fa.fa()?ca&&(ab=ca):ab=c.RGBA16F||c.RGBA:Ca===
c.RGB&&Na===c.FLOAT&&ca&&(ab=ca,Ca=c.RGBA)}if(N.S&&!N.isFloat||N.isFloat&&N.isMipmap&&Ib.Em())ab=Fa.Ml(),Na=Fa.qf(c);N.Vf&&(Qb=N.Vf);N.isSrgb&&4===N.J&&(Ca=ea.fm());if(N.ka)r(N.ka);else if(N.url)r(xa);else if(Ea){ca=Ea;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,ab,ja,qa,0,Ca,Na,ca),c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,ab,ja,qa,0,Ca,Na,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,ja,qa,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(rc){c.texImage2D(c.TEXTURE_2D,
0,ab,ja,qa,0,Ca,Na,null)}N.isKeepArray||(Ea=null)}else ca=c.getError(),"FUCKING_BIG_ERROR"!==ca&&(c.texImage2D(c.TEXTURE_2D,0,ab,ja,qa,0,Ca,Na,null),ca=c.getError(),ca!==c.NO_ERROR&&(Ca=c.RGBA,N.S&&Na!==c.FLOAT&&(Na=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,ab,ja,qa,0,Ca,Na,null))));if(N.isMipmap)if(!Ab&&Ua)Ua.Ad(),Rb=!0;else if(Ab){ca=Math.log2(Math.min(ja,qa));Hb=Array(1+ca);Hb[0]=ma;for(var ta=1;ta<=ca;++ta){var Ya=Math.pow(2,ta),Ja=ja/Ya;Ya=qa/Ya;var Xa=c.createTexture();a(Xa);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,ab,Ja,Ya,0,Ca,Na,null);a(null);Hb[ta]=Xa}Rb=!0}a(null);m[k]=-1;rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);Ia=!0;N.B&&Ua&&(N.B(Ua),N.B=null)}}function R(){for(var ca=ja*qa,ta=2*ca,Ya=3*ca,Ja=0;Ja<ca;++Ja)fa[0][Ja]=lb[Ja],fa[1][Ja]=lb[Ja+ca],fa[2][Ja]=lb[Ja+ta],fa[3][Ja]=lb[Ja+Ya]}function Q(){var ca=ja*qa*4;ka=[new Uint8Array(ca),new Uint8Array(ca),new Uint8Array(ca),new Uint8Array(ca)];
fa=[new Float32Array(ka[0].buffer),new Float32Array(ka[1].buffer),new Float32Array(ka[2].buffer),new Float32Array(ka[3].buffer)];Ra=new Uint8Array(4*ca);lb=new Float32Array(Ra.buffer);na=!0}function ia(){aa=new Uint8Array(ja*qa*4);jc=new Float32Array(aa.buffer);Xb=!0}var aa,N=Object.assign({},f,F),da=x++;null===N.isFlipY&&(N.isFlipY=N.url?!0:!1);N.data&&(N.array="string"===typeof N.data?Kb(N.data):N.isFloat?new Float32Array(N.data):new Uint8Array(N.data),N.isFlipY=!1);var w=0,O=N.ka?!0:!1,E=null,
X=null,la=!1;N.S=N.S||N.isFloat;N.S&&(w=1);!N.wm&&N.isFloat&&l&&!Fa.fa()&&(N.isFloat=!1);N.isFloat&&(w=2);N.isAnisotropicFiltering&&p&&!ea.Dm()&&(N.isAnisotropicFiltering=!1);var ma=N.$h||c.createTexture(),xa=null,Ea=!1,ja=0,qa=0,Ia=!1,Z=!1,na=!1,fa=null,ka=null,Ra=null,lb=null,ab=null,Ca=null,Na=null,rb=N.isFlipY,sc=(F=N.S&&N.isMipmap)&&Ib.Qk(),Ab=F&&!sc?!0:!1,Hb=null,Qb=-1,ic=-1,Rb=!1,Xb=!1,jc=aa=null;N.width&&(ja=N.width,qa=N.height?N.height:ja);var Ua={get:function(){return ma},O:function(){return ja},
Y:function(){return qa},gm:function(){return N.url},si:function(){return N.isFloat},ti:function(){return N.S},wq:function(ca){ma=ca},$p:function(){return N.isLinear},Ad:function(){c.generateMipmap(c.TEXTURE_2D)},Ik:function(ca,ta){Ab?(ca||(ca=Ua.Wh()),C.Ie(ta),a(Hb[ca]),m[ta]=-1):Ua.h(ta)},Wh:function(){-1===Qb&&(Qb=Math.log(ja)/Math.log(2));return Qb},Cl:function(ca){ca||(ca=Ua.Wh());if(Ab){Y.set("s12");C.Ie(0);for(var ta=ja,Ya=qa,Ja=1;Ja<=ca;++Ja)ta/=2,Ya/=2,Y.N("u14",.25/ta,.25/Ya),c.viewport(0,
0,ta,Ya),a(Hb[Ja-1]),c.framebufferTexture2D(Aa.rf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,Hb[Ja],0),W.l(!1,1===Ja);m[0]=-1}else ca!==ic&&(ic=ca,c.TEXTURE_MAX_LEVEL&&c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAX_LEVEL,ca)),Ua.Ad()},xq:function(ca){(O=!(Array.isArray(ca)||ca.constructor===Float32Array||ca.constructor===Uint8Array))?(Ea=null,N.ka=ca,M()):Ea=ca},h:function(ca){if(!Ia)return!1;C.Ie(ca);if(m[ca]===da)return!1;a(ma);m[ca]=da;return!0},Ka:function(ca){c.activeTexture(n[ca]);k=ca;a(ma);m[ca]=da},
o:function(){t=Ua;C.oj(ma)},M:function(){c.viewport(0,0,ja,qa);t=Ua;C.oj(ma)},se:C.se,Wn:function(ca,ta){ja=ca;qa=ta},resize:function(ca,ta){Ua.Wn(ca,ta);u()},clone:function(ca){ca=C.instance({width:ja,height:qa,S:N.S,isFloat:N.isFloat,isLinear:N.isLinear,isMirrorY:N.isMirrorY,isFlipY:ca?!rb:rb,isPot:N.isPot});vb.set("s0");Aa.$();ca.M();Ua.h(0);W.l(!0,!0);return ca},Vc:function(){c.viewport(0,0,ja,qa)},remove:function(){c.deleteTexture(ma);Z=!0;v.splice(v.indexOf(Ua),1);Ua=null},refresh:function(){Ua.Ka(0);
rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);O?c.texImage2D(c.TEXTURE_2D,0,ab,Ca,Na,N.ka):c.texImage2D(c.TEXTURE_2D,0,ab,ja,qa,0,Ca,Na,Ea);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Vi:function(){na||Q();c.readPixels(0,0,ja,4*qa,c.RGBA,c.UNSIGNED_BYTE,Ra);R();return fa},rn:function(){na||Q();return Fa.mg(0,0,ja,4*qa,Ra).then(function(){R();return fa})},tn:function(){Xb||ia();c.readPixels(0,0,ja,qa,c.RGBA,c.UNSIGNED_BYTE,aa);return jc},sn:function(){Xb||ia();return Fa.mg(0,0,ja,qa,aa)},yh:function(ca){Aa.ba();
Y.set("s15");Ua.h(0);if(ca)c.viewport(0,0,ja,qa),Y.io("u15",.25,.25,.25,.25),W.l(!1,!0);else for(ca=0;4>ca;++ca)c.viewport(0,qa*ca,ja,qa),Y.xa("u15",h[ca]),W.l(!1,0===ca)},Sg:function(ca){var ta;if(ta=Na===z[0])null!==P.Cf?ta=P.Cf:(ta=e(new Uint8Array([127,127,127,127]),!1),ta=null===ta?!0:P.Cf=ta),ta=!ta;a(ma);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);ta?(la||(E=document.createElement("canvas"),E.width=ja,E.height=qa,X=E.getContext("2d"),X.createImageData(ja,qa),la=!0),null.data.set(ca),X.putImageData(null,
0,0),c.texImage2D(c.TEXTURE_2D,0,ab,Ca,Na,E)):c.texImage2D(c.TEXTURE_2D,0,ab,ja,qa,0,Ca,Na,ca);m[k]=da;rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Lq:function(ca,ta){a(ma);ta&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,ab,Ca,Na,ca);m[k]=da;ta&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},bc:function(ca,ta){var Ya=ja*qa,Ja=4*Ya;ca=N.S?ca?"RGBE":"JSON":"RGBA";ta&&(ca=ta);ta=Fa.la()&&!1;var Xa=null;switch(ca){case "RGBE":Xa="s13";break;case "JSON":Xa=ta?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Xa=
"s7"}na||("RGBA"===ca||"RGBE"===ca||"RGBAARRAY"===ca?(ka=new Uint8Array(Ja),na=!0):"JSON"!==ca||ta||Q());Aa.ba();Y.set(Xa);Ua.h(0);Ja=null;if("RGBA"===ca||"RGBE"===ca||"RGBAARRAY"===ca){c.viewport(0,0,ja,qa);W.l(!0,!0);c.readPixels(0,0,ja,qa,c.RGBA,c.UNSIGNED_BYTE,ka);if("RGBAARRAY"===ca)return{data:ka};g||(A=document.createElement("canvas"),J=A.getContext("2d"),g=!0);A.width=ja;A.height=qa;Ya=J.createImageData(ja,qa);Ya.data.set(ka);J.putImageData(Ya,0,0);Ja=A.toDataURL("image/png")}else if("JSON"===
ca)if(ta)Ja=new Float32Array(Ya),c.viewport(0,0,ja,qa),W.l(!0,!0),c.readPixels(0,0,ja,qa,c.RGBA,c.FLOAT,Ja);else{for(Ja=0;4>Ja;++Ja)c.viewport(0,qa*Ja,ja,qa),Y.xa("u15",h[Ja]),W.l(!Ja,!Ja);Ua.Vi();Ja=Array(Ya);for(ta=0;ta<Ya;++ta)Ja[4*ta]=fa[0][ta],Ja[4*ta+1]=fa[1][ta],Ja[4*ta+2]=fa[2][ta],Ja[4*ta+3]=fa[3][ta]}return{format:ca,data:Ja,width:ja,height:qa,isMirrorY:N.isMirrorY,isFlipY:"RGBA"===ca?N.isFlipY:!N.isFlipY}}};N.isMipmap&&!Ab&&Ia&&!Rb&&(Ua.Ad(),Rb=!0);if(N.url)a(ma),c.texImage2D(c.TEXTURE_2D,
0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),xa=new Image,xa.sp="Anonymous",xa.crossOrigin="Anonymous",xa.src=N.url,xa.onload=function(){ja=xa.width;qa=xa.height;u()};else if(N.ka){var Mb=function(){M();ja?u():setTimeout(Mb,1)};Mb()}else N.array?(N.S&&!N.isFloat?N.array instanceof Uint16Array?(Ea=N.array,u()):d()?(Ea=b(N.array),u()):(u(),C.Mh(c,ma,Ua.O(),Ua.Y(),N.array,rb,!0)):(Ea=N.isFloat?N.array instanceof Float32Array?N.array:new Float32Array(N.array):N.array instanceof Uint8Array?N.array:new Uint8Array(N.array),
u()),N.isKeepArray||(Ea&&Ea!==N.array&&(Ea=null),delete N.array)):N.$h?Ia=!0:u();Ua.Pp=Ua.O;N.B&&Ia&&(N.B(Ua),N.B=null);v.push(Ua);return Ua},ba:function(F){F!==k&&(c.activeTexture(n[F]),k=F);m[F]=-1;a(null)},Kk:function(F){q.random.h(F)},se:function(){t=null;c.framebufferTexture2D(Aa.rf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==k&&c.activeTexture(n[0]);for(var F=0;F<n.length;++F)m[F]=-1;k=-1},mq:function(){k=-1},Kj:function(){for(var F=0;F<n.length;++F)C.ba(F)},H:function(){q&&
(q.random.remove(),q.Ij.remove())},Yc:function(F,M){if("RGBA"===F.format||"RGBE"===F.format){var r=new Image;r.src=F.data;r.onload=function(){C.instance({isMirrorY:F.isMirrorY,isFlipY:F.isFlipY,isFloat:!1,ka:r,B:function(u){if("RGBA"===F.format)M(u);else{var R=F.width,Q=F.height,ia=C.instance({isMirrorY:F.isMirrorY,isFloat:!0,width:R,height:Q,isFlipY:F.isFlipY});Aa.$();c.viewport(0,0,R,Q);Y.set("s14");ia.o();u.h(0);W.l(!0,!0);C.ba(0);M(ia);Fa.flush();u.remove()}}})}}else"JSON"===F.format?M(C.instance({isFloat:!0,
isFlipY:F.isFlipY,width:F.width,height:F.height,array:new Float32Array(F.data)})):M(!1)},Wk:b,v:function(){t&&(Aa.$(),C.se(),Aa.ba());C.Kj();v.slice(0).forEach(function(F){F.remove()});v.splice(0);H=!1;x=0;"undefined"!==typeof Ib&&Ib.v();q=null}};return C}(),Nc={instance:function(a){var b=[ba.instance(a),ba.instance(a)],d=[b[1],b[0]],e=d,k={jj:function(n){e[1].o();e[0].h(n);k.wj()},Qn:function(n){e[1].M();e[0].h(n);k.wj()},wj:function(){e=e===b?d:b},refresh:function(){e[0].refresh();e[1].refresh()},
h:function(n){e[0].h(n)},Ka:function(n){e[0].Ka(n)},Jk:function(n){e[1].h(n)},Kp:function(){return e[0]},Np:function(){return e[1]},Sg:function(n){e[0].Sg(n);e[1].Sg(n)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){k.Qn(0);Y.set("s0");W.l(!1,!1)}};return k}},W=function(){function a(q){var t={ja:null,indices:null};t.ja=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,t.ja);q.bufferData(q.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),q.STATIC_DRAW);t.indices=q.createBuffer();
q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,t.indices);q.bufferData(q.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),q.STATIC_DRAW);return t}var b=null,d=0,e=!1,k=[],n=-2,x=-2,m={reset:function(){x=n=-2},m:function(){e||(b=a(c),m.ld(),e=!0)},instance:function(q){var t=d++,z=q.indices?q.indices.length:0,G="undefined"===typeof q.mode?c.STATIC_DRAW:q.mode,y=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,y);c.bufferData(c.ARRAY_BUFFER,q.ja instanceof Float32Array?q.ja:new Float32Array(q.ja),G);n=t;var H=null,v=
null,f=null;if(q.indices){H=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,H);var g=null;65536>q.indices.length?(g=Uint16Array,v=c.UNSIGNED_SHORT,f=2):(g=Uint32Array,v=c.UNSIGNED_INT,f=4);g=q.indices instanceof g?q.indices:new g(q.indices);c.bufferData(c.ELEMENT_ARRAY_BUFFER,g,G);x=t}var A={xc:function(J){n!==t&&(c.bindBuffer(c.ARRAY_BUFFER,y),n=t);J&&vb.je()},Gk:function(){x!==t&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,H),x=t)},bind:function(J){A.xc(J);A.Gk()},U:function(){c.drawElements(c.TRIANGLES,
z,v,0)},La:function(J,h){c.drawElements(c.TRIANGLES,J,v,h*f)},remove:function(){c.deleteBuffer(y);q.indices&&c.deleteBuffer(H);A=null}};k.push(A);return A},ld:function(){-1!==n&&(c.bindBuffer(c.ARRAY_BUFFER,b.ja),n=-1);-1!==x&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indices),x=-1)},l:function(q,t){q&&W.ld();t&&vb.ec();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Ob:function(q){q=q||c;var t=a(q);q.bindBuffer(q.ARRAY_BUFFER,t.ja);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,t.indices);vb.fc(q);q.clear(q.COLOR_BUFFER_BIT);
q.drawElements(q.TRIANGLES,3,q.UNSIGNED_SHORT,0);q.flush();q.bindBuffer(q.ARRAY_BUFFER,null);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null);q.deleteBuffer(t.ja);q.deleteBuffer(t.indices);m.reset();e&&(m.ld(),vb.ec())},H:function(){var q=c,t=b;q.deleteBuffer(t.ja);q.deleteBuffer(t.indices)},v:function(){m.H();k.forEach(function(q){q.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);m.reset();e=!1;k.splice(0);d=0}};return m}(),Aa=function(){var a=null,b=null,d=null,e=
!1,k=[],n={na:-2,Lh:1},x={Yb:function(){return e},m:function(){if(!e){a=c.createFramebuffer();var m=Fa.la();b=m&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;d=m&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;e=!0}},Kl:function(){return b},Sh:function(){return d},rf:function(){return c.FRAMEBUFFER},Op:function(){return n},Dp:function(){return a},instance:function(m){void 0===m.Gc&&(m.Gc=!1);var q=m.ha?m.ha:null,t=m.width,z=void 0!==m.height?m.height:m.width,G=a,y=null,H=!1,v=!1,f=0;q&&
(t=t?t:q.O(),z=z?z:q.Y());var g={dj:function(){H||(G=c.createFramebuffer(),H=!0,f=n.Lh++)},fd:function(){g.dj();g.o();y=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,y);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,t,z);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,y);c.clearDepth(1)},bind:function(A,J){f!==n.na&&(c.bindFramebuffer(b,G),n.na=f);q&&q.o();J&&c.viewport(0,0,t,z);A&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},gh:function(){f!==n.na&&(c.bindFramebuffer(b,
G),n.na=f)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Se:function(){c.clear(c.COLOR_BUFFER_BIT)},nh:function(){c.clear(c.DEPTH_BUFFER_BIT)},Vc:function(){c.viewport(0,0,t,z)},o:function(){f!==n.na&&(c.bindFramebuffer(b,G),n.na=f)},rtt:function(A){q=A;n.na!==f&&(c.bindFramebuffer(c.FRAMEBUFFER,G),n.na=f);A.o()},ba:function(){c.bindFramebuffer(b,null);n.na=-1},resize:function(A,J){t=A;z=J;y&&(c.bindRenderbuffer(c.RENDERBUFFER,y),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
t,z))},remove:function(){G===a||v||(c.bindFramebuffer(b,G),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),y&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null),c.bindFramebuffer(b,null),c.deleteFramebuffer(G),y&&c.deleteRenderbuffer(y));v=!0}};m.Gc&&g.fd();k.push(g);return g},ba:function(){c.bindFramebuffer(b,null);n.na=-1},Jq:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);Fa.tj();n.na=-1},reset:function(){n.na=-2},$:function(){0!==
n.na&&(c.bindFramebuffer(b,a),n.na=0)},clear:function(){Fa.tj();c.clear(c.COLOR_BUFFER_BIT)},v:function(){x.ba();k.forEach(function(m){m.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);x.reset();e=!1;k.splice(0);n.Lh=1}};return x}(),Fa=function(){function a(){m="undefined"===typeof jb?ea:jb;q=!0}function b(h,p){for(var l=0;l<h.length;++l){var B=p.getExtension(h[l]);if(B)return B}return null}function d(){null!==g.re&&(clearTimeout(g.re),g.re=null);g.Tb=!1}function e(h){if(0===g.xb.length){g.za=
c.PIXEL_PACK_BUFFER;g.xb.splice(0);g.Gd.splice(0);for(var p=0;p<g.zc;++p)g.xb.push(c.createBuffer()),g.Gd.push(-1);g.Ta=0;g.ag=0}c.bindBuffer(g.za,g.xb[g.Ta]);h.byteLength!==g.Gd[g.Ta]&&(c.bufferData(g.za,h.byteLength,c.STREAM_READ),g.Gd[g.Ta]=h.byteLength);g.Up=!0}function k(){c.bindBuffer(g.za,null)}function n(){g.Rb.forEach(function(h){c.deleteSync(h)});g.Rb.splice(0)}function x(){g.Ta=(g.Ta+1)%g.zc;++g.ag}var m=null,q=!1,t={ii:!1,Kg:null,Lg:null,oi:!1,Bm:!1,Mg:null,pi:!1,Ng:null,ji:!1,Te:null,
tm:!1,Ue:null,um:!1},z=null,G={Wa:!0,Ya:!0,jf:!0,Ui:!1},y=null,H=!0,v=null,f=null,g={Xk:1,zc:-1,Ta:0,ag:0,Tb:!1,xb:[],Rb:[],Gd:[],za:null,re:null},A="undefined"===typeof window?{}:window,J={m:function(){if(q)return!0;J.reset();q||a();var h=c;if(!z.ii){z.Kg=J.Ih(h);A.GL_EXT_FLOAT=z.Kg;z.oi=z.Kg?!0:!1;if(z.oi||J.la())z.Lg=J.Jh(h),z.Bm=z.Lg?!0:!1,A.GL_EXT_FLOATLINEAR=z.Lg;z.ii=!0}if(!z.ji){z.Mg=J.xd(h);z.Mg&&(z.pi=!0,A.GL_EXT_HALFFLOAT=z.Mg);if(z.pi||J.la())z.Ng=J.Kh(h),A.GL_EXT_HALFFLOATLINEAR=z.Ng;
z.Xp=z.Ng?!0:!1;z.ji=!0}z.Te=J.Gh(h);z.tm=z.Te?!0:!1;A.GL_EXT_COLORBUFFERFLOAT=z.Te;z.Ue=J.Hh(h);z.um=z.Ue?!0:!1;A.GL_EXT_COLORBUFFERHALFFLOAT=z.Ue;Aa.m();ba.m();if(!J.gl())return!1;W.m();ba.nm();return!0},reset:function(){z=Object.assign({},t);y=Object.assign({},G)},O:function(){q||a();return m.O()},Y:function(){q||a();return m.Y()},la:function(){q||a();return m.la()},Fh:function(h){J.Gh(h);J.Hh(h);J.Ih(h);J.Jh(h);J.xd(h);J.Kh(h)},Gh:b.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float",
"OES_color_buffer_float"]),Hh:b.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Ih:b.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Jh:b.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),xd:b.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Kh:b.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear",
"WEBKIT_OES_texture_half_float_linear"]),qf:function(h){var p=J.xd(h);return p&&p.HALF_FLOAT_OES?p.HALF_FLOAT_OES:h.HALF_FLOAT||h.FLOAT},Ll:function(){return f||c.RGBA32F||c.RGBA},Ml:function(){return v||c.RGBA16F||c.RGBA},Fl:function(){return y},fa:function(){return y.Wa},np:function(){return y.Ya},Pk:function(){return y.jf},Sk:function(){return y.Ui&&H},Hj:function(h){H=h;!h&&g.Tb&&(n(),c.bindBuffer(g.za,null),g.Tb=!1)},aq:function(){return g.Tb},pe:function(h,p,l){function B(){h.bindTexture(h.TEXTURE_2D,
null);h.bindFramebuffer(L,null);h.deleteTexture(F);h.deleteFramebuffer(C)}var L=h.FRAMEBUFFER,P=h.NEAREST,C=h.createFramebuffer();h.bindFramebuffer(L,C);var F=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,F);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,P);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,
P);h.texImage2D(h.TEXTURE_2D,0,p,3,3,0,h.RGBA,l,null);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,F,0);if(h.checkFramebufferStatus(h.READ_FRAMEBUFFER||h.FRAMEBUFFER)!==h.FRAMEBUFFER_COMPLETE)return B(),!1;vb.ge(h);h.clearColor(0,0,0,0);h.viewport(0,0,3,3);h.disable(h.DEPTH_TEST);h.clear(h.COLOR_BUFFER_BIT);W.Ob(h);h.bindFramebuffer(L,null);vb.Bb(h);h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,F);W.Ob(h);p=new Uint8Array(36);h.readPixels(0,0,3,3,h.RGBA,h.UNSIGNED_BYTE,
p);B();for(l=0;36>l;++l)if(3!==l%4&&3<Math.abs(p[l]-127))return!1;return!0},af:function(h){var p={Wa:!1,Ya:!1};h.disable(h.BLEND);h.clearColor(0,0,0,0);h.clear(h.COLOR_BUFFER_BIT);h.RGBA32F&&J.pe(h,h.RGBA32F,h.FLOAT)&&(p.Wa=!0,f=h.RGBA32F);!p.Wa&&J.pe(h,h.RGBA,h.FLOAT)&&(p.Wa=!0,f=h.RGBA);var l=J.qf(h);v=null;h.RGBA16F&&J.pe(h,h.RGBA16F,l)&&(p.Ya=!0,v=h.RGBA16F);!p.Ya&&J.pe(h,h.RGBA,l)&&(p.Ya=!0,v=h.RGBA);return p},il:function(){var h=Aa.instance({width:2});h.dj();var p=ba.instance({width:2,isFloat:!0,
J:3});h.o();p.o();J.flush();c.checkFramebufferStatus(Aa.Sh())!==c.FRAMEBUFFER_COMPLETE?(ba.bo(),y.jf=!1):y.jf=!0;h.remove();p.remove()},jl:function(){var h=!1;J.la()&&(h="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(p){return"undefined"!==typeof c[p]}));y.Ui=h},gl:function(){var h=J.af(c);Object.assign(y,h);if(!y.Wa&&!y.Ya)return!1;J.il();J.jl();return!0},un:function(h,p,l,B,L){c.readPixels(h,p,l,B,c.RGBA,c.UNSIGNED_BYTE,
L);return Promise.resolve(L,!1)},mg:function(h,p,l,B,L,P,C){if(!J.Sk())return J.un(h,p,l,B,L);g.zc=C||g.Xk;e(L);c.readPixels(h,p,l,B,c.RGBA,c.UNSIGNED_BYTE,0);g.Rb[g.Ta]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);J.flush();var F=!1;return new Promise(function(M,r){function u(){if(!g.Tb)return d(),k(),x(),r(),!1;var R=(g.Ta+1)%g.zc;switch(c.clientWaitSync(g.Rb[R],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;default:return d(),c.deleteSync(g.Rb[R]),g.Rb[R]=null,c.bindBuffer(g.za,g.xb[R]),
c.getBufferSubData(g.za,0,L),k(),x(),M(L,F),!0}g.re=setTimeout(u,0);return!1}d();g.ag+1<g.zc?(k(),x(),M(L,!1)):(g.Tb=!0,u()||!P||F||(F=!0,P()))})},tj:function(){c.viewport(0,0,J.O(),J.Y())},flush:function(){c.flush()},v:function(){d();n();ba.v();Aa.v();W.v();g.xb.forEach(function(h){c.deleteBuffer(h)});g.xb.splice(0);vb.reset();q=!1}};return J}(),Ib=function(){function a(l,B,L,P){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,P?g.NEAREST_MIPMAP_NEAREST:g.LINEAR);var C=null;if(null!==L)try{C=g.getError();
if("FUCKING_BIG_ERROR"===C)return!1;g.texImage2D(g.TEXTURE_2D,0,l,4,4,0,g.RGBA,B,L);C=g.getError();if(C!==g.NO_ERROR)return!1}catch(F){return!1}P&&g.generateMipmap(g.TEXTURE_2D);g.clear(g.COLOR_BUFFER_BIT);W.Ob(g);C=g.getError();if("FUCKING_BIG_ERROR"===C)return!1;g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,z);C=g.getError();C===g.INVALID_OPERATION&&"undefined"!==typeof g.PIXEL_PACK_BUFFER&&(g.bindBuffer(g.PIXEL_PACK_BUFFER,null),g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,z),C=g.getError());if(C!==
g.NO_ERROR)return!1;L=!0;for(P=0;16>P;++P)L=L&&4>Math.abs(z[P]-127);L&&(q.Qi=B,q.hi=l);return L}function b(l,B){return A.Wa&&a(l,g.FLOAT,new Float32Array(G),B)?(m=x.dh,!0):!1}function d(l,B,L){if(!A.Ya)return!1;var P=ba.Wk(G),C=Fa.xd(g);if(C&&C.HALF_FLOAT_OES&&a(l,C.HALF_FLOAT_OES,P,B)||g.HALF_FLOAT&&a(l,g.HALF_FLOAT,P,B))return m=x.rc,!0;P=new Float32Array(G);if(a(l,g.FLOAT,P,B))return m=x.rc,!0;g.bindTexture(g.TEXTURE_2D,L);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,2,2,0,g.RGBA,g.UNSIGNED_BYTE,null);g.bindFramebuffer(q.sd,
p);ba.Mh(g,L,2,2,P,!1,!1);g.bindFramebuffer(q.sd,null);g.bindTexture(g.TEXTURE_2D,L);return a(l,null,null,B)?(m=x.rc,!0):!1}function e(l,B,L){t=!0;if(d(l,!0,L)||b(B,!0))return!0;t=!1;return d(l,!1,L)||b(B,!1)?!0:!1}function k(l){if(m===x.K){g=l||c;m=x.RGBA8;t=!0;Fa.Fh(g);A||(A=Fa.af(g));Aa.reset();p=g.createFramebuffer();q.sd=g.DRAW_FRAMEBUFFER||g.FRAMEBUFFER;g.bindFramebuffer(q.sd,null);g.clearColor(0,0,0,0);g.viewport(0,0,2,2);Y.K();J=Y.Bb(g);l=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,
l);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);h=l;var B=l=g.RGBA,L=g.RGBA16F,P=g.RGBA32F;P&&(l=P);L&&(B=L);if((L||P)&&e(B,l,h))return n(),!0;l=B=g.RGBA;if(e(B,l,h))return n(),!0;m=x.RGBA8;n();return!1}}function n(){g.deleteProgram(J.oa);g.deleteTexture(h);h=J=null}for(var x={K:-1,dh:3,rc:2,RGBA8:0},m=x.K,q={Qi:null,hi:null,sd:null},t=!0,z=new Uint8Array(16),G=Array(64),
y=0;4>y;++y)for(var H=0;4>H;++H){var v=0===(H+y)%2?1:0,f=4*y+H;G[4*f]=v;G[4*f+1]=v;G[4*f+2]=v;G[4*f+3]=v}var g=null,A=null,J=null,h=null,p=null;return{Qk:function(l){k(l);return t},lh:function(l,B){m===x.K&&(typeof("undefined"!==B)&&(A=B),k(l));return m!==x.RGBA8},Yp:function(l){k(l);return m===x.dh},Em:function(l){k(l);return m===x.rc},Jp:function(l){k(l);return q.Qi},Nl:function(l){k(l);return q.hi},v:function(){g=null;t=!0;m=x.K;A=null}}}(),$c={instance:function(a){function b(){y&&y.remove();y=
ba.instance({isFloat:!1,isPot:!1,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}var d=null,e=!1,k=!1,n=null,x=!1,m=!1,q=null,t="undefined"===typeof a.preprocessing?!1:a.preprocessing,z="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(e=!0,I&&void 0!==I.ca&&(a.mask=I.ca+a.mask),d=ba.instance({isFloat:!1,url:a.mask}));var G=!1;a.customInputShader&&(G="s49",Y.ma({name:"_",id:G,g:a.customInputShader,Kq:["uSource"],precision:"lowp"}),Y.j(G,[{type:"1i",name:"_",value:0}]));switch(t){case "sobel":q=
"s38";x=!0;break;case "meanNormalization":q="s39";x=!0;break;case "grayScale":q="s35";x=!1;break;case "grayScaleTilt":q="s36";m=!0;x=!1;break;case "rgbGrayTilt":q="s37";m=!0;x=!1;break;case "copy":q=G?G:"s0";break;case "inputLightRegulation":q=G?G:"s35";n=qd.instance({gi:z,Ki:a.size,Fi:a.nBlurPass,Ba:!1});k=!0;break;case "inputMix0":q="none";n=rd.instance({Z:z,jb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Ba:!1});k=!0;break;case "inputMix1":q="none";n=sd.instance({Z:z,jb:a.varianceMin,Sa:a.blurKernelSizePx,
gain:a.gain||1,Ba:!1});k=!0;break;case "inputCut4":q="none";n=td.instance({Z:z,jb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Hc:a.isNormalized||!1,gg:a.overlap||0,Ba:!1});z*=n.Ol();k=!0;break;case "direct":case "none":case "abort":q="abort";break;default:q="s4"}z=Math.ceil(z);m&&Y.j(q,[{name:"u29",type:"1f",value:a.tilt}]);e&&(q+="Mask");var y=null;b();var H={O:function(){return a.size},Pl:function(){return z},sf:function(){return H.O()},Tl:function(){return k?n.Dc():y},te:function(v){a.Aa=
v;b()},wa:function(v){Aa.$();if("abort"===q)return v.h(0),v;"none"!==q&&(Y.set(q),x&&Y.G("u30",1/a.size),y.M(),e&&d.h(1),W.l(!1,!1),y.h(0),v=y);k&&n.process(v)},v:function(){y.remove();e&&d.remove()}};return H}},ad={instance:function(a){function b(){if(p.kc){k.input&&(k.input.remove(),k.Jd.remove());var B=a.size*a.sparsity;h=Math.log(B/a.size)/Math.log(2);k.input=ba.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:B*a.Aa[0],height:B*a.Aa[1],Vf:h});k.Jd=ba.instance({isFloat:!0,isPot:!0,width:a.size*
a.Aa[0],height:a.size*a.Aa[1]})}}function d(){k.zb&&k.zb.remove();k.zb=ba.instance({isFloat:!0,isPot:!x,isLinear:!x&&m.isLinear,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}function e(B){m.buffer.forEach(function(L,P){m.results[P][0]=B[0][L];m.results[P][1]=B[1][L];m.results[P][2]=B[2][L];m.results[P][3]=B[3][L]});return m.results}a.normalize=a.normalize||!1;var k={input:null,bias:null,Jd:null,zb:null,fg:null,dg:null,eg:null},n=null,x=!0,m={type:"undef",B:null,isLinear:!1,buffer:[],results:[],Ld:!1},
q=-1,t=a.isReorganize?a.isReorganize:!1,z=a.kernelsCount?!0:!1,G=[a.Sb?"s31":"s30",a.Sb?"s33":"s32","s34"][a.shiftRGBAMode||0],y={isEnabled:!1},H=1/a.size;a.ym?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.ce.sf(),x=!1):"full"===a.connectivityUp&&(a.sparsity=a.ce.sf());var v={elu:"s18",elu01:"s19",relu:"s17",arctan:"s20",arctan2:"s21",sigmoid:"s16",copy:"s0"}[a.activation],f=a.sparsity*a.sparsity,g=!1,A=a.size,J="";if(a.maxPooling){switch(a.maxPooling.size){case 2:J="s40";break;case 4:J=
"s41"}g=!0;A/=a.maxPooling.size;k.dg=ba.instance({isFloat:!0,isPot:!1,width:A})}var h=-1,p=null;x&&d();k.bias=ba.instance(a.bias);var l={O:function(){return a.size},sf:function(){return A},Ph:function(){return a.classesCount},Hk:function(B){n.h(B)},ln:function(){a.remap&&a.remap.isEnabled&&(y={isEnabled:!0,Rm:ba.instance(a.remap.maskTexture),Lc:a.remap.layers.map(function(B){return a.parent.Ql(B)}),depth:a.remap.depth})},co:function(){switch(a.connectivityUp){case "direct":p=ud.instance(a.connectivity);
break;case "square":p=vd.instance(a.connectivity);break;case "squareFast":p=wd.instance(a.connectivity,a.activation);break;case "full":p=xd.instance(Object.assign({Sb:a.Sb,Ec:a.Ec||[1,1]},a.connectivity));break;case "conv":q=a.kernelsCount,p=yd.instance(a.connectivity),t&&(k.fg=ba.instance({width:A,isFloat:!0,isFlipY:!1,isPot:!1}))}b()},wa:function(B,L){n=B;p.kc?(k.input.M(),z&&k.bias.h(2),p.wa(y),k.input.h(0),k.input.Cl(h),k.Jd.M(),z?Y.set("s0"):(Y.set(G),Y.G("u4",f),k.bias.h(1)),k.input.Ik(h,0),
W.l(!1,!1),Y.set(v),k.zb.o(),k.Jd.h(0),W.l(!1,!1)):(k.zb.M(),k.bias.h(1),p.wa());if(x)return L=k.zb,g&&(k.dg.M(),L.h(0),Y.set(J),Y.N("u14",H,H),W.l(!1,!1),L=k.dg),t&&(k.fg.o(),Y.set("s23"),Y.N("u18",q,A/q),L.h(0),W.l(!1,!1),L=k.fg),L.h(0),L;var P=k.zb;if(a.normalize||m.Ld)B=a.normalize,Y.set(m.Ld?"s9":"s8"),Y.G("u10",B?H:1),k.eg.M(),P.h(0),W.l(!1,!1),P=k.eg;B=null;switch(m.type){case "cpuRGBA2Float":P.yh(!1);L?B=l.pn(P).then(m.B):(P=l.qn(P),m.B(P));break;case "cpuMeanFloat":P.yh(!0);if(L)B=P.sn().then(m.B);
else{P=P.tn();for(var C=0;C<P.length;++C);m.B(P)}break;case "gpuRawAvg":case "gpuRaw":P.h(0);case "none":null!==m.B&&m.B(P)}L&&null===B&&(B=Promise.resolve());return B},te:function(B){a.Aa=B;b();d()},mo:function(B){B&&(m.type=B.Yd||"none",m.B=B.Xd||null,m.isLinear=B.cg?!0:!1);d();B="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var L=0,P=0,C=0;L<B;++L)m.buffer.push(P+(a.size-1-C)*a.size),m.results.push([-1,-1,-1,-1]),++P,P===a.size&&(P=0,++C);m.Ld="gpuRawAvg"===
m.type||"cpuMeanFloat"===m.type;if(a.normalize||m.Ld)k.eg=ba.instance({isFloat:!0,isPot:!0,width:a.size})},pn:function(B){return B.rn().then(e)},qn:function(B){B=B.Vi();e(B);return m.results},v:function(){for(var B in k){var L=k[B];L&&L.remove()}p&&(p.v(),p=null)}};a.ce&&l.co(a.ce);return l}},ud={instance:function(a){var b=ba.instance(a.weights);return{kc:!0,Dd:function(){return 1},v:function(){b.remove()},hm:function(){return b},wa:function(){Y.set("s29");b.h(1);W.l(!1,!1)}}}},xd={instance:function(a){var b=
a.fromLayerSize,d=ba.instance(a.weights),e=a.Sb?"s26":"s25";return{kc:!0,Dd:function(){return b},v:function(){d.remove()},wa:function(k){if(k.isEnabled){Y.set("s27");k.Rm.h(3);for(var n=Math.min(k.Lc.length,k.depth),x=0;x<n;++x)k.Lc[x].Hk(4+x)}else Y.set(e);a.Sb&&Y.ie("u21",a.Ec);Y.G("u8",a.toLayerSize);Y.G("u9",a.fromLayerSize);d.h(1);W.l(!1,!1)}}}},vd={instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,k=e*d,n=k/b,x=b/d,m=0,q=0,t=0,z=Array(e*d*e*d*4),G=Array(e*d*e*d*4),
y=Array(b*b),H=0;H<y.length;++H)y[H]=0;H=Math.floor(e/2);for(var v=.5/d,f=.5/b,g=.5/k,A=0;A<d;++A)for(var J=Math.round(A*x),h=0;h<d;++h){var p=Math.round(h*x),l=A/d,B=h/d;l+=v;B+=v;for(var L=0;L<e;++L){var P=J+L-H;0>P&&(P+=b);P>=b&&(P-=b);for(var C=0;C<e;++C){var F=m/k,M=q/k,r=p+C-H;0>r&&(r+=b);r>=b&&(r-=b);var u=P/b,R=r/b;M=1-M-1/k;u+=f;R+=f;F+=g;M+=g;var Q=A*e+L,ia=h*e+C;ia=d*e-ia-1;Q=ia*d*e+Q;z[4*Q]=F;z[4*Q+1]=M;z[4*Q+2]=u;z[4*Q+3]=R;R=y[r*b+P]++;Q=R%n;u=P*n+Q;r=r*n+(R-Q)/n;r=b*n-1-r;r=r*b*n+u;
G[4*r]=F;G[4*r+1]=M;G[4*r+2]=l;G[4*r+3]=B;++m>=k&&(m=0,++q);++t}}}y=null;var aa=ba.instance(a.weights);delete a.weights.data;var N=ba.instance({width:k,isFloat:!0,array:new Float32Array(G),isPot:!0});G=null;var da=ba.instance({width:k,isFloat:!0,array:new Float32Array(z),isPot:!0});z=null;return{kc:!0,Dd:function(){return n},v:function(){N.remove();da.remove();aa.remove()},wa:function(){Y.set("s24");aa.h(1);da.h(2);W.l(!1,!1)}}}},yd={instance:function(a){var b=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/
a.fromLayerSize,k=a.inputScale||[1,1],n=ba.instance(a.weights);return{kc:!0,Dd:function(){return e},Rp:function(){return d},hm:function(){return n},v:function(){n.remove()},wa:function(){Y.set("s28");Y.ie("u28",k);Y.G("u26",b);Y.G("u27",d);Y.G("u8",a.toLayerSize);Y.G("u9",a.fromLayerSize);n.h(1);W.l(!1,!1)}}}},wd={instance:function(a,b){var d=a.fromLayerSize,e=a.toLayerSize,k=a.toSparsity,n=a.stride?a.stride:1,x=k*e/d,m=e<d,q=d/e,t=ba.instance(a.weights),z="s50"+[d.toString(),e.toString(),k.toString(),
n.toString(),b].join("_");Y.zl(z)||(a=cb(b),e=[{type:"1f",name:"u8",value:e},{type:"1f",name:"u32",value:n}],m&&e.push({type:"1f",name:"u9",value:d}),d=[(m?x:k).toFixed(1),a],m&&d.push(q.toFixed(1)),Y.pm(m?"s46":"s45",z,d),Y.j(z,e.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));return{kc:!1,Dd:function(){return x},v:function(){t.remove()},wa:function(){Y.set(z);t.h(3);W.l(!1,!1)}}}},qd={instance:function(a){var b=a.Fi?a.Fi:3,d=a.gi?a.gi:64,e=a.Ki?
a.Ki:64,k=a.Ba?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var n=ba.instance(a),x=ba.instance(a),m=ba.instance(a),q=ba.instance(a),t=ba.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),z=1/d;return{process:function(G){Y.set("s42");q.o();W.l(k,!1);Y.set("s43");for(var y=0;y<b;++y)n.o(),Y.N("u14",z,0),W.l(k,!1),m.o(),q.h(0),W.l(k,!1),x.o(),n.h(0),Y.N("u14",0,z),W.l(k,!1),q.o(),m.h(0),W.l(k,!1),y!==b-1&&x.h(0);Y.set("s44");t.o();G.h(0);x.h(1);q.h(2);W.l(k,!1);t.h(0)},Dc:function(){return t}}}},
rd={instance:function(a){function b(z){return ba.instance({isFloat:z,width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),e=b(!1),k=[b(!1),b(!1),b(!1)],n=[b(!1),b(!1),b(!1)],x=b(!0),m=[e,n[0],n[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6));var q="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),t={u1:0};Y.tc([{id:"s52",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",s:t,i:["u1"],precision:"lowp"},{id:"s53",name:"_",g:a,s:t,i:["u1","u33"],precision:"lowp"},{id:"s54",name:"_",g:q,s:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){Y.set("s52");e.M();W.l(d.Ba,!1);Y.set("s53");for(var z=0;3>z;++z)Y.N("u33",1,0),k[z].o(),m[z].h(0),
W.l(!1,!1),Y.N("u33",0,1),n[z].o(),k[z].h(0),W.l(!1,!1);Y.set("s54");x.o();e.h(0);n[0].h(1);n[1].h(2);n[2].h(3);W.l(!1,!1);x.h(0)},Dc:function(){return x}}}},sd={instance:function(a){function b(t){return ba.instance({isFloat:t,width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),e=b(!1),k=b(!1),n=b(!1),x=b(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6));var m="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),q={u1:0};Y.tc([{id:"s55",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
s:q,i:["u1"],precision:"lowp"},{id:"s56",name:"_",g:a,s:q,i:["u1","u33"],precision:"lowp"},{id:"s57",name:"_",g:m,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){Y.set("s55");e.M();W.l(d.Ba,!1);Y.set("s56");Y.N("u33",1,0);k.o();e.h(0);W.l(!1,!1);Y.N("u33",0,1);n.o();k.h(0);W.l(!1,!1);Y.set("s57");x.o();e.h(0);n.h(1);W.l(!1,!1);x.h(0)},Dc:function(){return x}}}},td={instance:function(a){function b(z){return ba.instance({isFloat:z,width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,
Sa:9,Z:128,gain:1,gg:0,Hc:!1,Ba:!1},a),e=b(!1),k=null,n=null,x=null;d.Hc&&(k=b(!1),n=b(!1),x=b(!0));a={u1:0};var m=[{id:"s58",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",d.gg.toFixed(4)),s:a,
i:["u1"],precision:"lowp"}];if(d.Hc){var q="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6)),t="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4));m.push({id:"s59",name:"_",g:q,s:a,i:["u1","u33"],precision:"lowp"},{id:"s60",name:"_",g:t,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}Y.tc(m);return{process:function(){Y.set("s58");e.M();W.l(d.Ba,!1);d.Hc?(Y.set("s59"),Y.N("u33",1,0),k.o(),e.h(0),W.l(!1,!1),Y.N("u33",0,1),n.o(),k.h(0),W.l(!1,!1),Y.set("s60"),x.o(),e.h(0),n.h(1),W.l(!1,!1),x.h(0)):e.h(0)},Ol:function(){return 2-d.gg},Dc:function(){return d.Hc?x:e}}}},Gb=function(){function a(f,
g,A,J,h,p,l){if(!H)if(l===p.length)h();else{switch(p[l]){case "A":A();break;case "D":f();break;case "S":g().then(function(B,L){v.Gj();a(f,g,A,L?null:J,h,p,++l)}).catch(function(B){console.log("An error occurred in the WebAR loop: ",B);h()});return;case "R":J&&J()}a(f,g,A,J,h,p,++l)}}var b={n:5,$f:1,xi:0,zd:[35,49],wd:[2,200],k:.7,Bo:200,en:.05},d=-1,e=null,k=-1,n=-1,x=0,m=-1,q=-1,t=0,z=0,G=b.wd[1],y=Math.log(2),H=!0,v={V:function(){switch(d){case -1:return-1;case 0:return q+e.xi;case 1:return t}},
Qh:function(f){return Math.pow(Math.min(Math.max(m,0),e.n-1)/(e.n-1),f||1)},m:function(f){e=Object.assign({},b,f);m=q=e.$f;d=0;v.reset()},Gj:function(f){f=("undefined"===typeof f?Date.now():f)||0;var g=Math.min(Math.max(f-z,e.wd[0]),e.wd[1]);G=g;z=f;var A=-1===k?0:e.k;k=Math.min(Math.max(1E3/g,5),120)*(1-A)+k*A;f-n>e.Bo&&5<++x&&(g=e.k,m=m*(1-g)+(k<e.zd[0]?q-1:k>e.zd[1]?q+1:q)*g,Math.abs(m-q)>1-e.en&&(g=Math.min(Math.max(Math.round(m),0),e.n-1),g!==q&&(m=q=g,k=(e.zd[1]-e.zd[0])/2)),n=f)},og:function(f,
g,A,J,h,p){H=!1;a(f,g,A,J,h,p,0)},stop:function(){H=!0},Yn:function(f){t=f;d=1},Ao:function(){d=0;v.reset()},reset:function(){G=b.wd[1];n=k=-1;x=0},Dq:function(f,g,A){A=Math.exp(-y*G/A);return(1-A)*f+A*g},Ip:function(){return G}};return v}(),Oc=function(){function a(G,y){var H=G[0]-.5;G=G[1]-.5;var v=y[0]-.5;y=y[1]-.5;return H*H+G*G-(v*v+y*y)}var b={Gi:4,Zd:[1.5,1.5,2],ra:[.1,.1,.1],bj:1,Z:-1,Af:-1,vo:2,bn:1,pg:!0,xl:.8},d=null,e=[],k=[],n=[],x=[0],m=[.5,.5,1],q=null,t=0,z=[0,0,0];return{m:function(G){d=
Object.assign({},b,G);e.splice(0);k.splice(0);n.splice(0);t=0;G=d.Zd[0]*d.ra[0];var y=d.Zd[1]*d.ra[1],H=1/(1+d.Zd[2]*d.ra[2]),v=d.bj*Math.min(d.Z,d.Af),f=v/d.Z;v/=d.Af;var g=.5*d.xl;g*=g;for(var A=0;A<d.Gi;++A){var J=[];k.push(J);var h=Math.pow(H,A),p=f*h,l=v*h;h=p*d.bn;n.push(h);var B=p*G,L=l*y;p/=2;l/=2;for(var P=1+(1-p-p)/B,C=1+(1-l-l)/L,F=0;F<C;++F)for(var M=l+F*L,r=M-.5,u=0;u<P;++u){var R=p+u*B,Q=R-.5;Q*Q+r*r>g||(R=[R,M,h],e.push(R),J.push(R))}d.pg&&J.sort(a);q=e}d.pg&&e.sort(a)},get:function(G){var y=
q.length;if(0===y)return m;for(;G>=x.length;)x.push(0);x[G]>=y&&(x[G]=0);var H=q[Math.floor(x[G])%y];x[G]=(x[G]+1/d.vo)%y;if(0===t)return H;z[0]=H[0];z[1]=H[1];z[2]=t;return z},hq:function(G){G>=x.length||(x[G]=Math.floor(Math.random()*q.length))},vq:function(G){t=G;if(0===t)q=e;else{for(var y=n.length,H=y-1,v=0;v<y;++v)if(n[v]<=G){H=v;break}q=k[H]}},reset:function(){for(var G=e.length/x.length,y=0;y<x.length;++y)x[y]=Math.floor(y*G);t=0;q=e}}}(),zb=function(){function a(){d(f+H.Wf);g.port.postMessage("DONE")}
function b(){p.gd=0===H.ya?J(d):J(e)}function d(C){h.Wb&&null!==v&&(C-=f,C=Math.min(Math.max(C,H.Ch[0]),H.Ch[1]),f+=C,n(),l.isEnabled&&l.Ic&&h.Na&&f-l.Jf>H.bh&&(t(),l.Jf=f),v(f))}function e(C){h.Wb&&(p.timeout=setTimeout(d.bind(null,C),H.ya))}function k(){v=null;h.Wb=!1;n()}function n(){p.gd&&(window.cancelAnimationFrame(p.gd),p.gd=null);p.timeout&&(window.clearTimeout(p.timeout),p.timeout=null)}function x(C){C&&!h.Na?(h.Na=!0,A&&Gb.Ao(),g.port.postMessage("STOP"),Fa.Hj(!0),b()):!C&&h.Na&&(h.Na=!1,
A&&Gb.Yn(1),Fa.Hj(!1),g.port.postMessage("START"))}function m(C){C.target.hidden?L():B()}function q(C,F,M){F=C.createShader(F);C.shaderSource(F,M);C.compileShader(F);return F}function t(){l.Ic=!1;var C=l.Xa,F=l.Hd,M=l.Id,r=l.za;C.uniform1f(l.ai,Math.random());l.Xb?F.beginQueryEXT(r,M):C.beginQuery(r,M);C.drawElements(C.POINTS,1,C.UNSIGNED_SHORT,0);l.Xb?F.endQueryEXT(r):C.endQuery(r);Fa.flush();G().then(function(u){0===u||isNaN(u)?(l.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",
u)):(u=H.Wj*H.ah*1E3/u,l.xe=(l.xe+1)%H.qc,l.Kf[l.xe]=u,++l.vi>H.qc&&(l.Nd.set(l.Kf),l.Nd.sort(function(R,Q){return R-Q}),u=l.Nd[Math.floor(H.qc/2)],l.yd=Math.max(l.yd,u),H.$g(u/l.yd)),l.Ic=!0)}).catch(function(){l.Ic=!0})}function z(C){var F=l.Xa,M=l.Hd,r=l.Id;r=l.Xb?M.Cp(r,M.QUERY_RESULT_AVAILABLE_EXT):F.getQueryParameter(r,F.QUERY_RESULT_AVAILABLE);F=F.getParameter(M.GPU_DISJOINT_EXT);r?C(!F):setTimeout(z.bind(null,C),.1)}function G(){return new Promise(function(C,F){z(function(M){if(M){M=l.Xa;
var r=l.Hd,u=l.Id;M=l.Xb?r.getQueryObjectEXT(u,r.QUERY_RESULT_EXT):M.getQueryParameter(u,M.QUERY_RESULT);C(M)}else F()})})}var y={ki:!0,Ch:[1,200],Wf:20,ya:0,ah:50,Wj:240,bh:3E3,qc:3,$g:null},H=null,v=null,f=0,g=null,A=!1,J=null,h={Ma:!1,Na:!0,If:!1,Gf:!1,Ff:!1,Wb:!1},p={gd:null,timeout:null},l={isEnabled:!1,Ic:!1,Xa:null,Hd:null,Id:null,za:null,ai:null,Xb:!0,Jf:0,vi:0,Kf:null,Nd:null,xe:0,yd:0},B=x.bind(null,!0),L=x.bind(null,!1),P={m:function(C){H=Object.assign(y,C);Object.assign(h,{Na:!0,Ma:!0,
Wb:!1});J=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==H.$g){C=document.createElement("canvas");C.setAttribute("width","1");C.setAttribute("height","1");var F={antialias:!1};C=C.getContext("webgl2",F)||C.getContext("webgl",F);if(F=C.getExtension("EXT_disjoint_timer_query")||C.getExtension("EXT_disjoint_timer_query_webgl2")){l.Xa=C;l.Hd=F;l.isEnabled=!0;l.Xb=F.beginQueryEXT?!0:!1;var M=q(C,C.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),r=q(C,C.FRAGMENT_SHADER,
"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",H.ah.toString())),u=C.createProgram();C.attachShader(u,M);C.attachShader(u,r);C.linkProgram(u);M=C.getAttribLocation(u,"a0");l.ai=C.getUniformLocation(u,"u39");C.useProgram(u);C.enableVertexAttribArray(M);u=C.createBuffer();C.bindBuffer(C.ARRAY_BUFFER,u);C.bufferData(C.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),C.STATIC_DRAW);C.vertexAttribPointer(M,4,C.FLOAT,
!1,16,0);u=C.createBuffer();C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,u);C.bufferData(C.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),C.STATIC_DRAW);C.disable(C.DEPTH_TEST);C.disable(C.DITHER);C.disable(C.STENCIL_TEST);C.viewport(0,0,1,1);u=l.Xb?F.createQueryEXT():C.createQuery();l.Id=u;l.za=F.TIME_ELAPSED_EXT||C.TIME_ELAPSED;l.Jf=-H.bh;l.Kf=new Float32Array(H.qc);l.Nd=new Float32Array(H.qc);l.yd=0;l.xe=0;l.vi=0;l.Ic=!0}}if(H.ki){C=!1;try{if("undefined"===typeof SharedWorker){var R=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
H.Wf.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),Q=new Worker(R);Q.addEventListener("message",a);g={Ti:Q,port:Q};h.If=!0}else{var ia=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
H.Wf.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),aa=new SharedWorker(ia);aa.port.start();aa.port.addEventListener("message",a);g={Ti:aa,port:aa.port};h.Gf=!0}C=!0}catch(N){}C&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",m):(window.addEventListener("blur",L),window.addEventListener("focus",B)),window.addEventListener("pagehide",
L),window.addEventListener("pageshow",B),h.Ff=!0)}A="undefined"!==typeof Gb},v:function(){k();h.Ff&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",m):(window.removeEventListener("blur",L),window.removeEventListener("focus",B)),window.removeEventListener("pagehide",L),window.removeEventListener("pageshow",B),h.Ff=!1);h.Gf?(g.port.close(),h.Gf=!1):h.If&&(g.Ti.terminate(),h.If=!1);Object.assign(h,{Na:!0,Ma:!1,Wb:!1});v=null},eq:function(){return h.Na},update:function(C){Object.assign(H,
C)},og:function(C){h.Ma||P.m({});n();h.Wb=!0;v=C;h.Na&&b()},stop:k};return P}(),zc={pf:function(){return Date.now()},Fp:function(){return performance.now()}},wb=function(){function a(Z){switch(B){case l.movePinch:var na=-Z.deltaY;0===L&&f("pinch",-1,.001*na,null)}Z.deltaY;Z.preventDefault()}function b(Z){if(-1!==L)switch(B){case l.swipe:if(1!==L)break;q();z(Z,C);var na=C[0]-P[0];k(na);Z=na/(20*J.offsetWidth/100);f("swipeMove",Math.min(Math.max(Z,-1),1),Z,null);break;case l.movePinch:if(2===L||3===
L){z(Z,C);na=C[0]-P[0];var fa=C[1]-P[1];2===L?(X+=Math.sqrt(na*na+fa*fa),10>X?(P[0]=C[0],P[1]=C[1]):(xa||(xa=!0,f("moveStart",null,null,null)),la[0]=na,la[1]=fa,M[0]=na-F[0],M[1]=fa-F[1],f("move",la,M,null),F[0]=la[0],F[1]=la[1])):3===L&&(Z=t(Z)/ma,f("pinch",Z,Z-Ea,null),Ea=Z)}}}function d(Z){if(-1!==L)switch(B){case l.swipe:if(1!==L)break;q();z(Z,C);Z=C[0]-P[0];var na=0>Z;(Z=20<100*Math.abs(Z)/J.offsetWidth)&&na?f("swipeLeft",r,null,null):Z&&!na&&f("swipeRight",r,null,null);var fa=function(){setTimeout(function(){m();
L=0;f("swipeEnd",null,null,null)},202)};Z?(Z=function(){var ka=(na?-1:1)*J.width,Ra=(na?1:-1)*ka/J.width;r.style.transitionDuration=(400).toString()+"ms";r.style.left=(aa[0]+ka).toString()+"px";r.style.top=aa[1].toString()+"px";r.style.transform="rotate( "+Ra.toString()+"rad )";fa()},ia?Z():N=Z):(r.style.transitionDuration=(200).toString()+"ms",r.style.opacity="0",r.style.left=aa[0].toString()+"px",r.style.top=aa[1].toString()+"px",r.style.transform="",fa());L=-1;break;case l.movePinch:if(2===L||
3===L)L===L.move?f("moveEnd",null,null,null):3===L&&f("pinchEnd",null,null,null),L=0}}function e(Z){Z.preventDefault();if(-1!==L)switch(B){case l.swipe:if(0!==L)break;q();L=1;da=setTimeout(function(){m();da=null;1===L&&(L=0,f("swipeEnd",null,null,null))},1E3);n();f("swipeStart",null,null,null);f("swipeGetCanvas",r,R,u);z(Z,P);break;case l.movePinch:0!==L?2!==L||xa||void 0===Z.changedTouches&&void 0===Z.touches||(ma=t(Z),20<ma&&(L=3,Ea=1,f("pinchStart",null,null,null))):3!==L&&(xa=!1,z(Z,P),F[0]=0,
F[1]=0,L=2,X=0)}}function k(Z){var na=0>Z;r.style.left=aa[0]+Z+"px";r.style.transformOrigin=na?O:w;r.style.transform="rotate( "+((na?1:-1)*Z/J.width).toString()+"rad )"}function n(){ia=!1;var Z=J.getBoundingClientRect();aa[0]=Z.left;aa[1]=Z.top;r.width=Math.round(J.width/4);r.height=Math.round(J.height/4);u.width=r.width;u.height=r.height;r.style.width=J.offsetWidth+"px";r.style.height=J.offsetHeight+"px";r.style.left=aa[0]+"px";r.style.top=aa[1]+"px";setTimeout(x,0)}function x(){R.drawImage(J,0,
0,r.width,r.height);Q.drawImage(r,0,0);ia=!0;document.body.appendChild(r);N&&(N(),N=!1)}function m(){r.style.transitionDuration="0ms";r.style.opacity="1";r.style.transform="";ia&&(document.body.removeChild(r),ia=!1)}function q(){da&&(window.clearTimeout(da),da=null)}function t(Z){G(Z,ja,0);G(Z,qa,1);return Math.sqrt(ja[0]*ja[0]+qa[0]*qa[0])}function z(Z,na){void 0!==Z.changedTouches||void 0!==Z.touches?G(Z,na,0):(na[0]=Z.pageX,na[1]=Z.pageY)}function G(Z,na,fa){Z.touches.length>fa?(na[0]=Z.touches[fa].pageX,
na[1]=Z.touches[fa].pageY):(na[0]=Z.changedTouches[fa].pageX,na[1]=Z.changedTouches[fa].pageY)}function y(){p.forEach(function(Z){J.removeEventListener(Z.type,Z.tb,!1)});return p.splice(0,p.length)}function H(Z){Z.forEach(function(na){v(na.type,na.tb)})}function v(Z,na){J.removeEventListener(Z,na,!1);r.removeEventListener(Z,na,!1);J.addEventListener(Z,na,!1);r.addEventListener(Z,na,!1);0===p.filter(function(fa){return fa.type===Z&&fa.tb===na}).length&&p.push({type:Z,tb:na})}function f(Z,na,fa,ka){h[Z].forEach(function(Ra){Ra.tb(na,
fa,ka)})}function g(Z){return Z[0]+"% "+(100-Z[1]).toString()+"%"}var A=!1,J=null,h={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],moveStart:[],moveEnd:[]},p=[],l={idle:0,swipe:1,movePinch:2},B=l.idle,L=0,P=[0,0],C=[0,0],F=[0,0],M=[0,0],r=document.createElement("canvas"),u=document.createElement("canvas"),R=r.getContext("2d"),Q=u.getContext("2d");r.style.position="fixed";r.style.zIndex="800";r.style.cursor="move";r.style.pointerEvents=
"none";r.className="swipeImage";r.setAttribute("draggable",!1);var ia=!1,aa=[0,0],N=null,da=null,w=g([50,100]),O=g([50,0]),E=null,X=0,la=[0,0],ma=0,xa=!1,Ea=1,ja=[0,0],qa=[0,0],Ia={init:function(Z){if(A)Ia.switch_canvas(Z.qa);else return J=Z.qa,v("mousedown",e),v("mouseup",d),v("mouseout",d),v("mousemove",b),v("mousemove",b),v("wheel",a),v("touchstart",e),v("touchend",d),v("touchmove",b),A=!0,Ia},switch_canvas:function(Z){if(!A)Ia.init({qa:Z});else if(J!==Z){var na=y();J=Z;H(na);for(var fa in h)for(Z=
h[fa],na=Z.length-1;0<=na;--na)Z[na].wn&&Z.splice(na,1)}},get_mode:function(){for(var Z in l)if(l[Z]===B)return Z;return!1},switch_mode:function(Z){A&&"undefined"!==typeof l[Z]&&(Z=l[Z],B!==Z&&(q(),B=Z,L=0))},add_listener:function(Z,na,fa){h[Z].push({tb:na,wn:"undefined"===typeof fa?!1:fa});return Ia},remove_listener:function(Z){h[Z].splice(0,h[Z].length);return Ia},animate_swipe:function(Z,na){E&&(clearInterval(E),E=null);n();var fa=J.width/(na/1E3)*("left"===Z?-1:1),ka=0,Ra,lb=Date.now();E=setInterval(function(){E&&
(Ra=Date.now(),ka+=(Ra-lb)/1E3*fa,k(ka),lb=Ra,Math.abs(ka)>.75*J.width&&E&&(clearInterval(E),E=null,m()))},16)}};return Ia}();window.CanvasListeners=wb;var T={VERSION:"3.9.1",dd:[],cd:[],Ge:!1,Fe:!1,He:!1,ready:!1,isBusy:!1},$a={idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:45,FOVforced:0,Ee:10,De:8E3},Qc={Jc:!0,Vd:"models3D",Ud:"materials",yo:"tweakers",neuralNetworkPath:"built/jeefitNNC_60_0.json",neuralNetworkVersion:"60_0",
ca:"",ua:"",$c:"",ya:0,gk:20,width:1024,height:1024,mi:!0,dn:[2,3.5],$i:300,ad:[1,6],scanOverlapFactors:[2,2,3],scanNScaleLevels:2,scanScale0Factor:.7,ra:[.2,.2,.3],nc:[[.8,.5],[.8,.5],[1,1]],wo:30,el:.9,on:[.2,.6],nn:1,xo:[.01,.035],Fn:[.003,.007],Ig:[0,.6],Bl:.2,ab:[.698111,1.047166,.122169],Fj:[-.1,0,0],be:[0,-62,8],jn:1.03,Ea:[0,-60,0],Zf:50,Ac:.4,kf:73,Je:[.02,1],ek:[4,1],Lk:[0,.5],Hn:.15,En:1,An:[.5,4],Mo:20,Ap:!1,Fc:145,zf:-18,xf:20,yf:3,Mc:[-110,0],ic:1,uj:.4,vj:3,le:[0,0,0],jc:[1.1,1],pd:0,
$e:.95,Ze:90,Ye:50,hd:30,Lb:.05,vf:!0,Rd:!0,Rf:"images/masks/target.jpg",Sf:!1,Qd:[1/255,175/255,236/255,0],Sd:-.001,Qf:3.14,Ne:0,Me:"images/masks/burka.png",Ke:Math.PI-Math.PI/4,Xe:Math.PI/4,ng:[.3,.2,.1],Zb:1,yi:[700,90],Lm:[.2,.04],No:"images/backgrounds/viewer3D.png",Zg:[0,0,0],Yg:[0,15,60],Be:.3,Vo:50,Ro:Xc?Za:!1,So:Xc?Za:!1,Uo:1E3,Xo:1E3,To:40,Qo:[0,0,-400],Bi:.1,Pm:.5,Ci:[.5,1.5],Td:30,Om:!0},I=Object.assign({},Qc);V.th=!0;V.uh=!0;V.sh=!1;V.Pa=!0;var bb={de:3.5,Ab:"images/debug/picsou.png",
Sc:45,Of:.785,Pf:.3925,Pd:5,Od:2,Nf:0,Mf:0,Oo:"images/backgrounds/bg1.jpg",Po:"images/backgrounds/bg1_light.jpg",Sj:1,Tj:2};I.fx=[4,50];I.Mc=[-110,0];I.uj=.25;I.vj=3;I.le=[0,-2,20];I.jc=[.95,1];V.Qc=2.1289;V.hg=1;bb.de=2.5858;bb.Of=.4388;bb.Pf=.118;bb.Ab="images/debug/hdri2.png";bb.Sc=180;bb.qg=.8065;bb.Pd=5.3887;bb.Od=.5351;bb.Nf=-.3019;bb.Mf=0;bb.Sj=3.5288;bb.Tj=6.2168;var Pc={element:null,Eh:null,Md:!1,qh:null,ha:null,Og:null,deviceId:-1,Pb:-1,vd:0,Ri:null,Ae:-1},Ba=Object.assign({},Pc),gb=null,
Yc=I.dn,Ec=window.devicePixelRatio?window.devicePixelRatio:1;var qc={Al:Math.max(Yc[0],Ec)/Ec,hf:Math.min(Ec,Yc[1])};var eb=null;T.onLoad=function(a){T.ready?a():T.dd.push(a)};T.onHalfLoad=function(a){T.load_model?a():T.cd.push(a)};T.onWebcamAsk=function(a){T.Ge=a};T.onContextLost=function(a){T.Fe=a};T.onWebcamGet=function(a){T.He=a};T.get_onHalfLoadCallstack=function(){return T.cd};T.set_size=function(a,b,d){d=d?qc.hf:1;I.width=a*d;I.height=b*d};T.get_videoDevices=function(a){cd(a)};T.set_videoDevice=
function(a){Ba.deviceId=a};T.set_videoSizes=function(a,b,d,e,k,n){$a.idealWidth=a;$a.idealHeight=b;$a.minWidth=d;$a.maxWidth=e;$a.minHeight=k;$a.maxHeight=n};T.set_loading=function(a,b,d){a&&(I.Sf=!0,I.Rf=a);"number"===typeof b&&(a=new Yb(b),I.Qd=[a.r,a.X,a.b,0]);"number"===typeof d&&(I.Sd=d)};T.set_settings=function(a,b,d){a&&Object.assign(I,a);b&&Object.assign($a,b);d&&Object.assign(bb,d)};T.get_size=function(){return{width:I.width,height:I.height}};T.get_cv=function(){return jb.ub()};T.set_NNCPath=
function(a){I.$c=a};T.set_materialsPath=function(a){I.Ud=a};T.set_modelsPath=function(a){I.Vd=a};T.destroy=function(){return eb?eb.v():Promise.resolve()};T.update_lightSettings=function(a){a=Object.assign({screenTextureURL:null,screenLuminosity:-1,lightDirFactor:-1,lightAmbFactor:-1,screenWidthAngle:-1},a);0<=a.lightDirFactor&&(bb.Pd=a.lightDirFactor);0<=a.lightAmbFactor&&(bb.Od=a.lightAmbFactor);0<=a.screenLuminosity&&(bb.de=a.screenLuminosity);0<=a.screenWidthAngle&&(bb.Sc=a.screenWidthAngle);a.screenTextureURL&&
(bb.Ab=a.screenTextureURL);T.ready&&(eb.Bj(),ua.Ia.ih(Ba.ha))};T.init2=function(a){var b=Object.assign({basePath:null,modelsPath:null,materialsPath:null,materialTextureBasePath:null,NNCPath:null,cv:null,isRequestCamera:!0,width:512,height:512,isMirror:!0,isApplyOverSampling:!1,scanOverlapFactors:null,scanNScaleLevels:null,scanScale0Factor:null},a);I.Jc=b.isRequestCamera;T.set_size(b.width,b.height,b.isApplyOverSampling);T.update_lightSettings(a);b.modelsPath&&(I.Vd=b.modelsPath);b.materialsPath&&
(I.Ud=b.materialsPath);b.materialTextureBasePath&&(V.Ei=b.materialTextureBasePath);b.NNCPath&&(I.$c=b.NNCPath);I.scanOverlapFactors=b.scanOverlapFactors||I.scanOverlapFactors;I.scanNScaleLevels=b.scanNScaleLevels||I.scanNScaleLevels;I.scanScale0Factor=b.scanScale0Factor||I.scanScale0Factor;I.mi=b.isMirror;return new Promise(function(d,e){T.onHalfLoad(d);T.init(b.basePath,function(){},e,b.cv)})};T.init=function(a,b,d,e){eb=dd();T.qb=d?function(k,n){d(k,n);T.qb=!1}:function(){};T.cp=eb;a&&(I.ca=a);
b&&T.dd.push(b);eb.Bj();a=eb.Vl();return jb.m({We:"jeefitCanvas",qa:e,width:a.width,height:a.height,debug:!1,bg:function(){T.Fe&&T.Fe()},premultipliedAlpha:!0})?I.Jc?gd():hd():(T.qb&&T.qb("GL_INCOMPATIBLE","Cannot init Context"),!1)};window.JEELIZVTO=T;var Mc=function(){function a(){Aa.ba();c.viewport(0,0,1,1);Y.set("s73");e.h(0);W.l(!1);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,n);b(0<n[0])}var b=null,d=!1,e=null,k=!1,n=null,x={m:function(m){if(k)return!1;e=m;Y.tc([{id:"s73",name:"_",g:"uniform sampler2D u41;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u41,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",
i:["u41"],precision:"lowp"}]);Y.j("s73",[{type:"1i",name:"u41",value:0}]);n=new Uint8Array(4);return k=!0},start:function(m,q){x.stop();b=q;d=window.setInterval(a,m)},stop:function(){d&&(window.clearInterval(a),d=!1)}};return x}(),Fc={};Yb.prototype={constructor:Yb,r:1,X:1,b:1,set:function(a){a instanceof Yb?this.L(a):"number"===typeof a?Sc(this,a):"string"===typeof a&&id(this,a);return this},Kn:function(){function a(b,d,e){0>e&&(e+=1);1<e&&--e;return e<1/6?b+6*(d-b)*e:.5>e?d:e<2/3?b+6*(d-b)*(2/3-
e):b}return function(b,d,e){b=Fc.Math.Bp(b,1);d=Fc.Math.Re(d,0,1);e=Fc.Math.Re(e,0,1);0===d?this.r=this.X=this.b=e:(d=.5>=e?e*(1+d):e+d-e*d,e=2*e-d,this.r=a(e,d,b+1/3),this.X=a(e,d,b),this.b=a(e,d,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.X,this.b)},L:function(a){this.r=a.r;this.X=a.X;this.b=a.b;return this},add:function(a){this.r+=a.r;this.X+=a.X;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.X*=a.X;this.b*=a.b;return this},Ca:function(a){this.r*=
a;this.X*=a;this.b*=a;return this},sb:function(a,b){void 0===b&&(b=0);this.r=a[b];this.X=a[b+1];this.b=a[b+2];return this}};var jd={};tc.prototype={constructor:tc,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get w(){return this.R},set w(a){this.R=a},set:function(a,b,d,e){this.C=a;this.D=b;this.F=d;this.R=e;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.R)},L:function(a){this.C=a.x;
this.D=a.y;this.F=a.z;this.R=a.w;return this},inverse:function(){this.C*=-1;this.D*=-1;this.F*=-1;this.normalize();return this},rd:function(a){return this.C*a.C+this.D*a.D+this.F*a.F+this.R*a.R},Lf:function(){return this.C*this.C+this.D*this.D+this.F*this.F+this.R*this.R},length:function(){return Math.sqrt(this.C*this.C+this.D*this.D+this.F*this.F+this.R*this.R)},normalize:function(){var a=this.length();0===a?(this.F=this.D=this.C=0,this.R=1):(a=1/a,this.C*=a,this.D*=a,this.F*=a,this.R*=a);return this},
multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),Tc(this,a,b)):Tc(this,this,a)},sb:function(a,b){void 0===b&&(b=0);this.C=a[b];this.D=a[b+1];this.F=a[b+2];this.R=a[b+3];return this}};Zb.prototype={constructor:Zb,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},ej:function(a){this.x=a;
return this},fj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},L:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.ed(a,b);this.x+=a.x;this.y+=a.y;return this},ed:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.gb(a,b);this.x-=a.x;this.y-=a.y;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},cf:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},Re:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},rd:function(a){return this.x*a.x+this.y*a.y},Lf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.cf(this.length())},
sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this}};Va.prototype={constructor:Va,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},ej:function(a){this.x=a;return this},fj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},L:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.ed(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},ed:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.gb(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},cf:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},Re:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},rd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Lf:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.cf(this.length())},sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}};$b.Vj="XYZ";$b.prototype={constructor:$b,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get order(){return this.Ra},set order(a){this.Ra=a},set:function(a,b,d,e){this.C=
a;this.D=b;this.F=d;this.Ra=e||this.Ra;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.Ra)},L:function(a){this.C=a.C;this.D=a.D;this.F=a.F;this.Ra=a.Ra;return this},sb:function(a){this.C=a[0];this.D=a[1];this.F=a[2];void 0!==a[3]&&(this.Ra=a[3]);return this}};Bc.prototype={constructor:Bc,set:function(a,b){this.min.L(a);this.max.L(b);return this},clone:function(){return(new this.constructor).L(this)},L:function(a){this.min.L(a.min);this.max.L(a.max);return this},
empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||new Va).gb(this.max,this.min)},getParameter:function(a,b){return(b||new Va).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};ac.prototype={constructor:ac,set:function(a,b,d,e,k,n,x,m,q,t,z,G,y,H,v,f){var g=this.elements;g[0]=a;g[4]=b;
g[8]=d;g[12]=e;g[1]=k;g[5]=n;g[9]=x;g[13]=m;g[2]=q;g[6]=t;g[10]=z;g[14]=G;g[3]=y;g[7]=H;g[11]=v;g[15]=f;return this},clone:function(){return(new ac).sb(this.elements)},L:function(a){this.elements.set(a.elements);return this},multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),Vc(this,a,b)):Vc(this,this,a)},Ca:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var b=this.elements,d=a.x,e=a.y;a=a.z;b[0]*=d;b[4]*=e;b[8]*=a;b[1]*=d;b[5]*=e;b[9]*=a;b[2]*=d;b[6]*=e;b[10]*=a;b[3]*=d;b[7]*=e;b[11]*=a;return this},sb:function(a){this.elements.set(a);return this}};Cc.prototype={constructor:Cc,
clone:function(){return(new this.constructor).L(this)},L:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Da.L(a.Da);this.color.L(a.color);this.$b=a.$b;for(var b=0,d=a.ze.length;b<d;b++)this.ze[b]=a.ze[b].clone();b=0;for(d=a.Wg.length;b<d;b++)this.Wg[b]=a.Wg[b].clone();return this}};var D=function(){function a(p,l,B){l=p.createShader(l);p.shaderSource(l,B);p.compileShader(l);return p.getShaderParameter(l,p.COMPILE_STATUS)?l:!1}function b(p,l){ea.la()&&(l.g=l.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));
l.uf=a(p,p.VERTEX_SHADER,l.u,l.name+" VERTEX");l.tf=a(p,p.FRAGMENT_SHADER,l.g,l.name+" FRAGMENT");var B=p.createProgram();p.attachShader(B,l.uf);p.attachShader(B,l.tf);p.linkProgram(B);return B}function d(p){p.u="#version 300 es\n"+p.u.replace(/varying/g,"out");p.g="#version 300 es\n"+p.g.replace(/varying/g,"in");p.u=p.u.replace(/texture2D\(/g,"texture(");p.g=p.g.replace(/texture2D\(/g,"texture(");p.da||(p.g=p.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),p.g=p.g.replace(/gl_FragColor/g,
"FragColor"));var l=0,B=[];p.u=p.u.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(L,P,C){var F="";C.split(",").forEach(function(M){M=M.trim();F+="layout(location = "+l+") in "+P+" "+M+";\n";B.push(M);++l});return F});p.$j=B}function e(p){return["float","sampler2D","int"].map(function(l){return"precision "+p+" "+l+";\n"}).join("")}function k(p,l){if(l.fi)return!1;var B=ea.la();V.Wp||B||p.enableVertexAttribArray(0);void 0===l.da&&(l.da=!1);l.da&&(l.bd=B?3:2);l.id=J++;void 0===l.bd&&
(l.bd=2);void 0===l.precision&&(l.precision="highp");l.da&&(l.g=(ea.la()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":"#extension GL_EXT_draw_buffers : require\n")+l.g);void 0===l.u&&(l.u="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var L=e(l.precision);
l.g=L+l.g;l.u=L+l.u;B&&3<=l.bd&&d(l);l.Fa&&l.Fa.forEach(function(P){l.u=l.u.replace(P.search,P.replace);l.g=l.g.replace(P.search,P.replace)});l.oa=b(p,l);l.A={};l.i.forEach(function(P){l.A[P]=p.getUniformLocation(l.oa,P)});l.attributes={};l.va=[];l.Vg=0;void 0===l.I&&(l.I=["a0"]);void 0===l.P&&(l.P=[2]);l.I.forEach(function(P,C){var F=B&&3<=l.bd?l.$j.indexOf(P):p.getAttribLocation(l.oa,P);l.attributes[P]=F;l.va.push(F);l.Vg+=4*l.P[C]});l.set=function(){g!==l.id&&(-1!==g&&A.K(),g=l.id,A=l,p.useProgram(l.oa),
l.va.forEach(function(P){0!==P&&p.enableVertexAttribArray(P)}))};l.K=function(){g=-1;l.va.forEach(function(P){0!==P&&p.disableVertexAttribArray(P)})};l.fi=!0}function n(p,l){k(p,l);l.set();g=-1;return l}function x(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"highp"}}function m(){h.j("s104",[{type:"1i",name:"u1",value:0}]);h.j("s105",[{type:"1i",name:"u153",value:0}]);h.j("s106",[{type:"1i",name:"u74",value:0}])}function q(){var p=
"u41 u143 u144 u145 u146 u42 u78".split(" ").concat(H,v);f.s107={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 v=s(a);vec3 w=mix(u143,u83,c);float x=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u81,1.,u85);vec2 j=u80/t;vec3 k=a0;float A=max(0.,-a0.z-u145)*u146;k.x+=A*sign(a0.x)*(1.-u85);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u149,u150,a0.z);}",
i:["u149","u150"].concat(p),I:["a0"],precision:"highp"};f.s108={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u147"].concat(G,p),I:["a0","a1"],P:[3,2],precision:"lowp"};f.s109={name:"_",g:"uniform vec3 u147;void main(){gl_FragColor=vec4(u147,0.);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u147"].concat(p),P:[3],precision:"lowp"};f.s110={name:"_",g:"uniform vec4 u13;varying vec3 vv0;varying float vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 h=s(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 k=u80/t;vec3 l=a0;float z=max(0.,-a0.z-u145)*u146;l.x+=z*sign(a0.x)*(1.-u85);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u13","u78"].concat(p),I:["a0","a2"],precision:"highp"};f.s111={name:"_",g:"uniform sampler2D u153;uniform vec4 u13;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u153,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3);gl_FragColor=vec4(a,m);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 f=u85*e;vec3 c=u85*q;vec2 v=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u79,0.,0.),u82,c);float w=mix(texture2D(u41,t).r,0.,u85);a.z+=w;mat3 h=u(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 k=u80/v;vec3 l=a0;float B=max(0.,-a0.z-u145)*u146;l.x+=B*sign(a0.x)*(1.-u85);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u13","u78","u153"].concat(p),I:["a3","a0","a2","a1"],P:[4,3,3,2],precision:"highp"};f.s112={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u111","u148"].concat(p),precision:"lowp"};f.s113={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u111","u148"].concat(y,p),I:["a0","a1"],P:[3,2],precision:"lowp"};p=["u136","u124","u137"];f.s114={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=1.;}",i:p,precision:"highp"};f.s115={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a2,0.);gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:p,I:["a0","a2"],precision:"highp"};f.s105={name:"_",g:"uniform sampler2D u153;uniform vec3 u154;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u154),c=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u137*vec4(a2,0.),a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u153","u154"].concat(p),I:["a0","a2","a1","a3"],precision:"highp"};f.s104={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u136*u124*u137*vec4(a0,1.)+f,vv0=a1;}",i:["u147"].concat(G,p),I:["a0","a1"],
Fa:[{search:"0.0005",replace:Fa.fa()?"0.0005":"0.0"}],precision:"lowp"};f.s116={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;void main(){gl_Position=u136*u124*u137*vec4(a0,1.);}",i:["u111"].concat(p),precision:"highp"};f.s106={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;void main(){gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a1;}",i:["u111"].concat(y,p),I:["a0","a1"],P:[3,2],precision:"highp"}}function t(){for(var p in f)k(c,f[p])}var z=!1,G=["u1","u73"],y=["u74","u75"],H="u76 u77 u78 u79 u80 u81".split(" "),v="u82 u83 u84 u85 u86 u87".split(" "),f={},g=-1,A=null,J=0,h={ma:function(p,l){f[p]=l;z&&k(c,f[p])},lq:function(p,l){f[p]=l;l.fi=!1;k(c,f[p])},Yb:function(){return z},m:function(){f.s0=
x();f.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"lowp"};f.s74={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(-1.,1.)*vv0+vec2(1.,0.));}",i:["u1"],precision:"lowp"};f.s75={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){gl_FragColor=vec4(mix(texture2D(u12,vv0).rgb,texture2D(u1,vv0).rgb,u13*f),1.);}",i:["u1","u12",
"u13"],precision:"highp"};f.s76={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u12,vv0),texture2D(u1,vv0),u13*f);}",i:["u1","u12","u13"],precision:"highp"};f.s12={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 b=texture2D(u88,vv0*u89),c=texture2D(u1,vv0*u89);float a=smoothstep(u90,0.,vv0.y);a+=smoothstep(1.-u90,1.,vv0.y),gl_FragColor=pow(mix(c,b,a*f),u91*f);}",
i:["u1","u89","u88","u90","u91"]};f.s77={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),f=exp2(c);vec3 g=clamp(b/f,0.,1.);return vec4(g,(c+128.)/256.);}void main(){vec2 a=vv0*u89;float c=floor(a.x),d=mod(c,2.);a.x=mod(a.x,1.),a.x=mix(a.x,1.-a.x,d);vec3 f=texture2D(u88,a).rgb,g=texture2D(u1,a).rgb;float b=smoothstep(u90,0.,vv0.y);b+=smoothstep(1.-u90,1.,vv0.y);vec3 j=mix(g,f,b*h);vec4 k=i(pow(j,u91*h));gl_FragColor=k;}",
i:["u1","u89","u88","u90","u91"],precision:"highp"};f.s78={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:"lowp"};f.s79={name:"_",g:"uniform sampler2D u1,u92;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u14"],precision:"lowp"};f.s80={name:"_",g:"uniform sampler2D u1,u92,u41;uniform vec2 u14,u93;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;float c=texture2D(u41,vec2(.5,.5)).a,d=u93.x+pow(c,2.)*(u93.y-u93.x);vec3 j=mix(b/5.,texture2D(u92,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u92","u14","u41","u93"],precision:"lowp"};f.s81={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u14).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u14).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u14).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u14).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u14;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u14"],precision:"lowp"};f.s82={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);gl_FragColor=b/5.;}",i:["u1","u14"],precision:"lowp"};f.RGBEtoRGB={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",
i:["u1"],precision:"highp"};f.s13={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.,0.,0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:"highp"};f.s83={name:"_",g:"uniform sampler2D u94,u95;uniform float u96,u97;varying vec2 vv0;void main(){vec3 a=texture2D(u95,vv0).rgb,b=texture2D(u94,vv0).rgb;gl_FragColor=vec4(b*u97+u96*a,1.);}",
i:["u94","u95","u96","u97"],precision:"highp"};f.s84={name:"_",g:"uniform sampler2D u98,u99;uniform float u91;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u99,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u98,g).rgb,u91*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u98","u99","u91"],precision:"lowp",Fa:[{search:"8888",replace:V.sm[ea.V()]}]};f.s85={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u14).a+.110236*texture2D(u1,vv0-2.*u14).a+.220472*texture2D(u1,vv0-u14).a+.275591*a.a+.220472*texture2D(u1,vv0+u14).a+.110236*texture2D(u1,vv0+2.*u14).a+.031496*texture2D(u1,vv0+3.*u14).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u14"],precision:"lowp"};f.s86={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",
i:["u1"],precision:"lowp"};f.s87={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u14)+.110236*texture2D(u1,vv0-2.*u14)+.220472*texture2D(u1,vv0-u14)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u14)+.110236*texture2D(u1,vv0+2.*u14)+.031496*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};f.s88={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u14)+texture2D(u1,vv0-2.*u14)+texture2D(u1,vv0-u14)+texture2D(u1,vv0)+texture2D(u1,vv0+u14)+texture2D(u1,vv0+2.*u14)+texture2D(u1,vv0+3.*u14);gl_FragColor=a/7.;}",
i:["u1","u14"],precision:"lowp"};f.s89={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",i:["u1"],precision:"highp"};f.s90={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u88,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",
i:["u1","u88"],precision:"highp"};f.s91={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u88,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",i:["u1","u88"],precision:"highp"};f.s92=
{name:"_",g:"uniform sampler2D u1,u100,u2,u101;uniform vec4 u102;uniform vec2 u103;uniform float u104,u105,u106,u107;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u100,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u101,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u103*.5+h).r,l=atan(a.x,a.y),m=-(mod(u104,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u105,b),c=.5+u107*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u102*k;gl_FragColor=mix(d,o,j*u106);}",
i:"u1 u2 u101 u100 u102 u104 u105 u106 u103 u107".split(" "),precision:"lowp"};var p="u108 u109 u110 u111 u98 u112 u3 u113 u100 u114 u115 u116 u117 u118 u14".split(" ");V.ea&&(f.s93={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u119,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u120,u115,u117,u114;varying vec2 vv0;const float j=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/j,1.-c/j);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/j,i=h/j,k=pow(2.,b)/u114;c=(1.-k)*c;return f+vec2(c,i)*d;}void main(){vec4 c=texture2D(u108,vv0);vec3 k=texture2D(u100,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(k,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u113;vec4 b=texture2D(u111,vv0),m=texture2D(u109,vv0);vec3 d=m.rgb;float f=m.a;vec4 n=texture2D(u110,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),g=floor(p/16.),E=(p-16.*g)/16.;g/=16.;float F=b.a;f=1.-(1.-f)*(1.-n.a);vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u112,G)),r=normalize(B),h=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u3));float I=acos(-s.z),J=smoothstep(u115-u117,u115+u117,I);h=mix(l(texture2D(u98,H)),u116,J);float a=o+(E-o)*pow(1.-dot(d,-r),g*16.);a=clamp(a,0.,1.);float t=1.-u120*texture2D(u119,vv0).r;h*=pow(t,2.),q*=t;vec3 i=C*mix(q,h,a),M=mix(k,i,z*(f*(1.-a)+a));float K=dot(i,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(i,L);}",
i:p.concat(["u119","u120"]),precision:"highp"});f.s94={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u115,u117,u118,u121,u122,u114,u123;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),m=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 r(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 a,float e){float b=pow(2.,e);vec2 f=vec2(1.,.5)/b,h=vec2(0.,1.-1./b);float i=atan(a.x,a.z),j=acos(-a.y),c=.5+.5*i/g,k=j/g,l=.5*b/u114;c=(1.-l)*c;return h+vec2(c,k)*f;}float n(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float o(vec2 a){float b=texture2D(u108,a).a;return step(.01,b);}vec3 p(vec2 a){return texture2D(u100,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u108,vv0);if(h.a<.01){gl_FragColor=vec4(p(vv0),0.);return;}float i=h.a;vec3 L=h.rgb,M=L+u113;vec4 c=texture2D(u111,vv0),s=texture2D(u109,vv0);vec3 a=s.rgb;float j=s.a;vec4 k=texture2D(u110,vv0);vec3 e=k.rgb;if(i>1.){gl_FragColor=vec4(mix(p(vv0),e,k.a),1.);return;}e=pow(e,u121*m);float t=c.r,N=c.g,O=c.a,u=floor(c.b*255.),l=floor(u/16.),P=(u-16.*l)/16.;l/=16.,j=1.-(1.-j)*(1.-k.a);vec2 v=vv0+vec2(-1.,0.)*u14,w=vv0+vec2(1.,0.)*u14,x=vv0+vec2(0.,1.)*u14,y=vv0+vec2(0.,-1.)*u14;vec3 Q=texture2D(u109,v).rgb,R=texture2D(u109,w).rgb,S=texture2D(u109,x).rgb,T=texture2D(u109,y).rgb;float U=n(a,Q)*o(v),V=n(a,R)*o(w),W=n(a,S)*o(x),X=n(a,T)*o(y),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=r(texture2D(u112,aa)),ca=(1.-O)*ba,z=normalize(M),A=G,B=reflect(-z,a);float da=floor(_*u3);vec2 ea=K(B,da);float fa=acos(-B.z),ga_=smoothstep(u115-u117,u115+u117,fa);vec3 ha=r(texture2D(u98,ea));A=mix(ha,u116,ga_*u118);float b=t+(P-t)*pow(1.+dot(a,z),l*15.);b=clamp(b,0.,1.);vec2 C=vv0;vec3 D=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(D.xy)),E=sqrt(u14.y/u14.x),ja=smoothstep(.3,.8,i);C+=ja*D.xy*vec2(1./E,E)*ia*.03;vec3 ka=e*mix(ca,A,b);float q=i*(j*(1.-b)+b);vec3 f=mix(p(C),pow(ka,m/u121),q);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*m,f,mix(1.,u122,q)*m);float ma=mix(la,q,u123);gl_FragColor=vec4(f,ma);}",
i:p.concat(["u123","u121","u122"]),precision:"highp"};V.ea&&(f.s95={name:"_",g:"uniform sampler2D u108,u109;uniform mat4 u124;uniform vec2 u125,u14,u126;uniform float u127,u128,u129,u130,u131,u132,u133,u134,u120;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u126;vec4 pos=texture2D(u108,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u127),s=sin(u127);vec3 no0=texture2D(u109,uvt).rgb;float zv=(u124*vec4(co0,1.)).z;vec3 co;vec2 scale=u125/abs(zv),uv,duv=u14*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u14*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u130,u131,1.),ao=dzFactor*clamp(u129*omegaMin*u132,0.,u120);gl_FragColor=vec4(ao,ao,ao,u128);}",
i:"u108 u109 u129 u128 u127 u14 u135 u130 u131 u132 u133 u134 u124 u125 u120".split(" "),Fa:[{search:"8888.8",replace:V.vk[ea.V()].toFixed(1)}],precision:"lowp"},f.s96={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);b+=texture2D(u1,a+u14*j)+texture2D(u1,a+u14*k)+texture2D(u1,a+u14*l)+texture2D(u1,a+u14*m),gl_FragColor=b/9.;}",
i:["u1","u14"],precision:"lowp"});f.s97={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;void main(){vec4 a=u136*u124*u137*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u136","u124","u137"],precision:"lowp"};f.s98={name:"_",g:"uniform sampler2D u138,u112,u99;uniform mat4 u136,u139;uniform vec2 u140;uniform float u141;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u140*(z-f),0.),B=vec3(u139*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u99,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u136*u,i=h.xyz/h.w;if(texture2D(u138,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u139*vec4(g,0.)),t+=texture2D(u112,y(s));}gl_FragColor=vec4(u141*t.rgb/n,1.);}",
i:"u138 u112 u99 u136 u139 u140 u141".split(" "),Fa:[{search:"8888.8",replace:V.qo[ea.V()].toFixed(1)},{search:"9999.9",replace:V.ro[ea.V()].toFixed(1)}],precision:"lowp"};f.s99={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u14)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};f.s100={name:"_",g:"uniform sampler2D u1,u142;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124;varying vec2 vv0;void main(){vec4 a=u136*u124*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u136","u124","u1"],I:["a0","a1"],precision:"lowp"};if(ea.aa()){p="u41 u143 u144 u145 u146 u42 u111 u147 u148 u13 u149 u150 u78".split(" ").concat(H,v);ea.ri()||(f.s101={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:"lowp",da:!0});f.s102={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],da:!0};f.s103NNGLcolor={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,s);vec2 f=u85*e;vec3 c=u85*r;vec2 w=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,t).rgb+vec3(u79,0.,0.),u82,c);float x=mix(texture2D(u41,u).r,0.,u85);a.z+=x;mat3 h=v(a);vec3 y=mix(u143,u83,c);float z=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u81,1.,u85);vec2 k=u80/w;vec3 l=a0;float C=max(0.,-a0.z-u145)*u146;l.x+=C*sign(a0.x)*(1.-u85);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u149,u150,a0.z),vv0=m,vv3=a0.y;}",
i:p,I:["a0","a2"],P:[3,3],da:!0};f.s103NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(G),I:["a0","a2","a1"],P:[3,3,2],da:!0};f.s103NNGLtextureNormalMap={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform sampler2D u1,u153;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(G,["u153"]),I:["a3","a0","a2","a1"],P:[4,3,3,2],da:!0};f.s103NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(G,y),I:["a0","a2","a1"],P:[3,3,2],da:!0};f.s103NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(G,["u153"],y),I:["a3","a0","a2","a1"],P:[4,3,3,2],da:!0};p="u136 u124 u137 u111 u147 u148 u13".split(" ");f.s103color={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",i:p,I:["a0","a2"],da:!0};f.s103={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(G),I:["a0","a2","a1"],da:!0};var l=["u153","u154"];f.s103NormalMap={name:"_",g:"uniform sampler2D u1,u153;uniform vec4 u111,u13;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(G,l),I:["a0","a2","a1","a3"],da:!0};f.s103ParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(G,y),I:["a0","a2","a1"],da:!0};f.s103NormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(G,l,y),I:["a0","a2","a1","a3"],da:!0}}else q();t();p=[{type:"1i",name:"u1",value:0}];h.j("s0",p);h.j("s1",p);h.j("s75",[{type:"1i",name:"u12",value:1}].concat(p));h.j("s76",[{type:"1i",name:"u12",
value:1}].concat(p));h.j("s12",[{type:"1i",name:"u88",value:1}].concat(p));h.j("s77",[{type:"1i",name:"u88",value:1}].concat(p));h.j("s78",p);h.j("s79",p);h.j("s80",[{type:"1i",name:"u92",value:1},{type:"1i",name:"u41",value:2}].concat(p));h.j("s81",p);h.j("s82",p);h.j("s13",p);h.j("s83",[{type:"1i",name:"u94",value:0},{type:"1i",name:"u95",value:1}]);h.j("s84",[{type:"1i",name:"u98",value:0},{type:"1i",name:"u99",value:1}]);h.j("s85",p);h.j("s86",p);h.j("s87",p);h.j("s88",p);h.j("s89",p);h.j("s90",
[{type:"1i",name:"u88",value:1}].concat(p));h.j("s91",[{type:"1i",name:"u88",value:1}].concat(p));V.ea&&(h.j("s95",[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},{type:"1f",name:"u130",value:V.ik},{type:"1f",name:"u131",value:V.jk},{type:"1f",name:"u132",value:V.wk},{type:"1f",name:"u133",value:V.mk},{type:"1f",name:"u134",value:V.nk},{type:"1f",name:"u129",value:1},{type:"1f",name:"u120",value:1}]),h.j("s96",p));l=[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},
{type:"1i",name:"u110",value:2},{type:"1i",name:"u98",value:3},{type:"1i",name:"u112",value:4},{type:"1i",name:"u111",value:6},{type:"1i",name:"u100",value:7},{type:"1f",name:"u118",value:0},{type:"1f",name:"u115",value:0},{type:"1f",name:"u117",value:0}];V.ea&&h.j("s93",l.concat([{type:"1f",name:"u120",value:V.lk[ea.V()]},{type:"1i",name:"u119",value:5}]));h.j("s94",l.concat([{type:"1f",name:"u121",value:V.Qc},{type:"1f",name:"u122",value:V.hg},{type:"1f",name:"u123",value:0}]));h.j("s98",[{type:"1i",
name:"u138",value:0},{type:"1i",name:"u112",value:1},{type:"1i",name:"u99",value:2},{type:"1f",name:"u141",value:V.po}]);h.j("s99",p);h.j("s100",p);h.j("s92",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u101",value:2},{type:"1i",name:"u100",value:3},{type:"1f",name:"u106",value:1},{type:"2f",name:"u103",value:[0,0]}].concat(p));ea.aa()?(h.j("s103",p),h.j("s103NormalMap",[{type:"1i",name:"u153",value:1}].concat(p)),h.j("s103ParamsMap",[{type:"1i",name:"u74",value:1}].concat(p)),h.j("s103NormalParamsMap",
[{type:"1i",name:"u153",value:1},{type:"1i",name:"u74",value:2}].concat(p))):m();z=!0},ao:function(){q();t();m()},Cd:function(){return A.id},Ed:function(){return H},Fd:function(){return v},set:function(p){vb.sj(h);f[p].set()},Bb:function(p){return n(p,x())},ge:function(p){return n(p,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"})},eo:function(p){return n(p,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",
i:[],precision:"highp",da:!0})},K:function(){-1!==g&&A.K()},je:function(){var p=0;A.va.forEach(function(l,B){B=A.P[B];c.vertexAttribPointer(l,B,c.FLOAT,!1,A.Vg,p);p+=4*B})},ec:function(){h.fc(c)},fc:function(p){p.vertexAttribPointer(A.va[0],2,p.FLOAT,!1,8,0)},qq:function(){c.vertexAttribPointer(A.attributes.a0,3,c.FLOAT,!1,12,0)},Qa:function(){c.vertexAttribPointer(A.attributes.a0,3,c.FLOAT,!1,32,0)},bb:function(){c.vertexAttribPointer(A.attributes.a0,3,c.FLOAT,!1,24,0)},kj:function(){c.vertexAttribPointer(A.attributes.a2,
3,c.FLOAT,!1,32,12)},lj:function(){c.vertexAttribPointer(A.attributes.a2,3,c.FLOAT,!1,24,12)},Tc:function(){c.vertexAttribPointer(A.attributes.a1,2,c.FLOAT,!1,32,24)},rq:function(){c.vertexAttribPointer(A.attributes.a0,3,c.FLOAT,!1,20,0);c.vertexAttribPointer(A.attributes.a1,2,c.FLOAT,!1,20,12)},Rn:function(){c.vertexAttribPointer(A.attributes.a0,3,c.FLOAT,!1,32,0);c.vertexAttribPointer(A.attributes.a2,3,c.FLOAT,!1,32,12);c.vertexAttribPointer(A.attributes.a1,2,c.FLOAT,!1,32,24)},Sn:function(){c.vertexAttribPointer(A.attributes.a0,
3,c.FLOAT,!1,32,0);c.vertexAttribPointer(A.attributes.a2,3,c.FLOAT,!1,32,12)},Tn:function(){c.vertexAttribPointer(A.attributes.a0,3,c.FLOAT,!1,24,0);c.vertexAttribPointer(A.attributes.a2,3,c.FLOAT,!1,24,12)},ee:function(){c.vertexAttribPointer(A.attributes.a3,4,c.FLOAT,!1,16,0)},he:function(p,l){c.uniform1i(A.A[p],l)},G:function(p,l){c.uniform1f(A.A[p],l)},N:function(p,l,B){c.uniform2f(A.A[p],l,B)},ie:function(p,l){c.uniform2fv(A.A[p],l)},yg:function(p,l,B,L){c.uniform3f(A.A[p],l,B,L)},zg:function(p,
l){c.uniform3fv(A.A[p],l)},xa:function(p,l){c.uniform4fv(A.A[p],l)},jo:function(p,l){c.uniformMatrix2fv(A.A[p],!1,l)},ko:function(p,l){c.uniformMatrix3fv(A.A[p],!1,l)},Uc:function(p,l){c.uniformMatrix4fv(A.A[p],!1,l)},j:function(p,l){h.set(p);l.forEach(function(B){switch(B.type){case "4f":c.uniform4fv(A.A[B.name],B.value);break;case "3f":c.uniform3fv(A.A[B.name],B.value);break;case "2f":c.uniform2fv(A.A[B.name],B.value);break;case "1f":c.uniform1f(A.A[B.name],B.value);break;case "1i":c.uniform1i(A.A[B.name],
B.value);break;case "mat2":c.uniformMatrix2fv(A.A[B.name],!1,B.value);break;case "mat4":c.uniformMatrix4fv(A.A[B.name],!1,B.value)}})},H:function(){for(var p in f){var l=f[p];c.detachShader(l.oa,l.uf);c.detachShader(l.oa,l.tf);c.deleteShader(l.uf);c.deleteShader(l.tf);c.deleteProgram(l.oa)}},v:function(){c.disableVertexAttribArray(0);h.K();h.H();J=0;z=!1;A=null;g=-1}};return h}(),Wa=function(){var a={},b=[],d=!1,e=0,k=0,n=-1,x=-1,m=-1,q=1,t=null,z=!1,G=null,y=!1,H=!1,v=!1,f=!1,g=!1,A=!1,J=!1,h=!1,
p=null,l=null,B=-1,L=-1,P=null,C=-1,F,M=null,r=null,u=null,R=null,Q=null,ia=null,aa=null,N=[{type:"1f",name:"u85",value:0},{type:"1f",name:"u149",value:0},{type:"1f",name:"u150",value:0},{type:"1f",name:"u80",value:1},{type:"1f",name:"u77",value:0},{type:"1f",name:"u87",value:1}],da={m:function(w,O){a.Bg=w;ea.Rg();Gc.gf();Sb.gf(w.Be);n=w.kf;x=w.Wo;m=w.Zf;q=w.Ae;var E=[{type:"1f",name:"u80",value:n},{type:"1f",name:"u77",value:m},{type:"1f",name:"u81",value:w.In},{type:"mat4",name:"u76",value:w.mn},
{type:"2f",name:"u42",value:w.Uj}];w.Pg=E;var X=[{type:"3f",name:"u82",value:[0,0,0]},{type:"3f",name:"u83",value:w.Zg},{type:"3f",name:"u84",value:w.Yg},{type:"1f",name:"u85",value:0},{type:"1f",name:"u86",value:w.Be},{type:"1f",name:"u87",value:1}];w.Lj=X;da.om(w,O);d||void 0!==w.Ea||(w.Ea=[0,0,120]);h=J=I.vf;if(!d&&J){O=1*ea.wb();var la=1*ea.vb(),ma={isLinear:!0,isPot:!1,width:O,height:la};p=ba.instance(ma);l=ba.instance(ma);B=1/O;L=1/la}E=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",
value:w.Ea},{type:"1f",name:"u145",value:w.hd},{type:"1f",name:"u146",value:w.Lb}].concat(E,X);t=w.Mc;X=[{type:"1f",name:"u149",value:t[0]},{type:"1f",name:"u150",value:t[1]}];ea.aa()?(O=[{type:"1i",name:"u1",value:0}],la=[{type:"1i",name:"u153",value:2}],D.j("s103NNGLcolor",E.concat(X)),D.j("s103NNGLtexture",[].concat(O,E,X)),D.j("s103NNGLtextureNormalMap",[].concat(O,la,E,X)),D.j("s103NNGLtextureParamsMap",[{type:"1i",name:"u74",value:2}].concat(O,E,X)),D.j("s103NNGLtextureNormalParamsMap",[{type:"1i",
name:"u74",value:3}].concat(O,la,E,X))):(D.j("s107",E.concat(X)),D.j("s108",[{type:"1i",name:"u1",value:0}].concat(E)),D.j("s109",E),D.j("s110",E),D.j("s111",E.concat([{type:"1i",name:"u153",value:0}])),D.j("s112",E),D.j("s113",E.concat([{type:"1i",name:"u74",value:0}])));D.j("s80",[{type:"2f",name:"u93",value:w.Ig}]);D.j(V.ea?"s93":"s94",[{type:"1f",name:"u115",value:w.Ke},{type:"3f",name:"u116",value:w.ng},{type:"1f",name:"u117",value:w.Xe},{type:"1f",name:"u118",value:1},{type:"3f",name:"u113",
value:w.Yj}]);if(F=w.Rd)P=w.Nm,C=w.Sd,D.j("s92",[{type:"4f",name:"u102",value:w.Qd},{type:"1f",name:"u105",value:w.Qf},{type:"2f",name:"u103",value:w.Mm},{type:"1f",name:"u107",value:Math.sign(C)}]);b.forEach(function(xa){xa.gj(w)});d=!0},cc:function(w){H&&ua.ia.cc(w);f&&ua.sa.cc(w)},om:function(w,O){void 0!==ua.ia&&w.ic&&ea.aa()&&(ua.ia.m(w),y=!0,O.push(function(E){ua.ia.cc(E);H=!v}));void 0!==ua.sa&&w.pd&&(ua.sa.m(w),O.push(function(E){ua.sa.cc(E);f=!0}));void 0!==ua.pc&&w.Ne&&(ua.pc.m(w),A=g=!0);
void 0!==ua.pb&&(ua.pb.m(w),G=ua.pb.qm({width:w.Fc,height:2*w.Fc,depth:1.5*w.Fc,wl:-w.zf,Ua:w.xf,al:w.yf}),z=!0)},ho:function(w,O,E,X){w&&(aa=w,y&&ua.ia.dc(w),f&&ua.sa.dc(w),g&&ua.pc.dc(w),b.forEach(function(la){la.dc(w)}));E&&(R=E);X&&(Q=X)},Cb:function(w){ea.aa()?(D.j("s103NNGLcolor",w),D.j("s103NNGLtexture",w),D.j("s103NNGLtextureNormalMap",w),D.j("s103NNGLtextureParamsMap",w),D.j("s103NNGLtextureNormalParamsMap",w)):(D.j("s107",w),D.j("s108",w),D.j("s109",w),D.j("s110",w),D.j("s111",w),D.j("s112",
w),D.j("s113",w))},eb:function(w,O,E){var X=[w[0]+O[0],w[1]+O[1],w[2]+O[2]];X=[X[0]+E[0],X[1]+E[1],X[2]+E[2]];a.be=X;a.Vm=O;a.Ko=E;da.Cb([{type:"3f",name:"u143",value:X}]);ea.aa()&&(y&&ua.ia.eb(w,O,E),f&&ua.sa.eb(X));z&&ua.pb.eb(w)},fb:function(w,O,E){var X=w*O*E;a.Wm=O;a.Lo=E;a.im=w;da.Cb([{type:"1f",name:"u144",value:X}]);ea.aa()&&(y&&ua.ia.fb(w*O,E),f&&ua.sa.fb(X));z&&ua.pb.fb(w)},aj:function(){da.eb(a.be,a.Vm,a.Ko);da.fb(a.im,a.Wm,a.Lo);da.qj(a.rx);da.m(a.Bg);da.mj(a.Ek,a.Lb)},qj:function(w){a.rx=
w;da.Cb([{type:"1f",name:"u79",value:w}]);ea.aa()&&(y&&ua.ia.wg(w),f&&ua.sa.wg(w))},mj:function(w,O){a.Ek=w;a.Lb=O;da.Cb([{type:"1f",name:"u145",value:w},{type:"1f",name:"u146",value:O}])},Zn:function(w){t=w;0===e&&da.Cb([{type:"1f",name:"u149",value:t[0]},{type:"1f",name:"u150",value:t[1]}])},cb:function(w){function O(){z&&ua.pb.toggle(!1);F&&D.j("s92",[{type:"1f",name:"u106",value:0}])}0>=w?(k=0,0!==e&&(e=0,Sb.Cn(),z&&ua.pb.toggle(!0),F&&D.j("s92",[{type:"1f",name:"u106",value:1}]))):1<=w?(k=1,
1!==e&&(e=1,Sb.yj(!0)),O()):(k=w,2!==e&&(Sb.yj(!1),e=2,O()));D.j("s94",[{type:"1f",name:"u118",value:1-w}]);N[0].value=k;N[1].value=t[0]*(1-w)+-300*w;N[2].value=t[1]*(1-w)+-300*w;N[3].value=n*(1-w)+w*x;N[4].value=m*(1-w);N[5].value=1-w+w*q;H&&ua.ia.xg(k,N);f&&ua.sa.xg(k,N);da.Cb(N)},tl:function(w){aa.h(1);w.forEach(function(O){O.ol()});z&&G.U()},Gm:function(){return 1===e},Le:function(w){aa.Ka(w)},ck:function(w){b.push(w)},Gg:function(w){v=!w;H=w&&y},Fg:function(w){A=w&&g},tg:function(w){f&&ea.aa()&&
ua.sa.lo(w)},Db:function(w){ea.aa()&&(y&&ua.ia.Db(w),f&&ua.sa.Db(w))},ql:function(w,O){if(!h)return!1;p.M();w.h(0);D.set("s85");D.N("u14",0,L);W.l(!1,!1);l.o();p.h(0);D.N("u14",B,0);W.l(!1,!1);D.set("s86");O.M();l.h(0);W.l(!1,!1);return!0},xj:function(w){h=w&&J},resize:function(w,O,E){J&&(w*=E,O*=E,p.resize(w,O),l.resize(w,O),B=1/w,L=1/O)},rg:function(w,O){var E=w.O(),X=w.Y(),la={width:E,height:X,isPot:!1};y&&(u&&u.remove(),u=ba.instance(la));M&&M.remove();M=Aa.instance({width:E,height:X});g||f?(ua.pc.sg(E,
X),r&&r.remove(),r=ba.instance(la)):r=w;y&&ua.ia.sg(E,X);O&&(ia&&ia.remove(),ia=ba.instance(la))},ml:function(w){var O=null;switch(e){case 0:O=w;break;case 2:M.bind(!1,!0);ia.o();D.set("s75");D.G("u13",k);w.h(1);Q.h(0);W.l(!0,!0);O=ia;break;case 1:O=Q}if(!H||1===e||!ea.aa())return O;O.Ka(0);A&&ua.pc.U(O,r);M.bind(!1,!A);f&&(A?O.h(0):(r.o(),D.set("s1"),W.l(!0,!0)),ua.sa.U());r.h(0);R.Ka(2);ua.ia.U();u.o();D.set("s1");A||f?r.h(0):O.h(0);W.l(!0,!V.ea);ua.ia.add();return u},dk:function(w,O){if(!H)return w;
R.Ka(2);ua.ia.U();Aa.$();D.set("s74");O.M();ua.ia.cm().h(0);W.l(!0,!0);D.set("s1");c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);w.h(0);W.l(!1,!1);c.disable(c.BLEND);return O},rl:function(w,O){if(!F)return!1;D.set("s92");D.G("u104",w*C);P.h(1);Wa.Le(2);r?r.h(3):O.h(3);return!0},v:function(){d=!1;k=e=0;m=x=n=-1;q=1;t=null;z=!1;G=null;A=g=f=v=H=y=!1;ua.ia.v();ua.Ia.v()}};return da}(),wa=function(){function a(){m.forEach(function(E){E.ul(u)})}function b(){m.forEach(function(E){E.td(u)})}
function d(){m.forEach(function(E){E.sl(u)})}function e(){m.forEach(function(E){E.ud(u)})}function k(){u?Wa.tl(m):m.forEach(function(E){E.pl()})}function n(){F&&clearTimeout(F);F=setTimeout(function(){l=!1;F=null},16)}function x(E){E()}var m=[],q=[],t={ga_:!1,position:!1,yb:!1},z=[],G=[],y=null,H=0,v=null,f=null,g=null,A=null,J=!1,h=!1,p=!1,l=!1,B=!1,L=!1,P=null,C=null,F=null,M=null,r=!1,u=!1,R=!1,Q=!1,ia=!0,aa=!1,N=!1,da=null,w=null,O={m:function(){c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.clearDepth(1);
V.Zk?(c.enable(c.CULL_FACE),c.frontFace("CCW"===V.$k?c.CCW:c.CW),c.cullFace(c.BACK)):c.disable(c.CULL_FACE);O.rh();var E={isPot:!1,isLinear:!1,width:ea.wb(),height:ea.vb(),J:4,isFloat:!1};v=ba.instance(E);E=Object.assign({},E,{isLinear:!0,width:ea.O(),height:ea.Y()});f=ba.instance(E);g=ba.instance(E);V.Pa&&(E=Object.assign({},E,{isLinear:!1}),A=ba.instance(E));L=Fa.fa();V.Pa||(y=hc.instance({Kb:V.Kb,vc:V.vc,wc:V.wc,uc:V.uc}));J=!0},rh:function(){ea.aa()?t=vc.instance({}):(t.ga_=Jb.instance({hc:V.Pa?
!1:"s104",isFloat:!1,Ub:!0,clearColor:[0,0,0,0],J:4}),t.position=Jb.instance({hc:V.Pa?!1:"s114",isFloat:!0,Ub:!0,clearColor:[0,0,0,0],J:4}),t.yb=Jb.instance({hc:!1,isFloat:!0,Ub:!0,clearColor:[0,0,0,0],J:4}),t.Nc=Jb.instance({hc:!1,isFloat:!1,Ub:!0,clearColor:[0,0,0,0],J:4}))},Rl:function(){return y},pa:function(E){y=E},Iq:function(){},Db:function(E){Wa.Db(E)},gj:function(E){Wa.m(E,z);ea.aa()||(t.ga_.rj(!1),t.position.rj("s107"));u=Q=!0},nq:function(){Wa.aj()},ep:function(E){Wa.ck(E)},Nn:function(E,
X,la){Wa.eb(E,X,la)},On:function(E,X,la){Wa.fb(E,X,la)},Ln:function(E,X){Wa.mj(E,X)},Mn:function(E){Wa.Zn(E)},Pn:function(E){Wa.qj(E)},cb:function(E){Wa.cb(E)},hj:function(E,X,la,ma){Wa.ho(E,X,la,ma);X&&O.rg(X,ma?!0:!1);R=!0},Gg:function(E){Wa.Gg(E)},tg:function(E){Wa.tg(E)},Fg:function(E){Wa.Fg(E)},xj:function(E){Wa.xj(E)},fp:function(E){r&&(N=!0,da&&da.remove(),da=ba.instance({width:M.O(),height:M.Y(),isPot:!1}),w=E)},rg:function(E,X){M="string"===typeof E?ba.instance({url:E,isFloat:!1}):E;u&&Wa.rg(M,
X);r=!0},bk:function(E){m.push(E);0!==z.length&&(z.forEach(function(X){X(E)}),z.splice(0,z.length))},xn:function(E){E=m.indexOf(E);-1!==E&&m.splice(E,1)},gp:function(E){q.push(E)},kq:function(E){E=q.indexOf(E);-1!==E&&q.splice(E,1)},oe:function(E){u&&(h=E)},animate:function(E){!V.Pa||u&&R?h&&(l||H>V.Xm&&B?(P&&clearTimeout(P),++H,window.cancelAnimationFrame(O.animate),P=setTimeout(function(){window.requestAnimationFrame(O.animate)},16)):(O.Wi(E),++H,u||h&&window.requestAnimationFrame(O.animate))):
setTimeout(O.animate,100)},ip:function(E){G.push(E)},Wi:function(E){if((!V.Pa||u&&R)&&J){G.forEach(x);ea.aa()?t.set()||ea.la()?(u||Ac.zn(),k(),t.K(),L&&c.depthMask(!1)):(ea.zo(),O.rh(),Jb.fd(),D.ao(),V.Pa&&Wa.aj(),c.flush(),window.requestAnimationFrame(O.animate)):(u&&Wa.Le(1),t.ga_.set(!0,!0,!0),b(),t.ga_.K(),L&&c.depthMask(!1),t.Nc.set(!1,!L,!1),d(),t.Nc.K(),t.position.set(!0,!L,!1),sb.U(),a(),t.position.K(),t.yb.set(!1,!L,!1),e(),t.yb.K());c.disable(c.DEPTH_TEST);L||c.depthMask(!1);V.ea&&Bb.U();
var X=O.Nh();if(null!==X){X.h(7);D.set(V.ea?"s93":"s94");D.N("u14",1/ea.wb(),1/ea.vb());Jb.Fk();v.M();aa?(c.enable(c.BLEND),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),D.G("u123",1)):c.disable(c.BLEND);u||sb.ff();t.position.h(0);t.yb.h(1);t.ga_.h(2);y.jd(3);t.Nc.h(6);y.kd(4);y.vh();V.ea&&Bb.h(5);W.l(!0,!0);aa&&D.G("u123",0);Aa.$();if(aa){c.disable(c.BLEND);var la=Wa.dk(v,f);D.set("s82");g.M();la.h(0);W.l(!1,!1);f.o();g.h(0);W.l(!1,!1);f.h(0)}else Wa.ql(v,
f)||(D.set("s1"),f.M(),v.h(0),W.l(!1,!1)),ia?(D.set("s81"),g.M(),f.h(0),W.l(!1,!1),f.o(),g.h(0),Q&&u?(D.set("s80"),A.h(1),Wa.Le(2),W.l(!1,!1),D.set("s1"),A.M(),f.h(0),W.l(!1,!1)):(D.set("s79"),W.l(!1,!1),f.h(0))):f.h(0);Aa.ba();c.viewport(0,0,ea.O(),ea.Y());!aa&&u&&Wa.rl(E,X)||D.set("s1");W.l(!1,!1);c.enable(c.DEPTH_TEST);c.depthMask(!0);c.flush()}}},Nh:function(){if(!r||aa)return ba.Zh();if(!u)return M;if(N&&!Wa.Gm()){D.set(w);Aa.$();da.Vc();da.o();M.h(0);var E=da;W.l(!0,!0)}else E=M;return Wa.ml(E)},
Eq:function(){V.dl||h||(h=!0,O.animate(Date.now()),p||wc.uo(),p||Sb.ib(!1),C&&clearTimeout(C),V.ea&&Bb.fe(),C=setTimeout(O.ta,V.Bk),p||ea.km(),p=!0)},Fq:function(){h&&(B=h=!1,cancelAnimationFrame(O.animate))},ta:function(){B||!p||l||V.th||(B=l=!0,C&&clearTimeout(C),F&&clearTimeout(F),sb.mf().Yi(),C=setTimeout(function(){ea.Tg(V.cn);V.ea&&Bb.Mj();H=0;n()},24))},wake:function(){B&&p&&!l&&(l=!0,B=!1,H=0,sb.mf().Yi(),C&&clearTimeout(C),F&&clearTimeout(F),C=setTimeout(function(){ea.Tg(1);V.ea&&Bb.fe();
n()},16))},Sp:function(){},yp:function(){},me:function(E){Q=E},Hq:function(E){ia=E},zj:function(E){aa=E},Mq:function(){D.j("s94",[{type:"1f",name:"u121",value:V.Qc},{type:"1f",name:"u122",value:V.hg}])},resize:function(E,X,la){v.resize(E*la,X*la);f.resize(E,X);g.resize(E,X);V.Pa&&A.resize(E,X);Wa.resize(E,X,la);E=[{type:"2f",name:"u14",value:[1/E,1/X]}];D.j("s81",E);D.j("s79",E);D.j("s82",E)},H:function(){P&&clearTimeout(P);C&&clearTimeout(C);F&&clearTimeout(F);m.concat(q).forEach(function(E){E.H()});
m.splice(0,m.length);q.splice(0,q.length);t.ga_.remove();t.yb.remove();t.Nc.remove();t.position.remove();v.remove();f.remove();g.remove();A&&A.remove();l=!0},v:function(){O.H();L=B=l=p=h=u=R=l=!1}};return O}(),ua={},ea=function(){function a(){Jb.resize(d*q,e*q);v.aa()&&vc.resize(d*q,e*q);wa.resize(d,e,q);V.ea&&Bb.resize(d*q,e*q,q);v.Rg()}var b=null,d=0,e=0,k=-1,n=!1,x={qe:!1,Jg:!1,Jj:!1,Cg:!1,drawBuffers:!1,Am:!1,ni:!1,Cm:!1,Hf:!1,Za:!1},m=Object.assign({},x),q=1,t=!1,z=!1,G=!1,y=!1,H=!1,v={m:function(f){void 0!==
f.onload&&f.onload&&(z=f.onload);void 0===f.expand&&(f.expand=!1);void 0===f.Kd&&(f.Kd=!1);void 0===f.qa&&(f.qa=!1);void 0===f.Qb&&(f.Qb=!1);void 0===f.alpha&&(f.alpha=!1);void 0===f.preserveDrawingBuffer&&(f.preserveDrawingBuffer=!1);f.Kd&&(n=!0);b=f.qa?f.qa:document.getElementById(f.Tk);f.expand&&v.expand();try{window.ap=f.Qb?f.Qb.Dl():b.getContext("webgl",{antialias:!1,alpha:f.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:f.preserveDrawingBuffer});y=f.Qb?f.Qb.la():!1;G=
!y;8>c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)&&v.qd("too few texture image units");if(!Fa.m())return v.qd("invalid config");V.Ho&&(m.Jg=c.getExtension("EXT_texture_filter_anisotropic"),m.Jg&&(m.ni=!0));V.Io&&(m.qe=c.getExtension("WEBGL_compressed_texture_s3tc"),m.qe&&void 0!==m.qe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&m.qe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&(m.Am=!0));G&&(m.Jj=c.getExtension("OES_element_index_uint")||c.getExtension("MOZ_OES_element_index_uint")||c.getExtension("WEBKIT_OES_element_index_uint"),
m.Jj&&(m.Cm=!0));!y&&V.Jo&&(m.Cg=c.getExtension("EXT_sRGB"),m.Cg&&(m.Hf=!0));G?(m.drawBuffers=c.getExtension("WEBGL_draw_buffers"),m.drawBuffers&&!V.sh&&(m.Za=!0)):m.Za=4<=c.getParameter(c.MAX_DRAW_BUFFERS);if(m.Za){var g=v.fl();m.Za=m.Za&&g}}catch(A){return v.qd(A)}if(null===c||!c)return v.qd("NO_GL");f.expand&&window.addEventListener("resize",v.expand,!1);b.addEventListener("contextmenu",function(A){A.preventDefault();return!1},!1);d=b.width;e=b.height;v.Df();return!0},Df:function(){k=n?3:2;Fa.fa()||
(k=Math.min(k,1));Fa.Pk()||(k=Math.min(k,0));Gc.m();Jb.m();for(var f in ua)ua[f].Rc();D.m();sb.m();Sb.m();wa.m();wc.m();V.ea&&Bb.m();"undefined"!==typeof FPSCounter&&FPSCounter.m();v.Rg();v.hl();t=!0;z&&z();return!0},hl:function(){if(m.Za){var f=vc.instance({width:256,height:1});f.bind();c.viewport(0,0,256,1);D.set("s102");D.xa("color",[1,0,0,1]);W.l(!0,!0);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT||c.DEPTH_BUFFER_BIT);Aa.ba();D.set("s1");f.yb.h(0);W.l(!1,!1);f=new Uint8Array(1024);c.readPixels(0,
0,256,1,c.RGBA,c.UNSIGNED_BYTE,f);H=1>=f[1020]}},fl:function(){var f=vc.instance({width:1,height:1});if(!f.set())return f.remove(),!1;D.eo(c);W.Ob(c);c.bindFramebuffer(c.FRAMEBUFFER,null);D.Bb(c);f.ga_.Ka(0);W.Ob(c);var g=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,g);f.remove();return 3<Math.abs(g[0]-127)?!1:!0},la:function(){return y},O:function(){return d},Y:function(){return e},wb:function(){return q*v.O()},vb:function(){return q*v.Y()},El:function(){return d/e},V:function(){return k},
Zp:function(){return 3===k},ri:function(){return H},aa:function(){return m.Za},zo:function(){m.Za=!1},bq:function(){return!1},Rk:function(){return 0<v.V()},op:function(){return v.aa()&&0<v.V()},lf:function(f){var g=c,A="";y||(g=m.drawBuffers,A="_WEBGL");return[g["COLOR_ATTACHMENT0"+A],g["COLOR_ATTACHMENT1"+A],g["COLOR_ATTACHMENT2"+A],g["COLOR_ATTACHMENT3"+A]].splice(0,f)},Bd:function(f){return v.lf(4)[f]},fm:function(){return y?c.SRGB?c.SRGB:c.RGBA:m.Hf?m.Cg.SRGB_ALPHA_EXT:c.RGBA},Dm:function(){return m.ni},
Jl:function(){return m.Jg},Qm:function(f){v.la()?c.drawBuffers(v.lf(f)):m.drawBuffers.drawBuffersWEBGL(v.lf(f))},expand:function(){wa.wake();v.resize(window.innerWidth,window.innerHeight);wa.ta()},resize:function(f,g){!b||f===d&&g===e||(d=f,e=g,b.width=d,b.height=e,t&&(sb.resize(),a()))},Rg:function(){var f=[{type:"2f",name:"u14",value:[1/ea.wb(),1/ea.vb()]}];D.j("s81",f);D.j("s79",f)},Tg:function(f){q=f;a()},Ja:function(f,g){b.addEventListener(f,g,!1)},qd:function(){k=-1;return!1},mh:function(){return 0<=
k},fq:function(){},oq:function(){},Cq:function(){var f=document.getElementById("loading");f&&(f.style.display="block")},km:function(){var f=document.getElementById("loading");f&&(f.style.display="none")},H:function(){v.mh()&&(ba.Kj(),wa.H(),W.H(),Jb.H(),V.ea&&Bb.H(),hc.H(),wc.H(),D.H(),ba.H(),c.flush(),c=null)},v:function(){wa.v();Wa.v();D.v();Object.assign(m,x);t=!1}};return v}(),sb=function(){var a=!1,b=!1,d=[];return{m:function(){},instance:function(e){void 0===e.Zi&&(e.Zi=!0);void 0===e.Ee&&(e.Ee=
.1);void 0===e.De&&(e.De=100);void 0===e.direction&&(e.direction=[0,0,-1]);void 0===e.Pb&&(e.Pb=45);var k=new ac,n=new Va(50,-50,-400),x=null;k.setPosition(n);var m=new Int8Array(20),q=new Int8Array(20),t=0,z=0,G=0,y=0,H={U:function(){q[D.Cd()]||(D.Uc("u124",k.elements),q[D.Cd()]=1);m[D.Cd()]||(D.Uc("u136",x),m[D.Cd()]=1)},ef:function(){z||(D.Uc("u124",k.elements),z=1);t||(D.N("u125",x[0],x[5]),t=1)},ff:function(){G||(D.yg("u113",n.x,n.y,n.z),G=1)},Mb:function(){y||(D.yg("u154",n.x,n.y,n.z),y=1)},
oh:function(){var v=e.Ee,f=e.De,g=Math.tan(.5*e.Pb*Math.PI/180);x=[.5/g,0,0,0,0,.5*ea.El()/g,0,0,0,0,-(f+v)/(f-v),-1,0,0,-2*f*v/(f-v),0];for(v=0;20>v;++v)m[v]=0;t=0},$n:function(v,f){n.ej(f[0]).fj(f[1]).z=f[2];k.elements.set(v);for(v=0;20>v;++v)q[v]=0;y=G=z=0},Yi:function(){for(var v=y=G=0;20>v;++v)q[v]=0}};H.oh();a=H;b=!0;e.Zi&&d.push(H);return H},U:function(){b&&a.U()},ef:function(){b&&a.ef()},ff:function(){b&&a.ff()},Mb:function(){b&&a.Mb()},resize:function(){d.forEach(function(e){e.oh()})},mf:function(){return a}}}(),
Jb=function(){var a=[],b=null;return{m:function(){b=Aa.instance({width:ea.wb(),height:ea.vb(),Gc:!ea.aa()})},instance:function(d){void 0===d.width&&(d.width=ea.wb());void 0===d.height&&(d.height=ea.vb());void 0===d.isFloat&&(d.isFloat=!1);void 0===d.Ub&&(d.Ub=!1);void 0===d.clearColor&&(d.clearColor=[0,0,0,0]);void 0===d.J&&(d.J=4);var e=ba.instance({isFloat:d.isFloat&&Fa.fa(),S:d.isFloat,width:d.width,height:d.height,isPot:!1,isLinear:!1,J:d.J}),k=void 0!==d.hc&&d.hc?!0:!1,n=d.hc,x={set:function(m,
q,t){t&&b.bind(!1,t);e.o();m&&(c.clearColor(d.clearColor[0],d.clearColor[1],d.clearColor[2],d.clearColor[3]),b.Se());q&&b.nh();k&&D.set(n)},rj:function(m){k=(n=m)?!0:!1},K:function(){e.se()},h:function(m){e.h(m)},resize:function(m,q){e.resize(m,q)},debug:function(){e.debug()},remove:function(){e.remove()}};d.Ub&&a.push(x);return x},resize:function(d,e){b.resize(d,e);a.forEach(function(k){k.resize(d,e)})},Fk:function(){b.gh()},fd:function(){b.fd()},Vc:function(){b.Vc()},rp:function(){b.nh()},qp:function(){b.Se()},
pp:function(){b.clear()},H:function(){b.remove()}}}(),vc=function(){var a=[];return{instance:function(b){void 0===b.width&&(b.width=ea.wb());void 0===b.height&&(b.height=ea.vb());var d=c.createFramebuffer(),e=b.width,k=b.height,n=!0;b={isFloat:Fa.fa(),S:!0,width:e,height:k,isPot:!1,isLinear:!1,J:4};var x=ba.instance(b),m=ba.instance(b),q=ba.instance(b),t=ba.instance(b),z=Aa.Kl(),G=Aa.Sh();c.bindFramebuffer(z,d);var y=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,y);c.renderbufferStorage(c.RENDERBUFFER,
c.DEPTH_COMPONENT16,e,k);c.framebufferRenderbuffer(z,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,y);c.clearDepth(1);c.framebufferTexture2D(z,ea.Bd(0),c.TEXTURE_2D,x.get(),0);c.framebufferTexture2D(z,ea.Bd(1),c.TEXTURE_2D,m.get(),0);c.framebufferTexture2D(z,ea.Bd(2),c.TEXTURE_2D,t.get(),0);c.framebufferTexture2D(z,ea.Bd(3),c.TEXTURE_2D,q.get(),0);ea.Qm(4);c.bindFramebuffer(z,null);Aa.reset();var H={position:x,yb:m,Nc:q,ga_:t,bind:function(){c.bindFramebuffer(z,d);Aa.reset()},set:function(){n&&c.checkFramebufferStatus(G);
c.bindFramebuffer(z,d);Aa.reset();if(n){if(c.checkFramebufferStatus(G)!==c.FRAMEBUFFER_COMPLETE)return!1;n=!1}c.viewport(0,0,e,k);c.clearColor(0,0,0,0);D.Yb()&&!ea.ri()&&(D.set("s101"),W.l(!1,!1));c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);return!0},K:function(){},resize:function(v,f){e=v;k=f;x.resize(v,f);m.resize(v,f);t.resize(v,f);q.resize(v,f);c.bindRenderbuffer(c.RENDERBUFFER,y);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,e,k);c.bindRenderbuffer(c.RENDERBUFFER,null)},remove:function(){x.remove();
m.remove();t.remove();q.remove();c.deleteRenderbuffer(y);c.deleteFramebuffer(d);var v=a.indexOf(H);-1!==v&&a.splice(v,1)}};a.push(H);return H},resize:function(b,d){a.forEach(function(e){e.resize(b,d)})}}}(),hc=function(){var a=[],b=V.fh;return{instance:function(d){function e(){q?k():(g=zd.instance({ha:G,zm:b}),m=V.Ck[ea.V()],y=ba.instance({isFloat:Fa.fa(),S:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:m,height:m/2,J:3}),H=ba.instance({isFloat:Fa.fa(),S:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:m,height:m/
2,J:3}),v=ba.instance({isFloat:Fa.fa(),S:!0,isPot:!0,width:1,height:m/2,J:3}),f=ba.instance({isFloat:Fa.fa()&&!b,S:!b,isPot:!1,isLinear:!0,isMirrorY:!0,isMipmap:!1,width:m,height:m/2,J:b?4:3}),q=!0,k(),J.forEach(function(h){h()}),J.splice(0,J.length))}function k(){if(q){Aa.$();g.Un(G);g.vn();y.M();D.set("s84");G.h(0);D.G("u91",V.Qc);ba.Kk(1);W.l(!0,!0);for(var h=V.rm[ea.V()],p=0;p<h;++p)H.o(),D.set("s87"),D.N("u14",1/m,0),y.h(0),W.l(!1,!1),y.o(),D.N("u14",0,2/m),H.h(0),W.l(!1,!1);v.M();D.set("s89");
y.h(0);W.l(!1,!1);D.set(b?"s91":"s90");f.M();y.h(0);v.h(1);W.l(!1,!1);ba.ba(0);ba.ba(1)}}var n=Object.assign({Kb:null,vc:null,uc:0,wc:0},d),x=0,m=0,q=!1,t=null,z=null,G=null,y=null,H=null,v=null,f=null,g=null,A=0,J=[];d={m:function(){function h(){2===++p&&(G=ba.instance({isFloat:Fa.fa(),S:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:x,height:x/2,J:3}),Aa.$(),G.M(),D.set("s83"),D.G("u96",n.wc),D.G("u97",n.uc),t.h(0),z.h(1),W.l(!0,!0),e())}var p=0;x=V.Dk[ea.V()];A=Math.log2(x)-1;n.Kb&&(t=
ba.instance({isPot:!1,url:n.Kb,B:h,J:3,isFlipY:!1}),z=ba.instance({isPot:!1,url:n.vc,B:h,J:3,isFlipY:!1}))},nj:function(h){G=h;e()},jd:function(h){q&&(g.h(h),D.G("u114",g.O()))},kd:function(h){q&&f.h(h)},vh:function(){D.G("u3",A)},Oh:function(){return A},O:function(){return x},md:function(h){q?h():J.push(h)},H:function(){t&&t.remove();z&&z.remove();y.remove();v.remove();H.remove();g.remove();f.remove();G.remove()}};a.push(d);d.m();return d},H:function(){a.forEach(function(d){d.H()})}}}(),fd={instance:function(a){var b=
a.Km,d=a.Im,e=0,k=b.O();a=V.fh;var n=ba.instance({isFloat:Fa.fa()&&!a,S:!a,isLinear:!0,isMipmap:!1,isPot:!1,width:k,J:a?4:3,isFlipY:!1}),x=ba.instance({isFloat:Fa.fa()&&!a,S:!a,isPot:!1,isLinear:!0,Vp:!0,isMipmap:!1,width:k,height:k/2,J:a?4:3}),m=Aa.instance({width:k,height:k}),q=a?"s76":"s75";return{fo:function(t){e=t;D.set(q);c.viewport(0,0,k,k);m.o();n.o();D.G("u13",e);b.jd(1);d.jd(0);W.l(!0,!0);c.viewport(0,0,k,k/2);x.o();b.kd(1);d.kd(0);W.l(!1,!1);c.flush()},jd:function(t){n.h(t)},kd:function(t){x.h(t)},
vh:function(){D.G("u3",b.Oh()*(1-e)+d.Oh()*e)}}}},Sb=function(){function a(M){var r=(l-V.Qe)/(V.jh-V.Qe);r=1-Math.pow(1-r,V.Zo);l+=M*(1+r*V.$o);l=Math.min(Math.max(l,V.Qe),V.jh);F.ib()}function b(M){-1!==m&&(A=g=0,x(),a(V.Yo*M.deltaY/window.innerHeight),M.preventDefault())}function d(){h+=g;p+=A;p=Math.min(Math.max(p,V.gn),V.fn);F.ib()}function e(M){if(0===m||-1===m)return!1;var r=void 0!==M.touches&&M.touches.length;M.preventDefault();if(2===m){var u=Wc(M.touches[0].pageX,M.touches[0].pageY,M.touches[1].pageX,
M.touches[1].pageY);a(-(v-u)*V.hn);v=u}else u=r?M.touches[0].clientX:M.clientX,M=r?M.touches[0].clientY:M.clientY,g=2*(u-y)*Math.PI/ea.O(),A=2*(M-H)*Math.PI/ea.Y(),4===m?(C[0]+=g*V.Li,C[1]-=A*V.Li,C[0]=Math.min(Math.max(C[0],-V.Oi),V.Oi),C[1]=Math.min(Math.max(C[1],-V.Pi),V.Pi),F.ib()):d(),y=u,H=M}function k(){0!==m&&-1!==m&&(0===g&&0===A||1!==m||!L?wa.ta():(x(),f=Date.now(),B=setInterval(F.Hm,J)),m=0)}function n(M){if(2!==m&&-1!==m){A=g=0;x();wa.wake();var r=void 0!==M.changedTouches&&M.touches.length;
M.preventDefault();r&&2===M.touches.length?(m=2,v=Wc(M.touches[0].pageX,M.touches[0].pageY,M.touches[1].pageX,M.touches[1].pageY)):(m=r||2!==M.button?1:4,y=r?M.touches[0].clientX:M.clientX,H=r?M.touches[0].clientY:M.clientY);return!1}}function x(){B&&(clearInterval(B),B=!1)}var m=0,q=!1,t=!1,z=!1,G=1,y=0,H=0,v=0,f=0,g=0,A=0,J=16,h=V.Ej,p=V.Ni,l=V.Pe,B=!1,L=0,P=new Float32Array([0,0,0,0,0]),C=[V.Nk,V.Ok],F={m:function(){L=V.fk[ea.V()];J=V.vd[ea.V()];ea.Ja("mousedown",n);ea.Ja("mouseup",k);ea.Ja("mouseout",
k);ea.Ja("mousemove",e);ea.Ja("mousemove",e);ea.Ja("wheel",b);ea.Ja("touchstart",n);ea.Ja("touchend",k);ea.Ja("touchmove",e)},ib:function(M){q?(t[0]=-p,t[1]=h,z[1].value=G/V.Pe*l,Wa.Cb(z)):(P[0]=h,P[1]=p,P[2]=l,P[3]=C[0],P[4]=C[1],wc.Jn(P,M))},Hm:function(){if(1E-4>g&&1E-4>A||-1===m)x(),A=g=0,0===m&&wa.ta();var M=Date.now(),r=M-f;f=M;M=Math.pow(L,r/J);g*=M;A*=M;d()},gf:function(M){q||(q=!0,m=-1,t=[0,0,0],z=[{name:"u82",type:"3f",value:t},{name:"u86",type:"1f",value:1}],G=M)},yj:function(M){-1===m&&
M&&(m=0);M||(m=-1)},Cn:function(){A=g=0;h=V.Ej;p=V.Ni;l=V.Pe;F.ib()},tq:function(M){l=M},uq:function(M){C[0]=M[0];C[1]=M[1];V.kh=M[2]},sq:function(M,r){h=M;p=r}};return F}(),Ac=function(){var a={s103:!1,s103color:!1,s103NormalMap:!1,s103ParamsMap:!1,s103NormalParamsMap:!1};return{instance:function(b){function d(w){if(da){w.tweaker&&window.JEELIZVTO&&"undefined"!==typeof T&&T.eh(w.tweaker);F=w.partsNames||[];C.splice(0);C.push({n:0,offset:0});B.min.set(Infinity,Infinity,Infinity);B.max.set(-Infinity,
-Infinity,-Infinity);var O=w.uvs;O&&(O=O.filter(function(ka){return ka}));aa=O&&0<O.length&&0<O[0].length?!0:!1;"undefined"!==typeof yb&&"string"===typeof w.faces&&(w.faces=yb(w.faces));"undefined"!==typeof Ob&&("string"===typeof w.vertices&&(w.vertices=Ob(w.vertices)),O&&O.length&&O.forEach(function(ka,Ra){"string"===typeof ka&&(O[Ra]=Ob(ka))}));var E=w.metadata.faces,X=1+(aa?1:0);E=(w.faces.length-E)/(w.metadata.faces*X);6!==E&&8!==E||aa||(++X,E/=2);if(4===E){E=6*X+2;for(var la=4*X+1,ma=Array(w.metadata.faces*
E),xa=0;xa<w.metadata.faces;++xa)for(var Ea=0;Ea<X;++Ea)ma[xa*E+4*Ea]=w.faces[xa*la+5*Ea],ma[xa*E+4*Ea+1]=w.faces[xa*la+5*Ea+1],ma[xa*E+4*Ea+2]=w.faces[xa*la+5*Ea+2],0===Ea&&(ma[xa*E+3]=w.faces[xa*la+4]),ma[xa*E+4*Ea+3*X+1]=w.faces[xa*la+5*Ea],ma[xa*E+4*Ea+3*X+2]=w.faces[xa*la+5*Ea+2],ma[xa*E+4*Ea+3*X+3]=w.faces[xa*la+5*Ea+3],0===Ea&&(ma[xa*E+3*X+4]=w.faces[xa*la+4]);w.faces=ma;w.metadata.faces*=2}H=Array(w.metadata.vertices);for(E=0;E<w.metadata.vertices;++E)H[E]=new Va(w.vertices[3*E],w.vertices[3*
E+1],w.vertices[3*E+2]),kd(B,H[E]);v=Array(w.metadata.faces);X=3*X+1;for(E=0;E<w.metadata.faces;++E)v[E]=new Cc(w.faces[X*E],w.faces[X*E+1],w.faces[X*E+2]),v[E].$b=w.faces[X*E+3];r=3<H.length;da&&(da.visible=r);nd(H,v);f=od(H,v);if(aa){X=Array(H.length);E=["a","b","c"];for(la=0;la<w.metadata.faces;++la)for(ma=0;3>ma;++ma)if(xa=w.faces[7*la+ma],Ea=w.faces[7*la+1+ma+3],"undefined"===typeof X[xa])X[xa]=[[xa,Ea]];else if(X[xa][0][1]!==Ea){for(var ja=-1,qa=1;qa<X[xa].length;++qa)if(X[xa][qa][1]===Ea){ja=
X[xa][qa][0];break}qa=-1;-1===ja?(qa=H.length,H.push(H[xa].clone()),f.push(f[xa].clone()),X[xa].push([qa,Ea]),X[qa]=[[qa,Ea]]):qa=ja;w.faces[7*la+ma]=qa;v[la][E[ma]]=qa}g=Array(H.length);for(w=0;w<H.length;++w)E="undefined"===typeof X[w]?w:X[w][0][1],g[w]=new Zb(O[0][2*E],O[0][2*E+1])}var Ia=uc(B);b.Ib&&(H.forEach(function(ka){ka.x-=Ia.x;ka.z-=Ia.z;ka.y-=B.min.y}),B.min.x-=Ia.x,B.max.x-=Ia.x,B.min.z-=Ia.z,B.max.z-=Ia.z,B.max.y-=B.min.y,B.min.y=0);if(b.Jb){var Z=V.Ak/Math.max(B.max.x-B.min.x,B.max.y-
B.min.y,B.max.z-B.min.z);H.forEach(function(ka){ka.Ca(Z)});B.min.Ca(Z);B.max.Ca(Z)}w=aa?8:6;X=new Float32Array(H.length*w);for(E=0;E<H.length;++E)X[w*E]=H[E].x,X[w*E+1]=H[E].y,X[w*E+2]=H[E].z,X[w*E+3]=f[E].x,X[w*E+4]=f[E].y,X[w*E+5]=f[E].z,aa&&(X[w*E+6]=g[E].x,X[w*E+7]=g[E].y);v.sort(function(ka,Ra){return ka.$b-Ra.$b});var na=new (65536>3*v.length?Uint16Array:Uint32Array)(3*v.length),fa=0;v.forEach(function(ka,Ra){ka.$b===fa?C[fa].n+=3:(C.push({n:3,offset:3*Ra}),++fa);na[3*Ra]=ka.a;na[3*Ra+1]=ka.b;
na[3*Ra+2]=ka.c});A&&A.remove();A=W.instance({ja:X,indices:na});p=h=!1;ia&&da.ph();u=!0;da.df();b.B&&(b.B(da),b.B=null)}}function e(w){A.La(w.n,w.offset)}function k(w,O){Q[O]&&(D.set(Q[O].am()),A.bind(!1),aa?(D.Qa(),D.kj()):(D.bb(),D.lj()),Q[O].Kc()&&(D.Tc(),h.xc(!1),D.ee(),sb.Mb()),Q[O].kl(),Q[O].ud(),A.La(w.n,w.offset))}function n(w,O){Q[O]&&(D.set(Q[O].bm()),A.bind(!1),aa?(D.Qa(),D.kj()):(D.bb(),D.lj()),Q[O].Kc()&&(D.Tc(),h.xc(!1),D.ee(),sb.Mb()),da.Bc(),Q[O].ud(),A.La(w.n,w.offset))}function x(w,
O){N&&Q[O]&&(Q[O].ll(),A.La(w.n,w.offset))}function m(w,O){N&&Q[O]&&(Q[O].nl(aa),A.La(w.n,w.offset))}function q(w,O){Q[O]&&(D.set(Q[O].Xl()),Q[O].Ah(),A.La(w.n,w.offset))}function t(w,O){Q[O]&&(D.set(Q[O].Yl()),da.Bc(),Q[O].Ah(),A.La(w.n,w.offset))}function z(w,O){Q[O]&&(D.set(Q[O].Zl()),Q[O].Kc()&&(h.xc(!1),D.ee(),sb.Mb()),A.bind(!1),Q[O].xh(aa),A.La(w.n,w.offset))}function G(w,O){if(Q[O]){var E=Q[O].$l();D.set(E);Q[O].Kc()&&(h.xc(!1),D.ee(),sb.Mb(),A.bind(!1));a[E]||(da.Bc(),A.bind(!1),a[E]=!0);
Q[O].xh(aa);A.La(w.n,w.offset)}}function y(w,O){return new Promise(function(E,X){w?(w.B=function(la){Q[O]&&Q[O].H();Q[O]=la;ia=ia||la.Kc();E()},Gc.instance(w)):X()})}if(!ea.mh())return!1;void 0===b.Ib&&(b.Ib=!1);void 0===b.Jb&&(b.Jb=!1);void 0===b.Oe&&(b.Oe=!1);var H=null,v=null,f=null,g=null,A=null,J=null,h=null,p=!1,l=new ac,B=new Bc,L=[],P=null,C=[{n:0,offset:0}],F=[],M=[],r=!1,u=!1,R=[],Q=[],ia=!1,aa=!1,N=!1,da={visible:r,Yk:function(){return C.length},Ul:function(){return F},ph:function(){!p&&
aa&&(v=v.filter(function(w){return null!==w}),J=pd(H,f,g,v),h=W.instance({ja:J,indices:!1}),g=f=v=H=J=null,p=!0)},Bc:function(){sb.U();da.zh()},zh:function(){D.Uc("u137",l.elements)},zp:function(){r&&(da.zh(),A.bind(!1),aa?D.Qa():D.bb(),A.U())},ul:function(w){r&&(w||da.Bc(),A.bind(!1),aa?D.Qa():D.bb(),A.U())},vl:function(){r&&(A.bind(!1),aa?D.Qa():D.bb(),C.forEach(x))},wh:function(){r&&(A.bind(!1),aa?D.Qa():D.bb(),M.forEach(e))},sl:function(w){N&&r&&(A.bind(!1),aa?D.Qa():D.bb(),w?C.forEach(q):C.forEach(t))},
td:function(w){r&&(w||da.Bc(),A.bind(!1),w||(D.Qa(),D.Tc()),N&&C.forEach(m))},ud:function(w){N&&r&&(w?C.forEach(k):C.forEach(n))},pl:function(){N&&r&&C.forEach(G)},ol:function(){N&&r&&C.forEach(z)},Xh:function(){return P},Vh:function(){return R},Go:function(w,O){Q[w].update(O);da.Oj()},ug:function(w,O){R=w;N=!1;Q.forEach(function(E){E.H()});Q=Array(w.length);ia=!1;w=w.map(function(E,X){return"string"===typeof E?md(-1===E.indexOf(".json")?E+".json":E).then(function(la){la.name=E;return y(la,X,E)}):
y(E,X,!1)});Promise.all(w).then(function(){N=!0;da.md(function(){ia&&da.ph();da.Oj();wa.Db(da);wa.oe(!0);O&&O(da)},4);da.df()})},Oj:function(){M.splice(0);C.forEach(function(w,O){Q[O]&&Q[O].Fm()&&M.push(w)})},md:function(w,O){u&&N?w(da):L.push({tb:w,order:O?O:0})},df:function(){u&&N&&(L.sort(function(w,O){return 0>w.order-O.order?1:-1}),L.forEach(function(w){w.tb(da)}),L.splice(0))},remove:function(){da.H();da=null},H:function(){r=u=!1;A&&A.remove();Q.forEach(function(w){w.H()});p&&h.remove();C.splice(0)},
dm:function(){return B.size().x},em:function(){return B.size().y},Qp:function(){return B.size().z},Gl:function(){return uc(B).x},Hl:function(){return uc(B).y},Ep:function(){return uc(B).z},Mp:function(){return B.min.y},replace:function(w,O,E){if(w===P)return O&&da&&(da.df(),O(da)),!1;P=w;wa.oe(!1);Dc(w,function(X){d(X);O&&O(da)},E);return!0}};b.Oc&&da.ug(b.Oc,b.Oe);P=b.url;Dc(b.url,d);return da},zn:function(){a.s103=!1;a.s103color=!1;a.s103NormalMap=!1;a.s103ParamsMap=!1;a.s103NormalParamsMap=!1}}}(),
wc=function(){var a=null,b=!1,d=!1,e=null,k=new Float32Array(16),n=new Float32Array(3),x={data:0},m={m:function(){a=V.Nb?new Worker("js/worker.php"):{postMessage:function(q){x.data=q;Hc.an(x)},terminate:function(){}};a.onmessage=function(q){switch(q.data[0]){case 3:for(var t=0;16>t;++t)k[t]=q.data[t+1];for(t=0;3>t;++t)n[t]=q.data[t+17];sb.mf().$n(k,n);break;case 6:m.Vn(),b=!0,Sb.ib(!1),V.ea&&(Bb.enable(),Bb.fe())}};e=new Float32Array(6);e[0]=2;V.Nb||Hc.Xn(a)},uo:function(){V.uh||(d=!0)},Gq:function(){d=
!1},Jn:function(q,t){if(t||b&&d)e[1]=q[0],e[2]=q[1],e[3]=q[2],e[4]=q[3],e[5]=q[4],a.postMessage(e)},Vn:function(){a.postMessage([5,V.kh])},H:function(){V.Nb&&a.terminate()}};return m}(),Hc=function(){var a=0,b=0,d=0,e=[0,0],k=new ac,n=new tc,x=new tc,m=new Va,q=new Va,t=new $b,z=0,G=new Float32Array(20);G[0]=3;var y=null,H={data:!1},v={m:function(){"undefined"===typeof V&&(self.bp={Nb:!0});V.Nb&&v.ig([6])},an:function(f){switch(f.data[0]){case 2:v.vg(f.data);break;case 5:z=f.data[1]}},ig:function(f){V.Nb?
postMessage(f):(H.data=f,y.onmessage(H))},vg:function(f){a=f[1];b=f[2];d=f[3];e[0]=f[4];e[1]=f[5];m.set(e[0],e[1],-d);t.set(b,a,0,"XYZ");if(!1===t instanceof $b)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");f=Math.cos(t.C/2);var g=Math.cos(t.D/2),A=Math.cos(t.F/2),J=Math.sin(t.C/2),h=Math.sin(t.D/2),p=Math.sin(t.F/2),l=t.order;"XYZ"===l?(n.C=J*g*A+f*h*p,n.D=f*h*A-J*g*p,n.F=f*g*p+J*h*A,n.R=f*g*A-J*h*p):"YXZ"===l?(n.C=J*g*A+f*h*p,n.D=
f*h*A-J*g*p,n.F=f*g*p-J*h*A,n.R=f*g*A+J*h*p):"ZXY"===l?(n.C=J*g*A-f*h*p,n.D=f*h*A+J*g*p,n.F=f*g*p+J*h*A,n.R=f*g*A-J*h*p):"ZYX"===l?(n.C=J*g*A-f*h*p,n.D=f*h*A+J*g*p,n.F=f*g*p-J*h*A,n.R=f*g*A+J*h*p):"YZX"===l?(n.C=J*g*A+f*h*p,n.D=f*h*A+J*g*p,n.F=f*g*p-J*h*A,n.R=f*g*A-J*h*p):"XZY"===l&&(n.C=J*g*A-f*h*p,n.D=f*h*A-J*g*p,n.F=f*g*p+J*h*A,n.R=f*g*A+J*h*p);m.y-=z;f=k.elements;p=n.x;var B=n.y,L=n.z;J=n.w;var P=p+p,C=B+B;h=L+L;g=p*P;A=p*C;p*=h;l=B*C;B*=h;L*=h;P*=J;C*=J;J*=h;f[0]=1-(l+L);f[4]=A-J;f[8]=p+C;f[1]=
A+J;f[5]=1-(g+L);f[9]=B-P;f[2]=p-C;f[6]=B+P;f[10]=1-(g+l);f[3]=0;f[7]=0;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;k.setPosition(m);x.L(n).inverse();f=q.L(m);B=f.x;P=f.y;L=f.z;g=x.x;A=x.y;J=x.z;h=x.w;p=h*B+A*L-J*P;l=h*P+J*B-g*L;C=h*L+g*P-A*B;B=-g*B-A*P-J*L;f.x=p*h+B*-g+l*-J-C*-A;f.y=l*h+B*-A+C*-g-p*-J;f.z=C*h+B*-J+p*-A-l*-g;for(f=1;17>f;++f)G[f]=k.elements[f-1];G[17]=q.x;G[18]=q.y;G[19]=q.z;v.ig(G)},Xn:function(f){y=f;v.ig([6])}};return v}();Hc.m();var Gc=function(){function a(x){var m=x.split(":").shift();
return"data"===m||"blob"===m?x:("undefined"!==typeof I&&I.ca?I:V).ca+V.Ei+x}function b(x,m){return Math.min(m+x+m*x,1)}var d=!1,e=null,k=1,n={diffuseTexture:null,normalTexture:null,paramsTexture:null,colorTextureUsage:0,metalness:.5,roughness:.5,fresnelMin:0,fresnelMax:1,fresnelPow:5,alpha:1,diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],B:null};return{m:function(){e=ba.instance({width:1,height:1,isMipmap:!1,J:4,array:new Uint8Array([255,255,255,255]),Hf:!1})},gf:function(){d=!0;k=2},instance:function(x){function m(){"number"===
typeof g.alpha?(v[0]=g.alpha,v[1]=0,v[2]=0,v[3]=0):(v[0]=g.alpha[0],v[1]=g.alpha[1]-g.alpha[0],v[2]=g.alpha[2],v[3]=g.alpha[3]);var u=1<=g.fresnelPow?g.fresnelMin:g.fresnelMax;f[0]=b(v[0],u);f[1]=b(v[1],u);f[2]=v[2];f[3]=v[3];l={Mi:g.fresnelMax,Ai:[g.fresnelMin,g.roughness,g.fresnelPow/15,g.metalness],Di:g.paramsMapMask}}function q(){return new Promise(function(u){(y=g.normalTexture&&ea.Rk()?!0:!1)&&!h.Da?h.Da=ba.instance({url:a(g.normalTexture),isLinear:!0,isMipmap:!0,isAnisotropicFiltering:!1,isPot:!0,
J:3,B:u}):u()})}function t(){return new Promise(function(u){(H=g.diffuseTexture&&""!==g.diffuseTexture?!0:!1)&&!h.ga_?(h.ga_=ba.instance({url:a(g.diffuseTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!0,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,J:4,B:u}),J="s108"):(h.ga_||(J="s109",h.ga_=e),u());A=[g.diffuseColor[0]/255,g.diffuseColor[1]/255,g.diffuseColor[2]/255]})}function z(){return new Promise(function(u){(p=g.paramsTexture?!0:!1)&&!h.$a?g.paramsTexture===g.diffuseTexture?(h.$a=h.ga_,
u()):h.$a=ba.instance({url:a(g.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!1,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,J:4,B:u}):u()})}function G(u){m();Promise.all([q(),t(),z()]).then(function(){y||p||H?y||p?y&&!p?(B="s103NormalMap",L="s103NNGLtextureNormalMap"):!y&&p?(B="s103ParamsMap",L="s103NNGLtextureParamsMap"):(B="s103NormalParamsMap",L="s103NNGLtextureNormalParamsMap"):(B="s103",L="s103NNGLtexture"):(B="s103color",L="s103NNGLcolor");P=y?"s111":"s110";C=y?"s105":"s115";
F=p?"s113":"s112";M=p?"s106":"s116";g.B&&setTimeout(g.B.bind(null,u),1)})}var y,H,v=[1,0,0,0],f=[0,0,0,0],g=Object.assign({},n,x),A=null,J=null,h={ga_:null,Da:null,$a:null},p=y=H=!1,l=null,B=null,L=null,P=null,C=null,F=null,M=null,r={update:function(u){r.H();Object.assign(g,u);G()},Kc:function(){return y},Fm:function(){return.99>v[0]},bm:function(){return C},am:function(){return P},Yl:function(){return M},Xl:function(){return F},$l:function(){return B},Zl:function(){return L},ud:function(){y&&h.Da.h(0)},
nl:function(u){d&&D.set(J);u?D.Qa():D.bb();H&&D.Tc();r.td()},td:function(){H&&(D.G("u73",g.colorTextureUsage),h.ga_.h(0));D.zg("u147",A)},Ah:function(){p&&(h.$a.h(0),D.xa("u75",l.Di),D.Tc());D.xa("u111",l.Ai);D.G("u148",l.Mi)},xh:function(u){p&&!y?h.$a.h(k):y&&(H||e.h(0),h.Da.h(k),p&&h.$a.h(k+1));p&&D.xa("u75",l.Di);H||y?D.Rn():u?D.Sn():D.Tn();r.td();D.xa("u13",v);D.xa("u111",l.Ai);D.G("u148",l.Mi)},kl:function(){D.xa("u13",v)},ll:function(){D.xa("u13",f)},H:function(){H&&h.ga_.remove();y&&h.Da.remove();
p&&g.paramsTexture!==g.diffuseTexture&&h.$a.remove();Object.assign(h,{ga_:null,Da:null,$a:null})}};G(r);return r}}}(),Bb=function(){var a=0,b=0,d=0,e=0,k=0,n=0,x=V.yk,m=V.xk,q=V.zk,t=0,z=0,G=null,y=null,H=0,v=0,f=0,g=0,A=0,J=null,h=0,p=0,l=0,B=Date.now(),L=null,P=!1,C=!1,F=!1,M=1,r=!1,u={m:function(){a=V.tk[ea.V()];b=V.sk[ea.V()];d=V.rk[ea.V()];p=V.uk[ea.V()];e=V.kk[ea.V()];k=V.pk[ea.V()];f=V.qk[ea.V()];g=ea.O();A=ea.Y();t=Math.round(g*a);z=Math.round(A*a);y=Aa.instance({width:t,height:z,Gc:!1});
G=ba.instance({width:t,height:z,isPot:!1,isLinear:!0});J=ba.instance({width:t,height:z,isPot:!1,isLinear:!0,J:1});P=!0},resize:function(R,Q,ia){M=ia;g=R;A=Q;t=Math.round(R*a);z=Math.round(Q*a);y.resize(t,z);C=!0},U:function(){var R=Math.exp(-(Date.now()-B)/p);h=F?l+(1-R)*(1-l):l*R;H=b+h*(d-b);v=e+(1-h)*(1-e);n=k+(1-h)*(1-k);ba.ba(5);if(C&&P)ba.ba(6),J.resize(t,z),D.set("s0"),D.he("u1",6),y.bind(!1,!0),J.o(),y.Se(),G.h(6),W.l(!0,!0),G.resize(t,z),G.o(),J.h(6),W.l(!1,!1),D.he("u1",0),C=!1;else{c.enable(c.BLEND);
c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA);R=H/f;c.blendColor(R,R,R,R);c.colorMask(!0,!1,!1,!0);D.set("s95");sb.ef();D.G("u128",H);p&&(D.G("u129",v),D.G("u120",n));var Q=M*(x+Math.pow(Math.random(),q)*(m-x));D.N("u14",Q/g,Q/A);y.gh();y.Vc();G.o();Q=2*Math.PI*Math.random();for(var ia=!0,aa=0;aa<f;++aa)1===aa&&(c.blendFunc(c.SRC_ALPHA,c.ONE),D.G("u128",R)),D.G("u127",Q+aa/f*(Math.PI/2)),D.N("u126",(Math.random()-.5)/g,(Math.random()-.5)/A),W.l(ia,ia),ia=!1;c.disable(c.BLEND);D.set("s96");D.N("u14",
1/t,1/z);J.o();G.h(7);W.l(!1,!1);c.colorMask(!0,!0,!0,!0)}},h:function(R){J.h(R)},enable:function(){r=!0},kn:function(){if(F||!r)return!1;L&&clearTimeout(L);u.fe();L=setTimeout(u.Mj,400)},fe:function(){L&&(clearTimeout(L),L=!1);!F&&r&&(window.Xj.disable(),F=!0,B=Date.now(),l=h)},Mj:function(){F&&r&&(L&&(clearTimeout(L),L=null),window.Xj.enable(),F=!1,B=Date.now(),l=h)},H:function(){G.remove();J.remove();y.remove()}};u.kn();return u}(),zd={instance:function(a){var b=a.ha.O(),d=a.zm?!0:!1,e=d?"s77":
"s12",k=ba.instance({isFloat:a.ha.si()&&Fa.fa()&&!d,S:a.ha.ti()&&!d,isLinear:!0,isMipmap:!1,isPot:!1,width:b,height:b,J:d?4:3}),n=ba.instance({isFloat:a.ha.si()&&Fa.fa(),S:a.ha.ti(),isPot:!0,width:1,height:b/2,J:3});n.o();D.set("s89");a.ha.h(0);W.l(!0,!0);var x=Math.round(Math.log(b)/Math.log(2));k.Un=function(m){a.ha=m};k.vn=function(){k.o();D.set(e);D.G("u91",V.Qc);a.ha.h(0);n.h(1);for(var m=0,q=0;q<=x;++q){var t=Math.pow(2,x-q),z=t/2;c.viewport(0,m,b,z);D.N("u89",b/t,1);D.G("u90",Math.min(6/z,
.6));m+=t/2;W.l(0===q,0===q)}};k.yn=k.remove;k.remove=function(){k.yn();n.remove()};return k}};ua.Ia=function(){var a={Sc:45,qg:1,Ab:"../../images/debug/picsou.png",de:.8,Of:3.14/6,Pf:.314,Pd:4,Od:.5,Nf:-.25,Jm:1,Z:256,Mf:.15},b={Va:null,Cc:null,screen:null},d=!1,e=!1,k=-1,n=null,x=null,m=null,q=Math.PI/180,t=[1,1],z=!1,G={m:function(y){k=y.width;y={isFloat:Fa.fa(),S:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:k,height:k/2,J:3};b.Va&&(b.Va.remove(),b.Cc.remove());b.Va=ba.instance(y);b.Cc=
ba.instance(y);D.j("s117",[{type:"1i",name:"u155",value:0}]);D.j("s118",[{type:"1i",name:"u160",value:0}]);G.Pj();z=!0},Pj:function(){D.j("s118",[{type:"1f",name:"u161",value:a.Of},{type:"1f",name:"u162",value:a.Pf},{type:"1f",name:"u163",value:a.Pd},{type:"1f",name:"u164",value:a.Od},{type:"1f",name:"u165",value:a.Nf}])},cq:function(){return e},pa:function(y){n=y},Rc:function(){x="uniform sampler2D u155;uniform vec2 u156,u157,u10;uniform int u158;uniform float u159,u141;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5,.5);const float e=1.2;const vec3 g=vec3(1.,1.,1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u10*(c-u156)/u157;float b=1.;if(u158==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u159*g,texture2D(u155,a).rgb*u141,b*g);gl_FragColor=vec4(d,1.);}";
m="uniform sampler2D u160;uniform float u161,u162,u163,u164,u165;varying vec2 vv0;const float f=3.141593;const vec2 o=vec2(.5,.5);const vec3 h=vec3(1.,1.,1.);void main(){float i=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u160,vec2(.5,.5));float d=a.r,j=u163*a.g,k=u164*(a.b+u165),b=a.a,g=asin(cos(b)*cos(d)),l=atan(cos(b)*sin(d),-sin(b)),m=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(i-l)),n=1.-smoothstep(u161-u162,u161+u162,m);gl_FragColor=vec4(h*(max(k,0.)+max(j,0.)*n),1.);}";D.ma("s117",{name:"_",
g:x,i:"u155 u156 u158 u157 u159 u141 u10".split(" "),precision:"highp"});D.ma("s118",{name:"_",g:m,i:"u160 u161 u162 u163 u164 u165".split(" "),precision:"highp"})},Eg:function(y,H,v,f,g,A,J){D.N("u156",H,v);D.he("u158",f?1:0);D.N("u157",g,g/A);D.ie("u10",J);y.h(0);W.l(!1,!1)},ak:function(y){c.viewport(0,0,a.Z,a.Z/2);D.set("s118");y.h(0);W.l(!1,!1)},Yh:function(){return b.Va},ih:function(y){G.m({width:a.Z});G.Qj(y,!1,1);e=!0},hh:function(){d&&b.screen.gm()===a.Ab||(d=!1,b.screen&&b.screen.remove(),
b.screen=ba.instance({url:a.Ab,isFloat:!1,B:function(){d=!0}}))},vg:function(y){Object.assign(a,y)},ib:function(y){G.vg(y);z&&(G.Pj(),G.hh())},Qj:function(y,H,v){var f=a.Z;Aa.$();b.Cc.M();D.set("s0");b.Va.h(0);W.l(!0,!0);b.Va.o();D.set("s117");D.G("u159",a.Mf);D.G("u141",a.Jm);G.Eg(y,Math.PI,0,!0,90*q,y.O()/y.Y(),t);d&&(D.G("u141",a.de),c.viewport(0,0,f/2,f/2),G.Eg(b.screen,0,0,!1,2*a.Sc*q,2*a.qg,t),c.viewport(f/2,0,f/2,f/2),G.Eg(b.screen,2*Math.PI,0,!1,2*a.Sc*q,2*a.qg,t));c.enable(c.BLEND);c.blendFunc(c.ONE,
c.ONE);H&&G.ak(H);D.set("s0");c.blendColor(0,0,0,1-v);c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_CONSTANT_ALPHA);b.Cc.h(0);W.l(!1,!1);c.disable(c.BLEND);n.nj(b.Va)},v:function(){Object.assign(b,{Va:null,Cc:null,screen:null});e=d=!1;k=-1;n=null}};return G}();ua.pb=function(){var a=!1,b=!0,d=null,e=null,k={Rc:function(){ea.aa()&&(D.ma("s119",{name:"_",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec2 u42;uniform vec3 u143;const float l=1.,m=0.,n=0.,E=1.;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 F=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 v=s(a);vec3 w=mix(u143,u83,c);float x=mix(l,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u81,1.,u85);vec2 j=u80/t;vec3 k=a0;float A=max(0.,-a0.z-m)*n;k.x+=A*sign(a0.x)*(1.-u85);vec3 B=v*(k+w)*x+b;vec2 C=j*z;vec3 D=vec3(g*C,-j)+B*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(D,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u41","u42","u78","u143"].concat(D.Ed(),D.Fd()),I:["a0"],P:[3],da:!0}),a=!0)},m:function(n){a&&D.j("s119",[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",value:n.Ea},{type:"1f",name:"u79",value:0},{type:"1f",name:"u87",value:1}].concat(n.Pg))},fb:function(n){e=n;d&&k.di()},eb:function(n){d=n;e&&k.di()},di:function(){ea.aa()&&(D.j("s119",[{type:"3f",
name:"u143",value:[d[0]*e,d[1]*e,d[2]*e]}]),D.K())},qm:function(n){for(var x=n.width/2,m=n.height/2,q=n.depth,t=n.wl,z=n.height/4,G=n.al,y=2*G+4,H=[],v=[],f=-x+n.Ua,g=-t-n.Ua,A=x-n.Ua,J=-t-n.Ua,h=0;h<y;++h){var p=0,l=0;0===h?(p=-x,l=-t-q):1<=h&&h<=1+G?(l=(h-1)/G*Math.PI/2,p=f-Math.cos(l)*n.Ua,l=g+Math.sin(l)*n.Ua):h>=2+G&&h<=2+2*G?(l=(h-2-G)/G*Math.PI/2,p=A+Math.sin(l)*n.Ua,l=J+Math.cos(l)*n.Ua):h===y-1&&(p=x,l=-t-q);H.push(p,m+z,l,p,-m+z,l);0!==h&&v.push(2*h,2*h-2,2*h-1,2*h,2*h-1,2*h+1)}return k.instance({ja:H,
indices:v})},toggle:function(n){b=n},instance:function(n){var x=W.instance({ja:n.ja,indices:n.indices});return{U:function(){a&&b&&(D.set("s119"),x.bind(!0),x.U())}}}};return k}();ua.ia=function(){function a(r){D.j("s122",r);D.j("s123",r)}var b={wf:-87,jm:[85,95],ci:[90,90],bi:[85,70],nd:24,tp:12,bl:2,jg:[-80,40],Ii:[0,-10],Ym:40,$m:20,Ji:[70,50],Zm:90,Co:2,ke:[0,-15],Ce:1024,lb:512,Wd:4,so:[6,30],Hi:1.2};b.Si=b.jg;var d=!1,e=!1,k=!1,n=null,x=null,m=null,q=null,t=null,z=null,G=!1,y=!1,H=null,v=null,
f=null,g=null,A=.5,J=[{type:"1f",name:"u167",value:1}],h=null,p=null,l=0,B=["u41","u42","u144","u143"],L=null,P=null,C=null,F=null,M={Rc:function(){D.ma("s120",{name:"_",u:"attribute vec3 a0;uniform vec3 u143;uniform vec2 u168,u169;uniform float u144,u170,u171,u172;varying float vv0,vv1;void main(){vec3 a=(a0+u143)*u144;float b=atan(a.x,a.z-u170),d=2.*(a.y-u171)/(u172-u171)-1.;vv0=a0.y;float g=1.-u168.x*u168.x/(u168.y*u168.y),c=u168.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u170);vv1=smoothstep(u169.x,u169.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u173;uniform vec4 u13;varying float vv0,vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv0),b=min(a,1.)*u173;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u144 u143 u168 u169 u170 u171 u172 u13 u173".split(" "),I:["a0"],P:[3],precision:"highp"});D.ma("s121",{name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u14),c=texture2D(u1,vv0-2.*u14),d=texture2D(u1,vv0-u14),f=texture2D(u1,vv0+u14),g=texture2D(u1,vv0+2.*u14),h=texture2D(u1,vv0+3.*u14);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u14"],precision:"lowp"});D.ma("s122",{name:"_",u:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0;varying float vv1;uniform sampler2D u41;uniform vec2 u42;uniform float u144;uniform vec3 u143;const float o=0.,p=0.;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 G=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 g=u85*e;vec3 c=u85*q;vec2 v=mix(d.a*u42,e,g),h=(2.*d.gb-e)*(1.-g);h.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u79,0.,0.),u82,c);float w=mix(texture2D(u41,t).r,0.,u85);a.z+=w;mat3 i=u(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float j=cos(a.z),k=sin(a.z);mat2 z=mat2(j,k,-k,j);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 l=u80/v;vec3 m=a0;float B=max(0.,-a0.z-o)*p;m.x+=B*sign(a0.x)*(1.-u85);vec3 C=i*(m+x)*y+b;vec2 D=l*A;vec3 E=vec3(h*D,-l)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 F=i*a2;vv1=-F.z,vv1*=vv1*1e-5+smoothstep(5.,50.,abs(a0.x));}",
g:"uniform sampler2D u174,u160;uniform vec2 u89,u175;uniform float u176,u167;varying vec2 vv0;varying float vv1;void main(){vec2 b=u175*u176+u89*vv0;vec4 a=u167*texture2D(u174,b);a.r*=step(0.,vv0.y),gl_FragColor=vec4(0.,0.,0.,a.r*vv1);}",i:"u174 u160 u78 u176 u175 u89 u167".split(" ").concat(D.Ed(),D.Fd(),B),I:["a0","a2","a1"],P:[3,3,2],precision:"lowp"});D.ma("s123",{name:"_",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u144;uniform vec3 u143;const float l=0.,m=0.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 D=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,o);vec2 f=u85*e;vec3 c=u85*n;vec2 s=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,p).rgb+vec3(u79,0.,0.),u82,c);float t=mix(texture2D(u41,q).r,0.,u85);a.z+=t;mat3 u=r(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 j=u80/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u85);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),gl_Position*=vec4(-1.,1.,1.,1.);}",
g:"void main(){gl_FragColor=vec4(0.);}",i:["u78"].concat(D.Ed(),D.Fd(),B),I:["a0"],P:[3],precision:"lowp"});d=!0},m:function(r){if(d){if(void 0===r.ic||!r.ic)return!1;if(e)M.ij(r);else{q=ba.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.Ce,height:b.Ce/4});var u=b.lb/4,R={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:b.lb,height:u};m=ba.instance(R);z=ba.instance(R);t=ba.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.lb,height:u*b.Wd});u=[];R=[];var Q=b.Ii[0],ia=b.Ii[1],
aa=b.Ym,N=b.$m,da=-b.Ji[0]+Q,w=b.Ji[1]+ia,O=b.Zm;u.push(0,Q,ia,.5*-N,da,w,.5*N,da,w,.5*-aa,Q-O,ia,.5*aa,Q-O,ia);R.push(0,2,1,0,1,3,1,4,3,1,2,4,0,4,2);C=W.instance({ja:new Float32Array(u),indices:new Uint16Array(R)});u=.5-.5/r.jc[1];R=.5+.5/r.jc[1];Q=new Float32Array(16*b.nd);ia=new Uint16Array(6*(b.nd-1));for(aa=0;aa<b.nd;++aa){N=2*aa/(b.nd-1)-1;N=Math.sign(N)*Math.pow(Math.abs(N),b.bl);O=Math.PI*(N+1)/2-Math.PI/2;N=Math.sin(O);var E=Math.cos(O);da=Math.sin(O*b.Hi);w=Math.cos(O*b.Hi);var X=O/(Math.PI*
r.jc[0])+.5;O=b.bi[0]*N;var la=b.Si[0],ma=b.bi[1]*E+b.wf,xa=X,Ea=u,ja=b.Si[1];E=b.ci[1]*E+b.wf;var qa=R,Ia=16*aa;Q[Ia]=b.ci[0]*N;Q[Ia+1]=ja;Q[Ia+2]=E;Q[Ia+3]=da;Q[Ia+4]=0;Q[Ia+5]=w;Q[Ia+6]=X;Q[Ia+7]=qa;Q[Ia+8]=O;Q[Ia+9]=la;Q[Ia+10]=ma;Q[Ia+11]=da;Q[Ia+12]=0;Q[Ia+13]=w;Q[Ia+14]=xa;Q[Ia+15]=Ea;0!==aa&&(N=2*aa,da=6*(aa-1),ia[da]=N,ia[da+1]=N-1,ia[da+2]=N-2,ia[da+3]=N,ia[da+4]=N+1,ia[da+5]=N-1)}F=W.instance({ja:Q,indices:ia});M.ij(r);D.j("s121",[{type:"1i",name:"u1",value:0}]);e=!0}}},ij:function(r){A=
r.no;g=r.le;var u=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",value:[r.Ea[0],r.Ea[1]-b.ke[0],r.Ea[2]+b.ke[1]]}].concat(r.Pg,r.Lj);h=[{type:"1i",name:"u174",value:0},{type:"1i",name:"u160",value:2},{type:"1f",name:"u176",value:r.oo},{type:"2f",name:"u89",value:[1,1/b.Wd]},{type:"2f",name:"u175",value:[0,1/b.Wd]},{type:"1f",name:"u167",value:1}].concat(u);p=u;D.j("s122",h);D.j("s123",p)},dc:function(r){n=r},cc:function(r){L=r;L.md(M.yc)},ui:function(){return k&&null!==L&&null!==P},yc:function(){if(!(k||
y&&G)||null===L||null===P)return!1;l=0;c.viewport(0,0,b.Ce,b.Ce/4);Aa.$();q.o();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);D.j("s120",[{type:"1f",name:"u170",value:b.wf},{type:"1f",name:"u171",value:b.jg[0]},{type:"1f",name:"u172",value:b.jg[1]},{type:"3f",name:"u143",value:[H[0]+v[0],H[1]+v[1],H[2]+v[2]]},{type:"1f",name:"u173",value:A},{type:"2f",name:"u168",value:b.jm},{type:"2f",name:"u169",value:b.so}]);L.vl();D.set("s1");var r=b.lb/4;c.viewport(0,0,b.lb,r);m.o();q.h(0);q.Ad();W.l(!0,
!0);for(var u=0;u<b.Wd;++u)D.set("s121"),0!==u&&c.viewport(0,0,b.lb,r),z.o(),m.h(0),D.N("u14",1/b.lb,0),W.l(!1,!1),m.o(),z.h(0),D.N("u14",0,1/r),W.l(!1,!1),b.cl&&c.colorMask(0===u,1===u,2===u,!0),D.set("s1"),t.o(),m.h(0),c.viewport(0,u*r,b.lb,r),W.l(!1,!1),b.cl&&c.colorMask(!0,!0,!0,!0);return k=!0},U:function(){M.ui()&&0===l++%b.Co&&(P.bind(!1,!1),x.M(),c.clearColor(0,0,0,0),c.enable(c.DEPTH_TEST),c.depthMask(!0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),D.set("s123"),n.h(1),C.bind(!0),C.U(),
D.set("s122"),t.h(0),F.bind(!0),F.U(),c.disable(c.DEPTH_TEST),c.depthMask(!1))},cm:function(){return x},add:function(){M.ui()&&(c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),x.h(0),W.l(!1,!1),c.disable(c.BLEND))},sg:function(r,u){P&&P.remove();P=Aa.instance({width:r,height:u,Gc:!0});x&&x.remove();x=ba.instance({width:r,height:u,isFloat:!1,isPot:!1});M.yc()},eb:function(r,u,R){r||(r=H,u=v,R=f);a([{type:"3f",name:"u143",value:[R[0]+g[0],R[1]+g[1]-b.ke[0],R[2]+g[2]+b.ke[1]]}]);H=r;v=u;f=
R;y=!0;!k&&G&&M.yc();D.K()},fb:function(r,u){D.j("s120",[{type:"1f",name:"u144",value:r}]);a([{type:"1f",name:"u144",value:u}]);G=!0;!k&&y&&M.yc();D.K()},wg:function(r){a([{type:"1f",name:"u79",value:r}]);D.K()},Db:function(r){r&&(L=r);M.yc()},xg:function(r,u){J[0].value=1-r;a(J);a(u)},H:function(){},v:function(){k=e=d=!1;z=t=q=m=x=n=null}};return M}();ua.sa=function(){var a=!1,b=null,d=0,e=0,k=0,n=[{type:"1f",name:"u167",value:1}],x=null,m=null,q=null,t={Rc:function(){D.ma("s124",{name:"_",u:"attribute vec3 a0;uniform vec2 u177,u178;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u178)/u177;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",
g:"uniform vec2 u179;uniform float u180,u181,u182;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u180,u181),a=vv0-b,c=u182*a,d=(c-a)*u179;gl_FragColor=vec4(d,0.,1.);}",i:"u177 u178 u180 u181 u182 u179".split(" "),I:["a0"],P:[3],precision:"highp"});D.ma("s125",{name:"_",u:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u177,u178;uniform float u144;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,q);vec2 f=u85*e;vec3 c=u85*p;vec2 u=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,r).rgb+vec3(u79,0.,0.),u82,c);float v=mix(texture2D(u41,s).r,0.,u85);a.z+=v;mat3 w=t(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 j=u80/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u85);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u178)/u177,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u183,u184;uniform float u167;varying vec2 vv0,vv1;void main(){vec2 a=u167*texture2D(u183,vv0).rg;gl_FragColor=texture2D(u184,a+vv1);}",i:"u167 u41 u183 u184 u177 u178 u42 u78 u144 u143".split(" ").concat(D.Ed(),D.Fd()),I:["a0"],P:[3],precision:"lowp"});a=!0},m:function(z){if(a){if(void 0===z.ic||!z.pd)return!1;m=ba.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,J:4});q=Aa.instance({width:256,height:128});D.j("s125",[{type:"1i",name:"u41",value:1},{type:"1i",
name:"u183",value:2},{type:"1i",name:"u184",value:0},{type:"3f",name:"u78",value:z.Ea},{type:"1f",name:"u167",value:1}].concat(z.Lj,z.Pg));e=z.Ze;k=z.Ye;d=z.$e}},dc:function(z){b=z},cc:function(z){x=z;x.md(t.Ve)},Ve:function(){c.viewport(0,0,256,128);q.o();m.o();var z=x.dm(),G=x.em(),y=[{type:"2f",name:"u177",value:[z,G]},{type:"2f",name:"u178",value:[x.Gl(),x.Hl()]}];D.j("s124",y.concat([{type:"1f",name:"u180",value:e},{type:"1f",name:"u181",value:k},{type:"1f",name:"u182",value:d},{type:"2f",name:"u179",
value:[1/z,-1/G]}]));x.wh();D.j("s125",y)},U:function(){D.set("s125");b.h(1);m.h(2);x.wh()},eb:function(z){D.j("s125",[{type:"3f",name:"u143",value:z}]);D.K()},fb:function(z){D.j("s125",[{type:"1f",name:"u144",value:z}]);D.K()},wg:function(z){D.j("s125",[{type:"1f",name:"u79",value:z}]);D.K()},lo:function(z){d=z;t.Ve();D.K();wa.animate(Date.now())},Db:function(z){z&&(x=z);t.Ve()},xg:function(z,G){n.u167=1-z;D.j("s125",n);D.j("s125",G)},H:function(){}};return t}();ua.pc=function(){var a=[0,-.5],b=
!1,d=!1,e=null,k=null,n=null,x=null,m=null,q=-1,t=-1;return{Rc:function(){D.ma("s126",{name:"_",u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42,u11;uniform float u10;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u41,vec2(.25,.5));vec2 b=a.a*u42,c=2.*a.gb-f,d=u11+a0*u10;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u185;varying vec2 vv0;void main(){gl_FragColor=texture2D(u185,vv0);}",i:["u41","u185","u42","u11","u10"],precision:"lowp"});
D.ma("s127",{name:"_",g:"uniform sampler2D u2,u186,u187;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u187,vv0).rgb,c=texture2D(u186,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u187","u186"],precision:"lowp"});b=!0},m:function(z){b&&(m=ba.instance({isFloat:!1,isPot:!0,url:z.Me,B:function(){d=!0}}),D.j("s126",[{type:"1i",name:"u41",value:1},{type:"1i",name:"u185",value:0},{type:"2f",name:"u42",value:z.Uj},{type:"2f",name:"u11",value:a},
{type:"1f",name:"u10",value:3.8}]),D.j("s127",[{type:"1i",name:"u186",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u187",value:2}]))},dc:function(z){k=z},sg:function(z,G){var y={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:z,height:G,J:4};q=2/z;t=2/G;n=ba.instance(y);x=ba.instance(y);e=Aa.instance({width:z,height:G})},U:function(z,G){if(d){e.bind(!1,!0);D.set("s88");for(var y=0;2>y;++y){D.N("u14",q,0);n.o();0!==y&&x.h(0);var H=0===y&&!V.ea;W.l(H,H);D.N("u14",0,t);x.o();n.h(0);W.l(!1,
!1)}D.set("s126");k.h(1);m.h(0);n.o();c.clearColor(1,0,0,1);c.clear(c.COLOR_BUFFER_BIT);W.l(!1,!1);D.set("s127");G.o();x.h(0);n.h(1);z.h(2);W.l(!1,!1)}},H:function(){}}}();var Lc=function(){var a={instance:function(b){var d=b.Yf,e=b.Uf,k=b.od,n=b.background?b.background:ba.Zh(),x=b.Oa,m={scale:1,offsetX:0,offsetY:0},q=null;b.Tf&&(m.scale=b.Tf.scale,m.offsetY=b.Tf.offsetY);return{Uh:function(){return x},Nh:function(){return n},set:function(){q=eb.Sl();eb.pj(m);eb.ue();eb.ve();wa.hj(k,n,!1,!1)},K:function(){eb.pj(q)},
bc:function(){return{modelURL:d,materialsURLs:e,background:n.bc(!1),od:k.bc(!1),Oa:x.bc(!0)}},Wl:function(){return k.bc(!1)},hp:function(t){n.h(t)},H:function(){k.remove();x.remove();b.background&&n.remove()}}},Yc:function(b,d,e){function k(){if(3===++q&&d){var t=a.instance({Yf:b.modelURL,Uf:b.materialsURLs,background:n,od:x,Oa:m});d(t)}}var n=null,x=null,m=null,q=0;ba.Yc(b.background,function(t){!t&&e?e():(n=t,k())});ba.Yc(b.dataState,function(t){!t&&e?e():(x=t,k())});ba.Yc(b.light,function(t){!t&&
e?e():(m=t,k())})}};return a}();return Ta||window.JEELIZVTO}();(function(U,sa){"function"===typeof define&&define.amd?define(sa):"object"===typeof exports?module.exports=sa():U.ResizeSensor=sa()})("undefined"!==typeof window?window:this,function(){function U(Ka,Za){var cb=Object.prototype.toString.call(Ka),Eb=0,La=Ka.length;if("[object Array]"===cb||"[object NodeList]"===cb||"[object HTMLCollection]"===cb||"[object Object]"===cb||"undefined"!==typeof jQuery&&Ka instanceof jQuery||"undefined"!==typeof Elements&&
Ka instanceof Elements)for(;Eb<La;Eb++)Za(Ka[Eb]);else Za(Ka)}if("undefined"===typeof window)return null;var sa=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(Ka){return window.setTimeout(Ka,20)},Ma=function(Ka,Za){function cb(){var La=[];this.add=function(Kb){La.push(Kb)};var ib,qb;this.call=function(){ib=0;for(qb=La.length;ib<qb;ib++)La[ib].call()};this.remove=function(Kb){var yb=[];ib=0;for(qb=La.length;ib<qb;ib++)La[ib]!==Kb&&yb.push(La[ib]);
La=yb};this.length=function(){return La.length}}function Eb(La,ib){if(La)if(La.resizedAttached)La.resizedAttached.add(ib);else{La.resizedAttached=new cb;La.resizedAttached.add(ib);La.resizeSensor=document.createElement("div");La.resizeSensor.className="resize-sensor";La.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";La.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
La.appendChild(La.resizeSensor);La.resizeSensor.offsetParent!==La&&(La.style.position="relative");var qb=La.resizeSensor.childNodes[0],Kb=qb.childNodes[0],yb=La.resizeSensor.childNodes[1],Ob,cc,Fb,Wb,nc=La.offsetWidth,dc=La.offsetHeight,ec=function(){Kb.style.width="100000px";Kb.style.height="100000px";qb.scrollLeft=1E5;qb.scrollTop=1E5;yb.scrollLeft=1E5;yb.scrollTop=1E5};ec();var oc=function(){cc=0;Ob&&(nc=Fb,dc=Wb,La.resizedAttached&&La.resizedAttached.call())};ib=function(){Fb=La.offsetWidth;Wb=
La.offsetHeight;(Ob=Fb!=nc||Wb!=dc)&&!cc&&(cc=sa(oc));ec()};var fc=function(gc,pc,Pb){gc.attachEvent?gc.attachEvent("on"+pc,Pb):gc.addEventListener(pc,Pb)};fc(qb,"scroll",ib);fc(yb,"scroll",ib)}}U(Ka,function(La){Eb(La,Za)});this.detach=function(La){Ma.detach(Ka,La)}};Ma.detach=function(Ka,Za){U(Ka,function(cb){if(cb){if(cb.resizedAttached&&"function"==typeof Za&&(cb.resizedAttached.remove(Za),cb.resizedAttached.length()))return;cb.resizeSensor&&(cb.contains(cb.resizeSensor)&&cb.removeChild(cb.resizeSensor),
delete cb.resizeSensor,delete cb.resizedAttached)}})};return Ma});var mc={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/"},nb={notLoaded:-1,init:0,realtime:2,loadingModel:3,paused:4},Qa={isRT:!0,sku:void 0,materialsReplacements:"",mode:nb.notLoaded},hb={displayWidth:-1,displayHeight:-1,cvWidth:-1,cvHeight:-1},Zc={cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,trackIframe:null},ya=Object.assign({},Zc),Ad={ADJUST_START:null,
ADJUST_END:null,LOADING_START:null,LOADING_END:null},Ic=null,Vb={enabled:!1,callback:null,interval:1E3},xc={error:!1},kc=null,bc=null,yc="undef",xb={start:function(U){console.log("INFO in JeelizVTOWidget.js: start()");if(Qa.mode!==nb.notLoaded)xb.resume();else{va();if(U.settings)for(var sa in U.settings)mc[sa]=U.settings[sa];U.NNCPath&&Ta.set_NNCPath(U.NNCPath);U.faceDetectionCallback&&(Vb.enabled=!0,Vb.callback=U.faceDetectionCallback,Vb.interval="undefined"===typeof U.faceDetectionInterval?1E3:
U.faceDetectionInterval);Ic=Object.assign({},Ad,U.callbacks||{});ya.container=U.placeHolder||document.getElementById("JeelizVTOWidget");if(!ya.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");ya.cv=U.canvas||document.getElementById("JeelizVTOWidgetCanvas");ya.cv||(ya.cv=document.createElement("canvas"),ya.container.appendChild(ya.cv));ya.cv.style.position="absolute";ya.loading=document.getElementById("JeelizVTOWidgetLoading");U.onError&&(xc.error=
U.onError);Db();sa=Cb(ya.container);if(!sa.width)return Promise.reject("PLACEHOLDER_NULL_WIDTH");if(!sa.height)return Promise.reject("PLACEHOLDER_NULL_HEIGHT");mb();new ResizeSensor(ya.container,function(Ma){mb()});(U.searchImageMask||U.searchImageColor||U.searchImageRotationSpeed)&&Ta.set_loading(U.searchImageMask,U.searchImageColor,U.searchImageRotationSpeed);U.callbackReady&&(bc=U.callbackReady);Qa.mode=nb.init;yc="undefined"===typeof U.assetsPath?mc.appstaticURL+"jeefit/":U.assetsPath;"undefined"!==
typeof U.catalog&&(kc=U.catalog);if(U.onWebcamGet)Ta.onWebcamGet(U.onWebcamGet);return new Promise(function(Ma,Ka){Ta.init(yc,ra,function(){Qa.isRT=!1;db("NO_ERROR_LABEL");Ka()},ya.cv);var Za=U.sku?U.sku:null;Ta.onHalfLoad(function(){!1===U.isShadow&&Ta.switch_shadow(!1);xb.load(Za,Ma,U.materialsReplacements)})})}},destroy:function(){return Ta.destroy().then(function(){Qa.mode=nb.notLoaded;Qa.sku=void 0;Qa.materialsReplacements="";bc=kc=null;Object.assign(ya,Zc)})},pause:function(U){if(!Qa.isRT)return Promise.reject();
Qa.mode=nb.paused;var sa=Ta.switch_sleep(!0,U);return U?sa:Promise.resolve(sa)},resume:function(U){if(!Qa.isRT)return Promise.reject();Qa.mode=nb.realtime;var sa=Ta.switch_sleep(!1,U);return U?sa:Promise.resolve(sa)},set_videoRotation:function(U){Qa.isRT&&Ta.set_videoRotation(U)},set_videoSizes:function(U,sa,Ma,Ka,Za,cb){Qa.isRT&&Ta.set_videoSizes(U,sa,Ma,Ka,Za,cb)},resize:function(){mb()},set_scale:function(U){Ta.set_scale(U)},capture_image:function(U,sa,Ma){Ta&&Ta.ready?Ta.capture_image(U,sa,Ma,
!1):sa(!1)},toggle_loading:function(U){U?(Ga(ya.loading),lc("LOADING_START")):(Sa(ya.loading),lc("LOADING_END"))},load_modelStandalone:function(U,sa){if(!Qa.isRT)throw Error("Loading standalone models is only available in RT mode");Qa.mode===nb.paused&&xb.resume();Qa.mode=nb.loadingModel;if("string"===typeof U){var Ma=U;Ha(U,Ma).then(sa).catch(Pa)}else{var Ka=Ma="RANDOM_SKU_"+Date.now().toString();Ta.set_modelStandalone(U,Nb.bind(null,Ka,sa),Ka)}Qa.sku=Ma;Qa.materialsReplacements=""},load:function(U,
sa,Ma){xb.toggle_loading(!0);Qa.isRT&&xb.load_RT(U,sa,Ma)},load_RT:function(U,sa,Ma){var Ka=Ma?JSON.stringify(Ma):"";U===Qa.sku&&Ka===Qa.materialsReplacements?xb.toggle_loading(!1):(Qa.sku=U,Qa.materialsReplacements=Ka,Qa.mode=nb.loadingModel,Qa.mode===nb.paused&&xb.resume(),U?kc&&kc[U]?Tb(U,kc[U],sa,Ma):pa(mc.glassesDBURL+U).then(function(Za){if(Za.error)return Pa();Tb(U,Za.intrinsic,sa,Ma)}).catch(Pa):(Qa.mode=nb.realtime,xb.toggle_loading(!1),Ta.start_rendering(),sa&&sa()))},enter_adjustMode:Ub,
exit_adjustMode:tb,set_LUT:function(U){return Ta&&Ta.ready?Ta.set_LUT(U||null):Promise.reject("NOT_READY")}};return xb}();window.JEELIZVTO=JEELIZVTO;
window.JEELIZVTOWIDGET={VERSION:"3.0.5",start:JeelizVTOWidget.start,pause:JeelizVTOWidget.pause,resume:JeelizVTOWidget.resume,load:JeelizVTOWidget.load,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,capture_image:JeelizVTOWidget.capture_image,set_videoRotation:JeelizVTOWidget.set_videoRotation,resize:JeelizVTOWidget.resize,set_scale:JeelizVTOWidget.set_scale,set_videoSizes:JeelizVTOWidget.set_videoSizes,destroy:JeelizVTOWidget.destroy,enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,
set_LUT:JeelizVTOWidget.set_LUT};
