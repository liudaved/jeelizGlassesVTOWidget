 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

"use strict";var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(ra,wa){return Object.prototype.hasOwnProperty.call(ra,wa)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(ra,wa,Ha){if(ra==Array.prototype||ra==Object.prototype)return ra;ra[wa]=Ha.value;return ra};
$jscomp.getGlobal=function(ra){ra=["object"==typeof globalThis&&globalThis,ra,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var wa=0;wa<ra.length;++wa){var Ha=ra[wa];if(Ha&&Ha.Math==Math)return Ha}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(ra,wa){var Ha=$jscomp.propertyToPolyfillSymbol[wa];if(null==Ha)return ra[wa];Ha=ra[Ha];return void 0!==Ha?Ha:ra[wa]};$jscomp.polyfill=function(ra,wa,Ha,Sa){wa&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(ra,wa,Ha,Sa):$jscomp.polyfillUnisolated(ra,wa,Ha,Sa))};
$jscomp.polyfillUnisolated=function(ra,wa,Ha,Sa){Ha=$jscomp.global;ra=ra.split(".");for(Sa=0;Sa<ra.length-1;Sa++){var za=ra[Sa];if(!(za in Ha))return;Ha=Ha[za]}ra=ra[ra.length-1];Sa=Ha[ra];wa=wa(Sa);wa!=Sa&&null!=wa&&$jscomp.defineProperty(Ha,ra,{configurable:!0,writable:!0,value:wa})};
$jscomp.polyfillIsolated=function(ra,wa,Ha,Sa){var za=ra.split(".");ra=1===za.length;Sa=za[0];Sa=!ra&&Sa in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Cb=0;Cb<za.length-1;Cb++){var qa=za[Cb];if(!(qa in Sa))return;Sa=Sa[qa]}za=za[za.length-1];Ha=$jscomp.IS_SYMBOL_NATIVE&&"es6"===Ha?Sa[za]:null;wa=wa(Ha);null!=wa&&(ra?$jscomp.defineProperty($jscomp.polyfills,za,{configurable:!0,writable:!0,value:wa}):wa!==Ha&&($jscomp.propertyToPolyfillSymbol[za]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(za):
$jscomp.POLYFILL_PREFIX+za,za=$jscomp.propertyToPolyfillSymbol[za],$jscomp.defineProperty(Sa,za,{configurable:!0,writable:!0,value:wa})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(ra,wa){for(var Ha=1;Ha<arguments.length;Ha++){var Sa=arguments[Ha];if(Sa)for(var za in Sa)$jscomp.owns(Sa,za)&&(ra[za]=Sa[za])}return ra};$jscomp.polyfill("Object.assign",function(ra){return ra||$jscomp.assign},"es6","es3");
$jscomp.arrayIteratorImpl=function(ra){var wa=0;return function(){return wa<ra.length?{done:!1,value:ra[wa++]}:{done:!0}}};$jscomp.arrayIterator=function(ra){return{next:$jscomp.arrayIteratorImpl(ra)}};$jscomp.makeIterator=function(ra){var wa="undefined"!=typeof Symbol&&Symbol.iterator&&ra[Symbol.iterator];return wa?wa.call(ra):$jscomp.arrayIterator(ra)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(ra){function wa(){this.batch_=null}function Ha(qa){return qa instanceof za?qa:new za(function(Ia,Qa){Ia(qa)})}if(ra&&!$jscomp.FORCE_POLYFILL_PROMISE)return ra;wa.prototype.asyncExecute=function(qa){if(null==this.batch_){this.batch_=[];var Ia=this;this.asyncExecuteFunction(function(){Ia.executeBatch_()})}this.batch_.push(qa)};var Sa=$jscomp.global.setTimeout;wa.prototype.asyncExecuteFunction=function(qa){Sa(qa,0)};wa.prototype.executeBatch_=function(){for(;this.batch_&&
this.batch_.length;){var qa=this.batch_;this.batch_=[];for(var Ia=0;Ia<qa.length;++Ia){var Qa=qa[Ia];qa[Ia]=null;try{Qa()}catch(db){this.asyncThrow_(db)}}}this.batch_=null};wa.prototype.asyncThrow_=function(qa){this.asyncExecuteFunction(function(){throw qa;})};var za=function(qa){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var Ia=this.createResolveAndReject_();try{qa(Ia.resolve,Ia.reject)}catch(Qa){Ia.reject(Qa)}};za.prototype.createResolveAndReject_=function(){function qa(db){return function(mb){Qa||
(Qa=!0,db.call(Ia,mb))}}var Ia=this,Qa=!1;return{resolve:qa(this.resolveTo_),reject:qa(this.reject_)}};za.prototype.resolveTo_=function(qa){if(qa===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(qa instanceof za)this.settleSameAsPromise_(qa);else{a:switch(typeof qa){case "object":var Ia=null!=qa;break a;case "function":Ia=!0;break a;default:Ia=!1}Ia?this.resolveToNonPromiseObj_(qa):this.fulfill_(qa)}};za.prototype.resolveToNonPromiseObj_=function(qa){var Ia=void 0;
try{Ia=qa.then}catch(Qa){this.reject_(Qa);return}"function"==typeof Ia?this.settleSameAsThenable_(Ia,qa):this.fulfill_(qa)};za.prototype.reject_=function(qa){this.settle_(2,qa)};za.prototype.fulfill_=function(qa){this.settle_(1,qa)};za.prototype.settle_=function(qa,Ia){if(0!=this.state_)throw Error("Cannot settle("+qa+", "+Ia+"): Promise already settled in state"+this.state_);this.state_=qa;this.result_=Ia;this.executeOnSettledCallbacks_()};za.prototype.executeOnSettledCallbacks_=function(){if(null!=
this.onSettledCallbacks_){for(var qa=0;qa<this.onSettledCallbacks_.length;++qa)Cb.asyncExecute(this.onSettledCallbacks_[qa]);this.onSettledCallbacks_=null}};var Cb=new wa;za.prototype.settleSameAsPromise_=function(qa){var Ia=this.createResolveAndReject_();qa.callWhenSettled_(Ia.resolve,Ia.reject)};za.prototype.settleSameAsThenable_=function(qa,Ia){var Qa=this.createResolveAndReject_();try{qa.call(Ia,Qa.resolve,Qa.reject)}catch(db){Qa.reject(db)}};za.prototype.then=function(qa,Ia){function Qa(tb,Db){return"function"==
typeof tb?function(Nb){try{db(tb(Nb))}catch(Tb){mb(Tb)}}:Db}var db,mb,Ub=new za(function(tb,Db){db=tb;mb=Db});this.callWhenSettled_(Qa(qa,db),Qa(Ia,mb));return Ub};za.prototype.catch=function(qa){return this.then(void 0,qa)};za.prototype.callWhenSettled_=function(qa,Ia){function Qa(){switch(db.state_){case 1:qa(db.result_);break;case 2:Ia(db.result_);break;default:throw Error("Unexpected state: "+db.state_);}}var db=this;null==this.onSettledCallbacks_?Cb.asyncExecute(Qa):this.onSettledCallbacks_.push(Qa)};
za.resolve=Ha;za.reject=function(qa){return new za(function(Ia,Qa){Qa(qa)})};za.race=function(qa){return new za(function(Ia,Qa){for(var db=$jscomp.makeIterator(qa),mb=db.next();!mb.done;mb=db.next())Ha(mb.value).callWhenSettled_(Ia,Qa)})};za.all=function(qa){var Ia=$jscomp.makeIterator(qa),Qa=Ia.next();return Qa.done?Ha([]):new za(function(db,mb){function Ub(Nb){return function(Tb){tb[Nb]=Tb;Db--;0==Db&&db(tb)}}var tb=[],Db=0;do tb.push(void 0),Db++,Ha(Qa.value).callWhenSettled_(Ub(tb.length-1),mb),
Qa=Ia.next();while(!Qa.done)})};return za},"es6","es3");$jscomp.polyfill("Math.log2",function(ra){return ra?ra:function(wa){return Math.log(wa)/Math.LN2}},"es6","es3");$jscomp.polyfill("Promise.prototype.finally",function(ra){return ra?ra:function(wa){return this.then(function(Ha){return Promise.resolve(wa()).then(function(){return Ha})},function(Ha){return Promise.resolve(wa()).then(function(){throw Ha;})})}},"es9","es3");
$jscomp.polyfill("Math.sign",function(ra){return ra?ra:function(wa){wa=Number(wa);return 0===wa||isNaN(wa)?wa:0<wa?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function ra(){Ra.mode=nb.realtime;Ra.isRT=!0;ya.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(ya.adjust){ya.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");ya.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");ya.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");ya.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var U=ya.adjust;U&&U.addEventListener("click",Ub,!1);(U=ya.adjustExit)&&
U.addEventListener("click",tb,!1);[ya.adjust,ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Ha)}Vb.enabled&&Ta.do_instantDetection(Vb.interval,Vb.callback);bc&&(bc(!0),bc=null)}function wa(){var U=document.createElement("style");U.setAttribute("type","text/css");U.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var sa=document.getElementsByTagName("head");1<=sa.length?sa[0].appendChild(U):document.body.appendChild(U)}function Ha(U){U&&
(U.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(U).display&&U.classList.add("_jeelizVTOForceShow"))}function Sa(U){U&&(U.classList.add("_jeelizVTOForceHide"),U.classList.remove("_jeelizVTOForceShow"))}function za(U,sa){if(U)for(var Na in sa)U.style[Na]=sa[Na]}function Cb(U){if(!U)return{width:0,height:0};U=U.getBoundingClientRect();return{width:U.width,height:U.height}}function qa(U){return new Promise(function(sa,Na){var La=new XMLHttpRequest;La.open("GET",U,!0);La.onreadystatechange=
function(){if(4===La.readyState)if(200===La.status||0===La.status)try{var Za=JSON.parse(La.responseText);sa(Za)}catch(cb){Na("INVALID JSON")}else Na("HTTP ERROR "+La.status)};La.send()})}function Ia(U,sa){return new Promise(function(Na,La){qa(U).then(function(Za){Ta.set_modelStandalone(Za,Nb.bind(null,sa,Na),sa)}).catch(La)})}function Qa(){db("INVALID_SKU")}function db(U){xc.error?xc.error(U):console.log("ERROR:",U)}function mb(){var U=Cb(ya.container),sa=Math.abs(hb.displayHeight-U.height);if(1>=
Math.abs(hb.displayWidth-U.width)&&1>=sa)console.log("INFO in JeelizVTOWidget.resize: resolution difference too small abord resize");else if(hb.displayWidth=U.width,hb.displayHeight=U.height,console.log("INFO in JeelizVTOWidget.resize: width = "+hb.displayWidth.toString()+" height = "+hb.displayHeight.toString()+" oFactor = "+(1).toString()),hb.cvWidth=Math.round(1*hb.displayWidth),hb.cvHeight=Math.round(1*hb.displayHeight),za(ya.cv,{width:hb.displayWidth.toString()+"px",height:hb.displayHeight.toString()+
"px"}),ya.cv.width=hb.cvWidth,ya.cv.height=hb.cvHeight,Ta)if(Ra.mode===nb.notLoaded)Ta.set_size(hb.cvWidth,hb.cvHeight,!1);else Ta.onLoad(function(){Ta.resize(hb.cvWidth,hb.cvHeight,!1)})}function Ub(){[ya.adjust,ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Sa);Ra.mode=nb.adjust;[ya.adjustNotice,ya.adjustExit].forEach(Ha);ya.cv.style.cursor="move";Ta.switch_modeInteractor("movePinch");lc("ADJUST_START")}function tb(){[ya.adjustNotice,ya.adjustExit].forEach(Sa);[ya.adjust,ya.changeModelContainer,
ya.buttonResizeCanvas].forEach(Ha);ya.cv.style.cursor="auto";Ra.mode=Ra.realtime;Ta.switch_modeInteractor("idle");lc("ADJUST_END")}function Db(){if(!ya.trackIframe){var U=mc.appstaticURL+"jeewidget/";ya.trackIframe=document.createElement("iframe");ya.trackIframe.width="10";ya.trackIframe.height="10";ya.trackIframe.src=U+"trackIframe.html";za(ya.trackIframe,{position:"absolute",zIndex:-1,bottom:"0px",right:"0px"});ya.container.appendChild(ya.trackIframe)}}function Nb(U,sa){Ra.mode=nb.realtime;sa&&
sa();xb.toggle_loading(!1);if(ya.trackIframe){sa=location.href.split("?").shift().split("://").pop();sa=sa.split("/").shift();sa=sa.split("www.").pop();try{ya.trackIframe.contentWindow.postMessage({action:"COUNTTRYONSESSION",domain:sa,sku:U},"*")}catch(Na){}}}function Tb(U,sa,Na,La){var Za=sa.mod+".json";sa.isStandalone?Ia(yc+"models3DStandalone/"+Za,U).then(Na):Ta.load_model(Za,sa.mats,Nb.bind(null,U,Na),U,La)}function lc(U){(U=Ic[U])&&U()}var Ta=function(){function U(a,b){return a[0]*(1-b)+a[1]*
b}function sa(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function Na(a,b){sa(a+"",function(d){b(JSON.parse(d))})}function La(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=La(a[d],b);return a}function Za(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function cb(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";
case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}function Eb(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}function Ma(a,b,d){var e=1,k=0;for(d=b+d-1;d>=b;--d)k+=e*Eb(a,d),e*=2;return k}function ib(a){a=
a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var b=a.length,d=new Uint8Array(b),e=0;e<b;++e)d[e]=a.charCodeAt(e);return d}function qb(a){return"string"===typeof a?JSON.parse(a):a}function Kb(a){return"undefined"===typeof qb(a).nb?Ob(a):yb(a)}function yb(a){var b=qb(a);a=b.nb;if(0===a)return new Uint8Array(b.nb);var d=b.n;b=ib(b);for(var e=new Uint32Array(d),k=0;k<d;++k)e[k]=Ma(b,k*a,a);return e}function Ob(a){var b=qb(a);a=b.ne;var d=b.nf,e=b.n;b=ib(b);
for(var k=new Float32Array(e),m=new Float32Array(d),v=a+d+1,n=0;n<e;++n){var q=v*n,r=0===Eb(b,q)?1:-1,y=Ma(b,q+1,a);q=q+1+a;for(var G=m.length,w=0,H=q;H<q+G;++H)m[w]=Eb(b,H),++w;for(G=q=0;G<d;++G)q+=m[G]*Math.pow(2,-G-1);k[n]=0===q&&0===y?0:r*(1+q)*Math.pow(2,1+y-Math.pow(2,a-1))}return k}function cc(a){var b=null,d=null,e=null,k=0,m=this,v=null,n={Lc:[],Xd:"none",dg:!1,Wd:null,grid:null,Ec:[1,1]};this.m=function(){this.Nk(v.Lc);e.oo({Xd:v.Xd,dg:v.dg,Wd:v.Wd})};this.Sl=function(q){return b[q]};this.se=
function(q){["s31","s33","s26"].forEach(function(r){Z.j(r,[{type:"2f",name:"u20",value:q}])});b&&b.forEach(function(r){r.se(q)})};this.Nk=function(q){var r=null;k=q.length;var y=null!==v.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),G=y?v.grid:[1,1];y&&this.se(G);b=q.map(function(w,H){w=Object.assign({},w,{index:H,parent:m,be:r,Cm:H===k-1,Sb:y,Aa:G,Ec:1===H?v.Ec:[1,1]});return r=0===H?$c.instance(w):ad.instance(w)});d=b[0];e=b[k-1];b.forEach(function(w,H){0!==H&&w.nn()})};this.wa=function(q){q.h(0);
var r=q;b.forEach(function(y){r=y.wa(r,!1)});return r};this.Uh=function(){return d.Rl()};this.Dc=function(){return e.Vl()};this.Qh=function(){return e.Qh()};this.v=function(){b&&(b.forEach(function(q){q.v()}),e=d=b=null,k=0)};"undefined"!==typeof a&&(v=Object.assign({},n,a),this.m())}function Fb(a,b){a[b]=!0;a.setAttribute(b,"true")}function Wb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function nc(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&
a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function dc(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function ec(a){if(!a)return a;var b=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};b={};"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&
(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&oc(b,a.deviceId);return b}function oc(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)}function fc(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a}function gc(a){function b(w){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(H,u){return Math.abs(H-w)-Math.abs(u-w)})}function d(w){var H=ec(a);
w=w(H);k.push(w);e(w)}function e(w){if(w.video&&w.video.facingMode&&w.video.facingMode.exact){var H=w.video.facingMode.exact;w=ec(w);delete w.video.facingMode.exact;w.video.facingMode.ideal=H;k.push(w)}}var k=[];if(!a||!a.video)return k;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var m=b(a.video.width.ideal).slice(0,3),v=b(a.video.height.ideal).slice(0,3),n={},q=0;for(n.ob=void 0;q<m.length;n={ob:n.ob},++q){n.ob=m[q];var r={},y=0;for(r.mb=void 0;y<v.length;r=
{mb:r.mb},++y)if(r.mb=v[y],n.ob!==a.video.width.ideal||r.mb!==a.video.height.ideal){var G=Math.max(n.ob,r.mb)/Math.min(n.ob,r.mb);G<4/3-.1||G>16/9+.1||d(function(w,H){return function(u){u.video.width.ideal=w.ob;u.video.height.ideal=H.mb;return u}}(n,r))}}}d(function(w){return fc(w)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(w){delete w.video.width.ideal;delete w.video.height.ideal;return w}),d(function(w){delete w.video.width;delete w.video.height;return w}));
a.video.facingMode&&(d(function(w){delete w.video.facingMode;return w}),a.video.width&&a.video.height&&d(function(w){fc(w);delete w.video.facingMode;return w}));k.push({audio:a.audio,video:!0});return k}function pc(a){try{var b=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(e){b=window.innerHeight>window.innerWidth}if(b&&a&&a.video){b=a.video.width;var d=a.video.height;b&&d&&b.ideal&&d.ideal&&b.ideal>d.ideal&&(a.video.height=b,a.video.width=d)}}function Pb(a){a.volume=0;Fb(a,"muted");
if(dc()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;Fb(a,"muted")},5)}}function bd(a){var b=Ba.element,d=Ba.rh;return null===b?Promise.resolve():new Promise(function(e,k){if(b.srcObject&&b.srcObject.getVideoTracks){var m=b.srcObject.getVideoTracks();1!==m.length?k("INVALID_TRACKNUMBER"):(m=
m[0],a?Jc(b,e,k,d):(m.stop(),e()))}else k("BAD_IMPLEMENTATION")})}function Kc(a,b,d,e){function k(v){m||(m=!0,d(v))}var m=!1;navigator.mediaDevices.getUserMedia(e).then(function(v){function n(){setTimeout(function(){if(a.currentTime){var r=a.videoHeight;if(0===a.videoWidth||0===r)k("VIDEO_NULLSIZE");else{var y={Vk:null,Cg:null,Xm:null};try{var G=v.getVideoTracks()[0];G&&(y.Xm=G,y.Vk=G.getCapabilities(),y.Cg=G.getSettings())}catch(w){}dc()||Wb()?a.parentNode&&null!==a.parentNode?(m||b(a,v,y),setTimeout(function(){a.play()},
100)):(document.body.appendChild(a),Pb(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";Pb(a);setTimeout(function(){a.play();m||b(a,v,y)},100)},80)):m||b(a,v,y)}}else k("VIDEO_NOTSTARTED")},700)}function q(){a.removeEventListener("loadeddata",q,!1);var r=a.play();Pb(a);"undefined"===typeof r?n():r.then(function(){n()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=v:
(a.src=window.URL.createObjectURL(v),a.videoStream=v);Pb(a);a.addEventListener("loadeddata",q,!1)}).catch(function(v){k(v)})}function Jc(a,b,d,e){if(a)if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){if(e&&e.video&&Wb()){var k=nc();0!==k[0]&&(12>k[0]||12===k[0]&&2>k[1])&&pc(e)}Fb(a,"autoplay");Fb(a,"playsinline");e&&e.audio?a.volume=0:Fb(a,"muted");Kc(a,b,function(){function m(n){if(0===n.length)d("INVALID_FALLBACKCONSTRAINTS");else{var q=n.shift();Kc(a,b,function(){m(n)},q)}}var v=
gc(e);m(v)},e)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}function cd(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function dd(){function a(M){M=M?qc.gf:1;P.width=M*I.width;
P.height=M*I.height;return P}function b(M){var R=M.length-1,ia=M[R];if("data:"===ia.substring(0,5))return ia;for(ia="";0<=R;--R){var pa=M[R],Ja="http"===pa.substring(0,4).toLowerCase();ia=pa+ia;if(Ja)break}return ia}function d(M,R,ia){return new Promise(function(pa){xa.Aj(R);Aa.$();Oa.isEnabled=!0;Ea.isEnabled=!1;Oa.Oa||(Oa.Oa=hc.instance({}));M.Vh()&&(Oa.Oa.oj(M.Vh()),xa.oa(Oa.Oa));M.set();Ea.isEnabled=!1;y();var Ja=jb.Sh(ia);setTimeout(function(){Oa.isEnabled=!1;xa.Aj(!1);pa(Ja)},1)})}function e(M,
R){ka.Wc=.5;return new Promise(function(ia){Ea.ac=M;Ea.isEnabled=!0;Ea.B=function(){var pa=Lc.instance(R());Ea.B=null;ia(pa)}})}function k(M,R){return new Promise(function(ia,pa){Na(R+M,function(Ja){Ja.error?pa("SKU_NOT_FOUND"):ia({Ym:Ja.intrinsic.mod+".json",Wm:Ja.intrinsic.mats})})})}function m(M,R){var ia=b([I.ca,I.ua,I.Td+"/"]);R=R.map(function(pa){return ia+pa});V.model={url:b([I.ca,I.ua,I.Ud+"/"+M]),Oc:R,Jb:!1,Ib:!1};return new Promise(function(pa){Pa.Bi(V.model,function(){T.isBusy=!1;pa()})})}
function v(M,R){if(!R)return M;M=M.slice(0);var ia=gb.Wl().map(function(pb){return pb.toLowerCase()}),pa;for(pa in R){var Ja=ia.indexOf(pa.toLowerCase());-1!==Ja&&(M[Ja]=R[pa])}return M}function n(M,R){return new Promise(function(ia,pa){T.set_model(M,function(){T.set_materials(R,function(){T.isBusy=!1;ia()})},function(){T.isBusy=!1;pa()})})}function q(){T.load_model=function(M,R,ia,pa,Ja,pb){if(T.isBusy)return!1;T.isBusy=!0;R=v(R,Ja);(V.model?n(M,R):m(M,R)).then(ia).catch(pb);return!0};T.set_offset=
function(M){O=M;Pa.te()};T.set_scale=function(M){D=M;Pa.ue()};T.set_rx=function(M){W=M;Pa.Oj()};T.switch_shadow=xa.Hg;T.switch_bgBlur=xa.Gg;T.set_zoom=xa.ug;T.is_viewer3D=function(){return ca===ea.Ha};T.switch_viewer3D=function(M,R){if(ca===ea.lc||ca===ea.mc||ca===ea.W&&!M||ca===ea.Ha&&M||Ea.isEnabled)return!1;if(ca===ea.ta)return lb!==ea.Ha||M?lb===ea.W&&M?(lb=ea.Ha,xa.oa(ka.Eb),xa.cb(1),R&&R(),!0):!1:(lb=ea.W,xa.oa(ka.Ga),xa.cb(0),R&&R(),!0);var ia=0,pa=-1,Ja=0;ca===ea.W?(ca=ea.lc,pa=I.Vo):ca===
ea.Ha&&(ca=ea.mc,pa=I.Yo);var pb=zc.mf();Ca=setInterval(function(){var kb=zc.mf();ia+=(kb-pb)/pa;1<=ia&&(ia=1,ca===ea.lc?(ca=ea.Ha,xa.oa(ka.Eb)):(ca=ea.W,xa.oa(ka.Ga)),R&&R(),clearInterval(Ca),Ca=null);var Lb=ca===ea.mc||ca===ea.W?1-I.To(ia):I.So(ia);xa.cb(Lb);ca!==ea.mc&&ca!==ea.lc||0!==Ja++%2||(xa.oa(ka.Yf),ka.Yf.io(Lb));pb=kb},.016);return!0};T.capture_image=function(M,R,ia,pa){Ea.ac=M;Ea.isEnabled=!0;"undefined"===typeof isAllocate&&(ia=!1);(pa="undefined"===typeof pa?!1:pa)&&xa.le(!1);f();Ea.B=
function(){xa.Xi(0);c.flush();var Ja=jb.Sh(ia);R(Ja);pa&&xa.le(!0)}};T.capture_detection=function(M,R){var ia=null===ja.Fb?ja.kb:ja.Zc;e(M,function(){return{od:ma.oc.clone(),Zf:gb.Yh(),Vf:gb.Wh(),background:ia.clone(),Oa:ua.Ia.Zh().clone(),Uf:Xa}}).then(R)};T.process_image=function(M){function R(){return new Promise(function(ub,ob){Ea.Rg=kb.updateLightInterval;e(kb.nSteps,ia).then(function(fb){Ea.Rg=3;fb?1>=fb.Yl().data[0]?(fb.I(),ob("FACE_NOT_FOUND")):d(fb,kb.isMask,!0).then(function(ed){xa.oa(ka.Ga);
fb.I();ub(ed)}):ob("CRITICAL")});y()})}function ia(){return{od:ma.oc.clone(),Zf:!1,Vf:!1,background:I.pq?!1:ja.kb.clone(!0),Oa:ua.Ia.Zh().clone()}}function pa(){return new Promise(function(ub,ob){k(kb.modelSKU,kb.glassesDBURL).then(function(fb){T.load_model(fb.Ym,fb.Wm,function(){ub()},kb.modelSKU,null,function(){ob("CANNOT_LOAD_MODEL")})}).catch(function(fb){ob(fb)})})}function Ja(){if(kb.image){var ub=kb.image;pb(ub);return Promise.resolve(ub)}return new Promise(function(ob){var fb=new Image;fb.onload=
function(){pb(fb);ob()};fb.src=kb.imageBase64})}function pb(ub){var ob=ub.width,fb=ub.height;if(ob!==I.width||fb!==I.height)Ba.Ld&&(Ba.element.width=ob,Ba.element.height=fb),K(ob,fb,kb.overSamplingFactor);Ba.Fh.drawImage(ub,0,0);f()}var kb=Object.assign({imageBase64:null,image:null,FOVHztDeg:0,nSteps:50,updateLightInterval:3,overSamplingFactor:2,modelSKU:"undef",glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",isMask:!0},M);if(I.Jc)throw Error("This feature cannot be called");var Lb=$a.FOVforced;
kb.FOVHztDeg&&($a.FOVforced=kb.FOVHztDeg);xa.oa(ka.Ga);return new Promise(function(ub,ob){return pa().then(Ja).then(function(){R().then(function(fb){$a.FOVforced=Lb;ub(fb)}).catch(ob)}).catch(ob).catch(ob)})};T.process_offlineRendering=function(M,R,ia,pa,Ja){Pa.In();pa&&(T.$j.drawImage(jb.ub(),0,0),jb.ub().parentNode.insertBefore(T.Gb,jb.ub()),T.Gb.setAttribute("class","jeefitMask"));T.set_model(R,function(){T.set_materials(ia,function(){setTimeout(function(){d(M,pa).then(Ja);Pa.Fn(pa?function(){jb.ub().parentNode.removeChild(T.Gb)}:
!1)},1)})})};T.serialize_detection=function(M){return M.bc()};T.unserialize_detection=function(M,R,ia){return Lc.Yc(M,R,ia)};T.do_instantDetection=function(M,R){Mc.m(ma.oc);Mc.start(M,R)};T.relieve_DOM=function(M,R){if(S.Vb)return!1;w(R||160);Fa=!1;fa&&clearTimeout(fa);fa=setTimeout(function(){w(I.ya);fa=!1;u()},M);return!0};T.switch_slow=function(M,R){if(S.Vb)return!1;"undefined"===typeof R&&(R=I.hk);fa&&(w(I.ya),u(),clearTimeout(fa),fa=!1);M?Fa=!1:u();w(M?R:I.ya);return!0};T.switch_deepSleep=function(M){if(ab===
M)return!1;ab=!1;T.switch_sleep(M);ab=M;return!0};T.switch_sleep=function(M,R){function ia(){T.isBusy=!1;M?(lb=ca,ca=ea.ta):(ca=lb,y())}if(S.Vb||ab||T.isBusy)return R?Promise.reject():null;if(M&&ca===ea.ta||!M&&ca!==ea.ta)return R?Promise.resolve(!1):!1;Ca&&(clearInterval(Ca),Ca=null);ca===ea.mc?(ca=ea.W,xa.oa(ka.Ga),xa.cb(0)):ca===ea.lc&&(ca=ea.Ha,xa.oa(ka.Eb),xa.cb(1));zb.stop();var pa=null;T.isBusy=!0;R?pa=bd(!M).then(ia):ia();return R?pa:!0};T.set_modelStandalone=function(M,R){xa.me(!1);Ac.instance({url:M.model,
Oc:M.materials,Jb:!1,Ib:!1,B:function(ia){Mb=[0,0,0];da=1;ta=E=A=0;Ya=I.Mc;T.ready&&Pa.ve();R&&R();G(ia);Pa.Eg();xa.me(!0)}})};T.start_rendering=Pa.Eg;T.update_material=function(M,R){gb&&gb.Ho(M,R)};T.set_model=function(M,R,ia){gb&&(M=b([I.ca,I.ua,I.Ud+"/",M]),gb.replace(M,function(){R&&R(gb.Zk())},ia))};T.set_tweaker=function(M,R){function ia(pa){T.fh(pa);R&&R()}"string"===typeof M?sa(I.ca+I.ua+I.Ao+"/"+M,ia):ia(M)};T.fh=function(M){M&&(M.preOffset&&(Mb=M.preOffset),M.preScale&&(da=M.preScale),M.rx&&
(A=M.rx),M.beginBendZ&&(E=M.beginBendZ),M.bendStrength&&(ta=M.bendStrength),M.maskBranchStartEnd&&(Ya=M.maskBranchStartEnd),T.ready&&Pa.ve())};T.set_materials=function(M,R){if(gb){var ia=b([I.ca,I.ua,I.Td+"/"]);M=M.map(function(pa){var Ja=pa;"string"===typeof pa&&(Ja=ia+pa,Ja=Ja.replace(/([^:])\/\//,"$1/"));return Ja});gb.vg(M,R)}}}function r(){ha.Ug(qc.Cl);Pa.Xc();I.Zb&&(Aa.reset(),ua.Ia.jh(Ba.ha),ua.Ia.ih());T.ready=!0;T.dd.forEach(function(M){M()});T.dd.splice(0)}function y(){Gb.reset();zb.stop();
Aa.$();H(0)}function G(M){gb&&(xa.zn(gb),gb.remove());xa.ck(M);gb=M}function w(M){Q=M;zb.update({ya:Q})}function H(M){oa=-1;Ea.isEnabled?oa=Ea.ac:Oa.isEnabled?oa=Oa.ac:Fa?(f(),oa=ca===ea.W?Gb.V():1):(oa=I.ad[0],f());Aa.$();if(!Oa.isEnabled)for(var R=0;R<oa;++R)Z.set("s63"),ja.Ff.M(),ja.kb.h(0),ma.Pc.h(1),X.l(!1,!1),t.wa(ja.Ff),Ea.isEnabled&&0===(R+1)%Ea.Rg&&g();Ea.isEnabled?(Ea.B&&Ea.B(),Ea.isEnabled=!1,c.flush(),ca!==ea.ta&&zb.pg(H)):(xa.animate(M),ja.lg&&va-ka.yi>ka.Dj&&I.Zb&&ca===ea.W&&(Aa.$(),
g(),Aa.ba()),Oa.isEnabled||(Fa&&(Gb.Hj(),R=Gb.Rh(1),Y=U(I.fk,R),I.Zb&&ca===ea.W&&(ka.Dj=U(I.Ai,R),ka.Wc=U(I.Pm,R),ka.Wc=Math.min(ka.Wc,.5))),va=M,ca!==ea.ta&&zb.pg(H)))}function u(){va=zc.mf();Fa=!0}function f(){var M=15;if(!Ba.Ld){var R=Ba.element.currentTime;M=R-rc;0>M&&(rc=R);if(1E3*M<I.No)return}Ba.ha.refresh();rc+=M;Ba.vd=M;Da=!0;Aa.$();Z.set("s0");ma.mg.M();ma.Pc.Kk(0);X.l(!0,!0);Z.set("s61");ja.kb.M();Ba.ha.h(0);X.l(!1,!1);null!==ja.Fb&&(Z.set("s62"),ja.Zc.o(),ja.kb.h(0),ja.Fb.h(1),X.l(!1,
!1))}function h(){ja.Sj=aa.instance({isPot:!0,isLinear:!0,isFloat:!1,url:I.ca+I.ua+I.Oo});var M={isPot:!1,isLinear:!0,isFloat:!1,width:P.width,height:P.height};ja.kb=aa.instance(M);ja.Zc=aa.instance(M);S.Ej.push(ja.kb,ja.Zc);ja.Ff=aa.instance({isPot:!0,isFloat:!1,width:t.Uh()});I.Qd&&(rb=aa.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(I.Tf||-1!==I.Sf.indexOf("//")?"":I.ca+I.ua)+I.Sf}))}function B(){function M(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0,0,0,0,
0,0,0,0,0])}}var R={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};ma.Pc=Nc.instance(M());ma.mg=aa.instance(M());ma.oc=aa.instance(M());ma.Zd=Nc.instance(M());ma.af=aa.instance(R);R={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0])};ma.Vg=aa.instance(R);ma.xe=aa.instance(R);ka.$d=aa.instance({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function J(M){ja.lg=M;if(Da){Da=!1;Z.set("s69");ma.Vg.M();ma.xe.h(2);
var R=U(I.Mk,Gb.Rh(.5));Z.H("u67",R);ma.mg.h(1);Z.H("u68",1E3*Ba.vd);X.l(!1,!1);Z.set("s70");ma.xe.o();ma.Vg.h(0);X.l(!1,!1)}M.h(0);ma.Pc.kj(1);c.viewport(0,0,1,1);Z.set("s64");Z.Ag("u47",Oc.get(0));X.l(!1,!1);Z.set("s65");c.viewport(1,0,2,1);X.l(!1,!1);ma.af.M();Z.set("s66");Z.N("u58",I.Ie[0]*Y,I.Ie[1]);ma.Pc.h(0);ma.Zd.h(1);X.l(!1,!1);Z.set("s67");ma.Zd.kj(1);ma.af.h(0);ma.xe.h(2);ma.Pc.h(3);X.l(!1,!1);Z.set("s68");ma.Zd.h(0);ma.oc.o();X.l(!1,!1)}function g(){ka.yi=va;ka.$d.M();Z.set(ba.ni?"s72":
"s71");ja.lg.h(0);X.l(!1,!1);ua.Ia.Rj(Ba.ha,ka.$d,ka.Wc)}function p(){return new Promise(function(M){var R=I.ca,ia=I.$c.split("://").shift();if("http"===ia||"https"===ia)R="";R+=I.$c;"json"!==R.split(".").pop()&&(R+=I.neuralNetworkPath);sa(R,function(pa){pa=JSON.parse(pa);if(pa.exportData){var Ja=pa.exportData;ba.ab=ba.ab||Ja.rotationEulerAnglesFactors;ba.Ac=ba.Ac||Ja.deformScaleXFactor;ba.ra=ba.ra||Ja.translationScalingFactors;ba.Eh=Ja.dyOffset||0;ba.Ch=Ja.dsOffset||0;ba.ni=Ja.isLThetaSplitCosSin||
!1}t=new cc({Lc:pa.layers,Xd:"gpuRawAvg",Wd:J});M()})})}function l(M){a(M);M=I.width;var R=I.height;N.rb[0]=1;N.rb[1]=M/R;Oc.m({Yd:I.scanOverlapFactors,Ii:I.scanNScaleLevels,Z:M,Bf:R,cj:I.scanScale0Factor,ra:ba.ra,qg:!0});sc=M>R?[M/R,1]:[1,R/M];S.Ma=!0}function C(){Z.j("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:N.rb},{type:"1f",name:"u43",value:ba.Ac},{type:"1f",name:"u45",value:ba.Eh},{type:"1f",name:"u44",value:ba.Ch}]);Z.j("s64",[{type:"1i",
name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u51",value:I.yo},{type:"1f",name:"u52",value:I.gl},{type:"3f",name:"u48",value:[ba.ra[0]*N.rb[0],ba.ra[1]*N.rb[1],ba.ra[2]]},{type:"3f",name:"u49",value:[I.nc[0][0],I.nc[1][0],I.nc[2][0]]},{type:"3f",name:"u50",value:[I.nc[0][1],I.nc[1][1],I.nc[2][1]]}]);Z.j("s65",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u55",value:I.qn},{type:"3f",name:"u53",value:ba.ab},{type:"3f",name:"u54",value:I.Gj},{type:"1f",
name:"u56",value:I.Dl}]);Z.j("s66",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u57",value:1},{type:"2f",name:"u58",value:I.Ie},{type:"1f",name:"u59",value:I.Gn},{type:"1f",name:"u60",value:I.pn}]);Z.j("s67",[{type:"1i",name:"u57",value:1},{type:"1i",name:"u61",value:0},{type:"1i",name:"u62",value:2},{type:"1i",name:"u63",value:3},{type:"2f",name:"u42",value:N.rb},{type:"1f",name:"u65",value:t.Uh()},{type:"2f",name:"u64",value:I.Cn}]);Z.j("s68",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u66",
value:I.Jn}]);Z.j("s69",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1i",name:"u62",value:2},{type:"3f",name:"u53",value:ba.ab},{type:"3f",name:"u54",value:I.Gj}]);Z.j("s70",[{type:"1i",name:"u62",value:0},{type:"2f",name:"u70",value:I.zo},{type:"2f",name:"u71",value:I.Hn}]);Z.j("s71",[{type:"1i",name:"u46",value:0}]);Z.j("s72",[{type:"1i",name:"u46",value:0}]);Z.j("s62",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u72",value:1}])}function K(M,R,ia){var pa=0===ia,Ja=a(pa);
I.width=M;I.height=R;l(pa);C();S.Ej.forEach(function(pb){pb.resize(M,R)});ia=pa?1:ia;ha.resize(Ja.width*ia,Ja.height*ia);Pa.Xc();eb.Bg(Ba.element.videoWidth||Ba.element.width,Ba.element.videoHeight||Ba.element.height);eb.Ig();eb.Bj()}function L(){zb.stop();S.hb&&(clearTimeout(S.hb),S.hb=null);if(!S.Vb){var M=S.width,R=S.height;if(I.width===M&&I.height===R)y();else if(ca!==ea.W&&ca!==ea.Ha)S.hb=setTimeout(L,I.aj);else{var ia="undefined"===typeof wb?!1:wb.get_mode(),pa=ca;ca=ea.ta;S.Vb=!0;Ea.isEnabled=
!0;Ea.B=function(){Ea.isEnabled=!1;S.Vb=!1;u();w(I.ya);fa&&clearTimeout(fa);fa=!1;ca=pa};K(M,R,0);y();ca===ea.Ha&&(ca=ea.W,T.switch_viewer3D(!0,!1));ia&&wb.switch_mode(ia)}}}var A,E,N={rb:[-1,-1]},x=null,z=[.5,0,0,.5],P={width:-1,height:-1},S={width:-1,height:-1,hb:null,Vb:!1,Ma:!1,Ej:[]},la=[0,I.ae[1],I.ae[2]],ba={ab:[-I.ab[0],-I.ab[1],I.ab[2]],Ac:I.Ac,ra:I.ra,Eh:0,Ch:0,ni:!1},Q=I.ya,fa=null,t=null;a(!0);var O=[0,0,0],D=1,W=0,ja={kb:null,Zc:null,Ff:null,Sj:null,lg:null,Fb:null},ma={mg:null,oc:null,
Zd:null,af:null,Vg:null,xe:null},va=0,Da=!1,ka={Ga:null,Eb:null,Yf:null,yi:0,Dj:I.Ai[1],Wc:.1,$d:null},na=!1,Fa=!0,Y=1,oa=-1,ea={ta:-1,W:0,Ha:1,lc:2,mc:3},ca=ea.W,Ca=null,lb=ea.W,ab=!1,Ea={isEnabled:!1,ac:1,Rg:3,B:null},Oa={isEnabled:!1,Oa:null,ac:0},rb=null,sc=-1,Ab=!1,Hb=!1,Qb=!1,ic=[0,0,0],Rb=1,Xb,jc,Ua,Mb=[0,0,0],da=1,ta=E=A=0,Ya=I.Mc,Ka=[0,0,0],Xa={scale:1,offsetX:0,offsetY:0},rc=0,Pa={m:function(){Z.tc([{id:"s61",name:"_",u:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u40*a0;}",
K:["a0"],R:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u40"],precision:"lowp"},{id:"s63",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u43,u44,u45;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5,.5);varying vec2 vv0;void main(){vec4 b=texture2D(u41,h);vec2 c=b.gb,a=b.a*u42;vec4 l=texture2D(u41,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u43),1.);a*=n,a*=1.+u44;vec2 o=a0*.5;float d=texture2D(u41,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5,-.5)*a*(g*vec2(0.,u45)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",
K:["a0"],R:[2],i:"u1 u41 u42 u43 u44 u45".split(" "),precision:"lowp"},{id:"s64",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46,u41;uniform vec3 u47,u48,u49,u50;uniform float u51,u52;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u46,vec2(.625,.625)),k=texture2D(u46,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u52;vec4 a=texture2D(u41,f);m?a.r=2.:a.r>u51?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u47);else{float n=dot(e,texture2D(u46,vec2(.875,.875))),o=dot(e,texture2D(u46,vec2(.125,.625))),p=dot(e,texture2D(u46,vec2(.375,.625))),b=texture2D(u41,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u41,g).a;vec3 s=mix(u49,u50,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u48*s*a.a;}gl_FragColor=a;}",
i:"u46 u41 u47 u51 u48 u52 u49 u50".split(" ")},{id:"s65",name:"_",g:"uniform sampler2D u46,u41;uniform vec3 u53,u54;uniform vec2 u55;uniform float u56;const vec4 v=vec4(1.,1.,1.,1.),f=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u41,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u46,vec2(.125,.125)),e),a=smoothstep(u55.x,u55.y,m);vec4 n=texture2D(u41,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u46,vec2(.125,.875))),q=dot(e,texture2D(u46,vec2(.375,.875))),r=dot(e,texture2D(u46,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u54+s*u53;float c=texture2D(u41,i).r,d=b.z*u56;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u46 u41 u55 u53 u54 u56".split(" ")},{id:"s66",name:"_",g:"uniform sampler2D u41,u57;uniform vec2 u58;uniform float u59,u60;const vec4 f=vec4(1.,1.,1.,1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 c=texture2D(u41,vv0),d=texture2D(u57,vv0),o=texture2D(u41,g),j=texture2D(u57,g);float k=pow(j.a,u60),l=mix(u58.x,u58.y,1.-k),a=step(.34,vv0.x)*step(vv0.x,.66);vec4 m=mix(h,i,a),b=max(l*f,m);b*=mix(f,u59*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),a);vec4 n=c-d;gl_FragColor=n*b;}",
i:["u41","u57","u58","u59","u60"],precision:"highp"},{id:"s67",name:"_",g:"uniform sampler2D u57,u61,u62,u63;uniform vec2 u42,u64;uniform float u65;const vec4 u=vec4(1.,1.,1.,1.);const vec2 g=vec2(.25,.5),h=vec2(.75,.5),f=vec2(.16,.5),i=vec2(.5,.5);varying vec2 vv0;void main(){float j=step(.33,vv0.x)*step(vv0.x,.66),v=step(.66,vv0.x);vec4 k=texture2D(u63,i);float a=k.a;a*=texture2D(u62,g).a,a*=texture2D(u62,h).a;vec4 l=texture2D(u57,vv0),m=texture2D(u61,vv0),b=l+m;b.a=mix(b.a,a,j);vec4 c=texture2D(u57,f),n=texture2D(u63,f);vec2 o=c.gb,p=n.gb;float q=c.a;vec2 d=u65*abs(o-p)/(u42*q);float r=max(d.x,d.y),s=smoothstep(u64.x,u64.y,r);vec4 t=texture2D(u63,vv0);gl_FragColor=mix(b,t,s);}",
i:"u57 u61 u62 u63 u42 u65 u64".split(" "),precision:"highp"},{id:"s68",name:"_",g:"uniform sampler2D u41;uniform float u66;const vec4 g=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u41,vv0);float b=step(vv0.x,.33),c=texture2D(u41,f).g;a.a+=b*a.a*u66*abs(sin(c)),gl_FragColor=a;}",i:["u41","u66"],precision:"highp"},{id:"s69",name:"_",g:"uniform sampler2D u41,u62,u46;uniform vec3 u53,u54;uniform float u67,u68;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(1.,1.,1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u41,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u62,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u46,k)),o=dot(e,texture2D(u46,l)),p=dot(e,texture2D(u46,m));vec3 q=mix(i,u53,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u54+b-r,a)/u68;vec4 s=mix(vec4(b,0.),j,vec4(u67*g,0.));gl_FragColor=s;}",
i:"u41 u62 u46 u67 u68 u53 u54".split(" "),precision:"highp"},{id:"s70",name:"_",g:"uniform sampler2D u62;uniform vec2 u70,u71;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u70.x,u71.x,a),d=mix(u70.y,u71.y,a);vec3 b=texture2D(u62,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u62","u70","u71"],precision:"highp"},{id:"s71",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415;void main(){float a=dot(texture2D(u46,vec2(.375,.375)),e),b=dot(texture2D(u46,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u46,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u46,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",
i:["u46"]},{id:"s72",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u46,vec2(.875,.375)),e),c=dot(texture2D(u46,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u46,vec2(.625,.375)),e),a=dot(texture2D(u46,vec2(.125,.375)),e),h=dot(texture2D(u46,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}",i:["u46"]},{id:"s62",name:"_",
g:"uniform sampler2D u1,u72;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u72);}",
i:["u1","u72"]}]);B();zb.m({mi:!1,ya:Q});Gb.m({ag:0,n:I.ad[1]-I.ad[0]+1,zi:I.ad[0]});T.set_videoRotation=function(M){$a.rotate=M;T.ready&&(eb.Bg(Ba.element.videoWidth,Ba.element.videoHeight),eb.Ig())};T.set_viewRotation=function(){};T.set_LUT=function(M){return new Promise(function(R){M?aa.instance({url:M,isFloat:!1,isFlipY:!1,B:function(ia){ja.Fb=ia;Pa.Xc();R()}}):(ja.Fb=null,Pa.Xc(),R())})};T.resize=function(M,R,ia){T.ready&&(S.hb&&(clearTimeout(S.hb),S.hb=null),zb.stop(),ia=ia?qc.gf:1,S.width=
M*ia,S.height=R*ia,S.hb=setTimeout(L,I.aj))};return p()},vo:function(){h();l(!0);C();Pa.Bj();q();T.cd.forEach(function(M){M()});T.cd.splice(0);V.model&&!T.isBusy?Pa.Bi(V.model):I.Jc||r();return Promise.resolve()},Xl:function(){return P},v:function(){zb.v();return new Promise(function(M){T.switch_sleep(!0,!0).finally(function(){t&&t.v();ha.v();jb.v();c&&(c=null);t=null;I.Tf=!1;gb=null;Fa=!0;Y=1;oa=-1;ca=ea.W;Ca=null;lb=ea.W;Object.assign(Ba,Pc);Object.assign(I,Qc);M()}).catch(function(R){throw Error(R);
})})},Xc:function(){xa.ij(ma.oc,null===ja.Fb?ja.kb:ja.Zc,ka.$d,ja.Sj)},Ul:function(){return Xa},qj:function(M){Xa=M},te:function(){Ka[0]=O[0]-Xa.offsetX;Ka[1]=O[1]+Xa.offsetY;Ka[2]=O[2];xa.Pn(la,Mb,Ka)},ue:function(){xa.Qn(D*I.ln,da,Xa.scale)},Oj:function(){xa.Rn(W+A)},Eo:function(){xa.Nn(I.hd+E,I.Lb+ta)},Go:function(){xa.On(Ya)},ve:function(){Pa.te();Pa.ue();Pa.Oj();Pa.Eo();Pa.Go()},In:function(){zb.stop();Ca&&(clearInterval(Ca),Ca=null);Oa.isEnabled=!0;Oa.ac=0;Ab=xa.Tl();Hb=gb.Yh();Qb=gb.Wh();Rb=
da;ic=Mb;Xb=Ya;jc=E;Ua=ta;Ea.isEnabled=!1;xa.le(!1)},Fn:function(M){function R(){2===++ia&&(Oa.isEnabled=!1,da=Rb,Mb=ic,Ya=Xb,E=jc,ta=Ua,Pa.ve(),xa.oa(Ab),y(),M&&M())}var ia=0;ca===ea.lc?ca=ea.Ha:ca===ea.mc&&(ca=ea.W);xa.cb(ca===ea.W?0:1);gb.replace(Hb,R);gb.vg(Qb,R);Pa.Xc();xa.le(!0)},Bj:function(){var M=Math.tan(Ba.Pb/2);xa.hj({jf:I.jf/M,Kn:M,on:Ba.Si,Ea:I.Ea,$f:I.$f,Vj:N.rb,Zj:I.Ro,Fc:I.Fc,Af:I.Af,yf:I.yf,zf:I.zf,Mc:Ya,Je:I.Je,We:I.We,og:I.og,ic:I.ic,po:I.vj,qo:I.wj,ke:I.ke,jc:I.jc,pd:I.pd,Ze:I.Ze,
Ye:I.Ye,Xe:I.Xe,Me:I.Me,Le:I.ca+I.ua+I.Le,hd:I.hd+E,Lb:I.Lb+ta,wf:I.wf,$g:I.$g,Zg:I.Zg,Ae:I.Ae,Xo:I.Wo,ze:Ba.ze,Qd:I.Qd,Rm:rb,Pd:I.Pd,Rd:I.Rd,Rf:I.Rf,Qm:sc,Jg:I.Jg})},Wk:function(){var M=$a.De,R=$a.Ce,ia=1/Math.tan(Ba.Pb/2),pa=jb.Y()/jb.O();Ba.Si=[ia,0,0,0,0,ia/pa,0,0,0,0,-(R+M)/(R-M),-1,0,0,-2*M*R/(R-M),0];Ba.ze=1/Math.tan(I.Uo*Math.PI/360)/ia},Bg:function(M,R){x=[.5,.5];M=R/M;R=jb.Y()/jb.O();90===Math.abs($a.rotate)&&(M=1/M);M>R?x[1]*=R/M:x[0]*=M/R;z[0]=0;z[1]=0;z[2]=0;z[3]=0;switch($a.rotate){case 0:z[0]=
x[0];z[3]=x[1];break;case 180:z[0]=-x[0];z[3]=-x[1];break;case 90:z[1]=x[0];z[2]=-x[1];break;case -90:z[1]=-x[0],z[2]=x[1]}I.oi||(z[0]*=-1,z[1]*=-1);R=$a.FOVforced;Ba.Pb=2*Math.atan(2*x[0]*Math.tan((R?R:1<M?$a.FOVmobile:$a.FOVdesktop)*Math.PI/180/2));Pa.Wk()},Ig:function(){Z.j("s61",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u40",value:z}])},Ef:function(M,R){return new Promise(function(ia,pa){Pa.pm(M,R);Promise.all([Pa.m(),Pa.qm()]).then(function(){Pa.gi();ia()}).catch(function(){T.qb&&T.qb("GL_INCOMPATIBLE",
"Cannot init JEELIZVTO");pa()})})},pm:function(M,R){T.Hb=document.createElement("canvas");T.Gb=document.createElement("canvas");T.Gb.width=I.width;T.Gb.height=I.height;T.$j=T.Gb.getContext("2d");T.replace_video=function(ia){Ba.element=ia;Ba.Pg.ka=Ba.element;return!0};T.sc=T.Hb.getContext("2d");T.capture_background=function(ia,pa){ia="undefined"===typeof ia?M:ia;pa="undefined"===typeof pa?R:pa;T.Hb.width=ia;T.Hb.height=pa;var Ja=ia/pa,pb=0,kb=0;if(M/R>Ja){var Lb=R*Ja;Ja=R;pb=Math.round((M-Lb)/2)}else Lb=
M,Ja=M/Ja,kb=Math.round((R-Ja)/2);T.sc.save();T.sc.translate(ia,0);T.sc.scale(-1,1);T.sc.drawImage(Ba.element,pb,kb,Lb,Ja,0,0,ia,pa);T.sc.restore();ia=document.createElement("canvas");ia.width=T.Hb.width;ia.height=T.Hb.height;ia.getContext("2d").drawImage(T.Hb,0,0);return ia}},gi:function(){window.CanvasListeners&&(wb.init({qa:jb.ub()}),T.init_listeners=Pa.gi,T.add_listener=wb.add_listener,T.remove_listener=wb.remove_listener,T.animate_swipe=wb.animate_swipe,T.switch_modeInteractor=wb.switch_mode,
T.get_modeInteractor=wb.get_mode,wb.add_listener("move",function(M,R){ca===ea.W&&(I.Sm&&(Xa.offsetX-=R[0]*I.Di,Xa.offsetX=Math.min(Math.max(Xa.offsetX,-I.Sd),I.Sd)),Xa.offsetY-=R[1]*I.Di,Xa.offsetY=Math.min(Math.max(Xa.offsetY,-I.Sd),I.Sd),Pa.te())},!0).add_listener("pinch",function(M,R){ca===ea.W&&(Xa.scale+=R*I.Tm,Xa.scale=Math.min(Math.max(Xa.scale,I.Ei[0]),I.Ei[1]),Pa.ue())},!0))},qm:function(){return new Promise(function(M,R){ha.m({Jd:!1,Uk:!1,expand:!1,qa:jb.ub(),Qb:jb,onload:function(){ka.Eb=
hc.instance({Kb:I.ca+I.ua+bb.Po,vc:I.ca+I.ua+bb.Qo,uc:bb.Tj,wc:bb.Uj});I.Zb?(ka.Ga=hc.instance({}),ua.Ia.oa(ka.Ga)):ka.Ga=ka.Eb;xa.oa(ka.Ga);ka.Yf=I.Zb?fd.instance({Om:ka.Ga,Mm:ka.Eb}):ka.Eb;M()}})||R()})},Eg:function(){na||(na=!0,Pa.ve(),r(),va=0,I.Jc&&y())},Bi:function(M,R){M=Ac.instance({Ne:function(){Pa.Eg();R&&R()},url:M.url,Oc:M.Oc,Jb:M.Jb,Ib:M.Ib});G(M)},Cj:function(){if(I.Zb){var M=Object.assign({},bb,{Ab:b([I.ca,I.ua,bb.Ab])});ua.Ia.ib(M)}}};return Pa}function gd(){return new Promise(function(a,
b){T.Fe&&T.Fe();Ba.Ld=!1;var d={width:{min:$a.minWidth,max:$a.maxWidth,ideal:$a.idealWidth},height:{min:$a.minHeight,max:$a.maxHeight,ideal:$a.idealHeight},facingMode:{ideal:"user"}},e={video:d,audio:!1};Ba.rh=e;d&&-1!==Ba.deviceId&&oc(e,Ba.deviceId);Jc(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):!1,function(k){T.Ge&&T.Ge(k);Rc(k).then(a).catch(b)},function(k){T.qb&&T.qb("WEBCAM_UNAVAILABLE",k);b()},e)})}function Rc(a){Ba.element=a;a=Ba.element.videoWidth||
Ba.element.width;var b=Ba.element.videoHeight||Ba.element.height;Ba.Pg={ka:Ba.element,isPot:!1,isFloat:!1,isFlipY:!0};Ba.ha=aa.instance(Ba.Pg);eb.Bg(a,b);return eb.Ef(a,b).then(function(){eb.Ig();return eb.vo()}).catch(function(){return Promise.reject()})}function hd(){var a=document.createElement("canvas");a.width=I.width;a.height=I.height;Ba.Fh=a.getContext("2d");Ba.Ld=!0;return Rc(a)}function Yb(a){return 3===arguments.length?this.sb(arguments):this.set(a)}function Sc(a,b){b=Math.floor(b);a.r=
(b>>16&255)/255;a.X=(b>>8&255)/255;a.b=(b&255)/255}function id(a,b){function d(n){void 0!==n&&1>parseFloat(n)&&console.warn("JETHREE.Color: Alpha component of "+b+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var k=e[2];switch(e[1]){case "rgb":case "rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){a.r=Math.min(255,parseInt(e[1],10))/255;a.X=Math.min(255,parseInt(e[2],10))/255;a.b=Math.min(255,parseInt(e[3],10))/255;d(e[5]);return}if(e=
/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){a.r=Math.min(100,parseInt(e[1],10))/100;a.X=Math.min(100,parseInt(e[2],10))/100;a.b=Math.min(100,parseInt(e[3],10))/100;d(e[5]);return}break;case "hsl":case "hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){k=parseFloat(e[1])/360;var m=parseInt(e[2],10)/100,v=parseInt(e[3],10)/100;d(e[5]);a.Mn(k,m,v);return}}}else if(e=/^#([A-Fa-f0-9]+)$/.exec(b)){e=e[1];k=e.length;if(3===k){a.r=
parseInt(e.charAt(0)+e.charAt(0),16)/255;a.X=parseInt(e.charAt(1)+e.charAt(1),16)/255;a.b=parseInt(e.charAt(2)+e.charAt(2),16)/255;return}if(6===k){a.r=parseInt(e.charAt(0)+e.charAt(1),16)/255;a.X=parseInt(e.charAt(2)+e.charAt(3),16)/255;a.b=parseInt(e.charAt(4)+e.charAt(5),16)/255;return}}b&&0<b.length&&(e=jd[b],void 0!==e?Sc(a,e):console.warn("JETHREE.Color: Unknown color "+b))}function tc(a,b,d,e){this.C=a||0;this.D=b||0;this.F=d||0;this.P=void 0!==e?e:1}function Tc(a,b,d){var e=b.C,k=b.D,m=b.F;
b=b.P;var v=d.C,n=d.D,q=d.F;d=d.P;a.C=e*d+b*v+k*q-m*n;a.D=k*d+b*n+m*v-e*q;a.F=m*d+b*q+e*n-k*v;a.P=b*d-e*v-k*n-m*q;return a}function Zb(a,b){this.x=a||0;this.y=b||0}function Va(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0}function Uc(a,b){var d=a.x,e=a.y,k=a.z;a.x=e*b.z-k*b.y;a.y=k*b.x-d*b.z;a.z=d*b.y-e*b.x}function $b(a,b,d,e){this.C=a||0;this.D=b||0;this.F=d||0;this.Ra=e||$b.Wj}function Bc(a,b){this.min=void 0!==a?a:new Va(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new Va(-Infinity,-Infinity,
-Infinity)}function uc(a){return(new Va).ed(a.min,a.max).Ca(.5)}function kd(a,b){a.min.min(b);a.max.max(b)}function ac(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Vc(a,b,d){var e=b.elements,k=d.elements;d=a.elements;b=e[0];var m=e[4],v=e[8],n=e[12],q=e[1],r=e[5],y=e[9],G=e[13],w=e[2],H=e[6],u=e[10],f=e[14],h=e[3],B=e[7],J=e[11];e=e[15];var g=k[0],p=
k[4],l=k[8],C=k[12],K=k[1],L=k[5],A=k[9],E=k[13],N=k[2],x=k[6],z=k[10],P=k[14],S=k[3],la=k[7],ba=k[11];k=k[15];d[0]=b*g+m*K+v*N+n*S;d[4]=b*p+m*L+v*x+n*la;d[8]=b*l+m*A+v*z+n*ba;d[12]=b*C+m*E+v*P+n*k;d[1]=q*g+r*K+y*N+G*S;d[5]=q*p+r*L+y*x+G*la;d[9]=q*l+r*A+y*z+G*ba;d[13]=q*C+r*E+y*P+G*k;d[2]=w*g+H*K+u*N+f*S;d[6]=w*p+H*L+u*x+f*la;d[10]=w*l+H*A+u*z+f*ba;d[14]=w*C+H*E+u*P+f*k;d[3]=h*g+B*K+J*N+e*S;d[7]=h*p+B*L+J*x+e*la;d[11]=h*l+B*A+J*z+e*ba;d[15]=h*C+B*E+J*P+e*k;return a}function Cc(a,b,d,e,k,m){this.a=
a;this.b=b;this.c=d;this.Da=e instanceof Va?e:new Va;this.ye=Array.isArray(e)?e:[];this.color=k instanceof Yb?k:new Yb;this.Xg=Array.isArray(k)?k:[];this.$b=void 0!==m?m:0}function ld(a,b,d){var e=new XMLHttpRequest;e.open("GET",a,!0);var k=e.withCredentials=!1;e.onreadystatechange=function(){404!==e.status||k||(k=!0,d&&d(404));if(4===e.readyState&&200===e.status){var m=null;try{m=JSON.parse(e.responseText)}catch(v){d&&d(-1)}b&&m&&b(m)}};e.onerror=function(){d&&d(0)};e.send()}function Dc(a,b,d){"object"===
typeof a?b(a):ld(a,b,d)}function md(a){return new Promise(function(b,d){Dc(a,b,d)})}function nd(a,b){for(var d=new Va,e=new Va,k=0,m=b.length;k<m;k++){var v=b[k],n=a[v.a],q=a[v.b],r=a[v.c];n&&q&&r&&(d.gb(r,q),e.gb(n,q),Uc(d,e),0!==d.Mf()&&(d.normalize(),v.Da.L(d)))}}function od(a,b){for(var d=Array(a.length),e=0,k=a.length;e<k;++e)d[e]=new Va;e=new Va;k=new Va;for(var m=0,v=b.length;m<v;++m){var n=b[m],q=a[n.a],r=a[n.b],y=a[n.c];q&&r&&y&&(e.gb(y,r),k.gb(q,r),Uc(e,k),d[n.a].add(e),d[n.b].add(e),d[n.c].add(e))}e=
0;for(a=a.length;e<a;++e)d[e].normalize();a=0;for(e=b.length;a<e;++a)n=b[a],k=n.ye,m=d[n.a],v=d[n.b],n=d[n.c],m&&v&&n&&(3===k.length?(k[0].L(m),k[1].L(v),k[2].L(n)):(k[0]=m.clone(),k[1]=v.clone(),k[2]=n.clone()));return d}function pd(a,b,d,e){function k(C){p.L(b[C]);l.L(p);var K=n[C];J.L(K);J.sub(p.Ca(p.rd(K))).normalize();var L=l.x,A=l.y,E=l.z,N=K.x,x=K.y;K=K.z;g.x=A*K-E*x;g.y=E*N-L*K;g.z=L*x-A*N;L=0>g.rd(q[C])?-1:1;v[4*C]=J.x;v[4*C+1]=J.y;v[4*C+2]=J.z;v[4*C+3]=L}for(var m=a.length,v=new Float32Array(4*
m),n=Array(m),q=Array(m),r=0;r<m;r++)n[r]=new Va,q[r]=new Va;var y=new Va,G=new Va,w=new Va,H=new Zb,u=new Zb,f=new Zb,h=new Va,B=new Va;e.forEach(function(C){var K=C.a,L=C.b;C=C.c;y.L(a[K]);G.L(a[L]);w.L(a[C]);H.L(d[K]);u.L(d[L]);f.L(d[C]);var A=G.x-y.x,E=w.x-y.x,N=G.y-y.y,x=w.y-y.y,z=G.z-y.z,P=w.z-y.z,S=u.x-H.x,la=f.x-H.x,ba=u.y-H.y,Q=f.y-H.y,fa=1/(S*Q-la*ba);h.set((Q*A-ba*E)*fa,(Q*N-ba*x)*fa,(Q*z-ba*P)*fa);B.set((S*E-la*A)*fa,(S*x-la*N)*fa,(S*P-la*z)*fa);n[K].add(h);n[L].add(h);n[C].add(h);q[K].add(B);
q[L].add(B);q[C].add(B)});var J=new Va,g=new Va,p=new Va,l=new Va;e.forEach(function(C){k(C.a);k(C.b);k(C.c)});return v}function Wc(a,b,d,e){return Math.sqrt((a-d)*(a-d)+(b-e)*(b-e))}var V={uh:!0,wp:!1,xp:!1,fl:!1,th:!1,vp:!1,Pa:!1,Jd:!1,gq:!1,ca:"",Gi:"",Ck:700,Bk:200,vh:!1,Jo:!1,Ko:!1,Io:!1,ik:3,Nb:!1,gh:!0,Kb:"images/backgrounds/interior2.jpg",vc:"images/backgrounds/interior_light.jpg",Ek:[256,256,512,512],uc:2.1,wc:8,Dk:[64,128,256,256],wm:[60,96,160,250],vm:[8,12,18,40],Qc:2.2,ig:1,Oe:300,kh:500,
Pe:50,Ok:0,Pk:0,lp:45,np:1,mp:1E3,lh:20,Zo:10,$o:10,ap:5,kn:.1,Mi:20,Pi:100,Qi:100,jn:-Math.PI/3,hn:Math.PI/3,Oi:0,Fj:0,vd:[40,32,16,16],gk:[0,.87,.92,.9],en:2,an:100,ea:!1,jk:16,kk:.4,mk:[.72,.73,.72,.74],xk:1.2,uk:[.5,.5,.5,1],zk:140,yk:280,Ak:1.2,nk:20,pk:40,wk:[6,9,9,12],tk:[.03,.02,.02,.018],sk:[.35,.35,.4,.5],qk:[.2,.2,.2,.2],lk:[.1,.15,.15,.15],vk:[200,200,150,120],rk:[1,2,3,5],ro:1.1,Aq:[.25,.5,1,2],Bq:256,zq:256,yq:200,so:[40,80,200,500],to:[35,45,80,120],$k:!0,al:"CCW"},Xc={},Z=function(){function a(x,
z,P){z=x.createShader(z);x.shaderSource(z,P);x.compileShader(z);return x.getShaderParameter(z,x.COMPILE_STATUS)?z:null}function b(x,z,P){z=a(x,x.VERTEX_SHADER,z);P=a(x,x.FRAGMENT_SHADER,P);x===c&&n.push(z,P);var S=x.createProgram();x.attachShader(S,z);x.attachShader(S,P);x.linkProgram(S);return S}function d(x){return["float","sampler2D","int"].map(function(z){return"precision "+x+" "+z+";\n"}).join("")}function e(x,z){z.T=z.T?!0:!1;if(!z.T){z.u=z.u||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
z.K=z.K||["a0"];z.R=z.R||[2];z.precision=z.precision||w;z.id=y++;void 0!==z.dj&&(z.dj.forEach(function(la,ba){z.g=z.g.replace(la,z.Fa[ba])}),z.dj.splice(0));z.Yg=0;z.R.forEach(function(la){z.Yg+=4*la});var P=d(z.precision);z.na=b(x,P+z.u,P+z.g);z.A={};z.i.forEach(function(la){z.A[la]=x.getUniformLocation(z.na,la)});z.attributes={};z.va=[];z.K.forEach(function(la){var ba=x.getAttribLocation(z.na,la);z.attributes[la]=ba;z.va.push(ba)});if(z.s){x.useProgram(z.na);r=z;q=z.id;for(var S in z.s)x.uniform1i(z.A[S],
z.s[S])}z.Ma=!0}}function k(x){vb.tj(N);q!==x.id&&(N.J(),q=x.id,r=x,c.useProgram(x.na),x.va.forEach(function(z){0!==z&&c.enableVertexAttribArray(z)}))}function m(x,z,P){e(x,z,P);x.useProgram(z.na);x.enableVertexAttribArray(z.attributes.a0);q=-1;return r=z}function v(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],s:{u1:0}}}var n=[],q=-1,r=null,y=0,G=!1,w="highp",H=["u1"],u=["u0"],f={u1:0},h={u0:0},B={u1:0,u2:1},J={u1:0,u3:1},g=["u1","u3","u4"],
p={u5:0},l=["u6","u7","u8","u9"],C={u6:0,u7:1},K={s0:v(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:H,s:f,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],s:B},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],s:f,T:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:H,s:f},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],s:B},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:H,s:f},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:H,s:f},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],s:h},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],s:h},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:H,s:f},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],s:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],s:f},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:H,s:f,T:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:H,s:f,T:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],s:f},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:u,s:h,T:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:u,s:h},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:u,s:h},
s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:u,s:h},s20:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:u,s:h},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:u,s:h,T:!0},s22:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u16","u17"],s:{u0:0,u16:1},T:!0},s23:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u18"],s:f},s24:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],s:Object.assign({u19:2},
C),T:!0},s25:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:l,s:C},s26:{g:"uniform float u8,u9;uniform vec2 u20,u21;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=u20*u21,f=c+.5*(vec2(1.)-u21)/u20,g=f+fract(b*u8)/d,h=(vec2(.5)+floor(a*b))/a;vec4 i=texture2D(u7,h),j=texture2D(u6,g);gl_FragColor=i*j;}",
i:["u20","u21"].concat(l),s:C,T:!0},s27:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(l),s:Object.assign({u25:3,u22:4,u23:5,u24:6},C),T:!0},s28:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(l),s:Object.assign({u3:2},C)},s29:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],s:C,T:!0},s30:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:g,s:J},s31:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(g),s:J,T:!0},s32:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:g,s:J,T:!0},s33:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(g),s:J,T:!0},s34:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:g,s:J,T:!0},s35:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:H,s:f,precision:"lowp"},s36:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],s:f,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],s:f,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],s:B,T:!0},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],s:B,T:!0},s40:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],s:p},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
s:p,T:!0},s42:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],s:f,precision:"lowp",T:!0},s43:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
s:f,precision:"lowp",T:!0},s44:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],s:{u1:0,u16:1,u31:2},T:!0}},L={s45:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Fa:["1.1111","gl_FragColor\\*=2.2222;"]},s46:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Fa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},A=null,E=null,N={Yb:function(){return G},m:function(){if(!G){A=La(K,2);E=La(L,2);w="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var x in A)e(c,A[x],x);Z.set("s0");c.enableVertexAttribArray(0);G=!0}},tc:function(x){x.forEach(function(z){N.pa(z)})},pa:function(x){A[x.id]=x;e(c,x,x.id)},tm:function(x,z,
P){z||(z=x);A[z]=Object.create(E[x]);A[z].Bm=!0;E[x].Fa&&E[x].Fa.forEach(function(S,la){A[z].g=A[z].g.replace(new RegExp(S,"g"),P[la])});e(c,A[z],z)},set:function(x){var z=A[x];z.T&&(z.T=!1,e(c,z,x));k(z)},Bb:function(x){return m(x,v(),"s47")},fe:function(x){return m(x,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:w},"s48")},Bl:function(x){return"undefined"===typeof A[x]?!1:A[x].Ma},J:function(){-1!==q&&(q=-1,r.va.forEach(function(x){0!==x&&c.disableVertexAttribArray(x)}))},ie:function(){var x=
0;r.va.forEach(function(z,P){P=r.R[P];c.vertexAttribPointer(z,P,c.FLOAT,!1,r.Yg,x);x+=4*P})},Al:function(){c.enableVertexAttribArray(0)},ec:function(){N.fc(c)},fc:function(x){x.vertexAttribPointer(r.va[0],2,x.FLOAT,!1,8,0)},ge:function(x,z){c.uniform1i(r.A[x],z)},H:function(x,z){c.uniform1f(r.A[x],z)},N:function(x,z,P){c.uniform2f(r.A[x],z,P)},he:function(x,z){c.uniform2fv(r.A[x],z)},Ag:function(x,z){c.uniform3fv(r.A[x],z)},zg:function(x,z,P,S){c.uniform3f(r.A[x],z,P,S)},ko:function(x,z,P,S,la){c.uniform4f(r.A[x],
z,P,S,la)},xa:function(x,z){c.uniform4fv(r.A[x],z)},lo:function(x,z){c.uniformMatrix2fv(r.A[x],!1,z)},mo:function(x,z){c.uniformMatrix3fv(r.A[x],!1,z)},Uc:function(x,z){c.uniformMatrix4fv(r.A[x],!1,z)},j:function(x,z){N.set(x);z.forEach(function(P){switch(P.type){case "4f":c.uniform4fv(r.A[P.name],P.value);break;case "3f":c.uniform3fv(r.A[P.name],P.value);break;case "2f":c.uniform2fv(r.A[P.name],P.value);break;case "1f":c.uniform1f(r.A[P.name],P.value);break;case "1i":c.uniform1i(r.A[P.name],P.value);
break;case "mat2":c.uniformMatrix2fv(r.A[P.name],!1,P.value);break;case "mat3":c.uniformMatrix3fv(r.A[P.name],!1,P.value);break;case "mat4":c.uniformMatrix4fv(r.A[P.name],!1,P.value)}})},Lp:function(){return"lowp"},v:function(){N.J();c.disableVertexAttribArray(0);for(var x in A){var z=A[x];z.Ma&&(z.Ma=!1,c.deleteProgram(z.na));z.Bm&&delete A[x]}n.forEach(function(P){c.deleteShader(P)});n.splice(0);y=0;G=!1;r=null;q=-1}};return N}(),c=null,jb=function(){function a(u){console.log("ERROR in ContextFF: ",
u);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(u,f,h){u.setAttribute("width",f);u.setAttribute("height",h)}function e(u){function f(){Ib.v();Ga.reset();B.getExtension("WEBGL_lose_context").loseContext()}if(b())return!1;var h=document.createElement("canvas");d(h,5,5);var B=null;try{B=h.getContext("webgl2",u)}catch(J){return!1}if(!B)return!1;k(B);Ga.Gh(B);u=Ga.$e(B);if(!u.Wa&&!u.Ya)return f(),!1;u=Ib.mh(B,u);f();return u?!0:!1}function k(u){u.clearColor(0,
0,0,0);u.disable(u.DEPTH_TEST);u.disable(u.BLEND);u.disable(u.DITHER);u.disable(u.STENCIL_TEST);u.disable(u.CULL_FACE);u.GENERATE_MIPMAP_HINT&&u.FASTEST&&u.hint(u.GENERATE_MIPMAP_HINT,u.FASTEST);u.disable(u.SAMPLE_ALPHA_TO_COVERAGE);u.disable(u.SAMPLE_COVERAGE);u.depthFunc(u.LEQUAL);u.clearDepth(1)}var m=null,v=null,n=null,q=null,r=!0,y=null,G=null,w=[],H={O:function(){return m.width},Y:function(){return m.height},ub:function(){return m},Fl:function(){return c},la:function(){return r},flush:function(){c.flush()},
Tp:function(){Aa.$();H.Dn()},Dn:function(){aa.reset();X.reset();Z.J();Z.Al();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);X.ld();Z.ec()},Kl:function(){y||(y=new Uint8Array(m.width*m.height*4));c.readPixels(0,0,m.width,m.height,c.RGBA,c.UNSIGNED_BYTE,y);return y},Gp:function(){return m.toDataURL("image/jpeg")},Hp:function(){Aa.ba();v||(v=document.createElement("canvas"),n=v.getContext("2d"));d(v,m.width,m.height);for(var u=H.Kl(),f=n.createImageData(v.width,v.height),h=v.width,B=v.height,J=f.data,g=
0;g<B;++g)for(var p=B-g-1,l=0;l<h;++l){var C=4*(g*h+l),K=4*(p*h+l);J[C]=u[K];J[C+1]=u[K+1];J[C+2]=u[K+2];J[C+3]=u[K+3]}n.putImageData(f,0,0);return v.toDataURL("image/png")},Sh:function(u){!v&&u&&(v=document.createElement("canvas"),n=v.getContext("2d"));var f=u?v:document.createElement("canvas");d(f,m.width,m.height);(u?n:f.getContext("2d")).drawImage(m,0,0);return f},m:function(u){u=Object.assign({Xa:null,cg:null,qa:null,Ve:null,width:512,height:512,premultipliedAlpha:!1,zm:!0,antialias:!1,debug:!1,
up:!1},u);u.Xa?(c=u.Xa,m=u.Xa.canvas):u.Ve&&!u.qa?m=document.getElementById(u.Ve):u.qa&&(m=u.qa);m||(m=document.createElement("canvas"));m.width=u.width;m.height=u.height;if(c)r=c instanceof WebGL2RenderingContext;else{r=!0;var f={antialias:u.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:u.premultipliedAlpha,stencil:!1,depth:u.zm,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(f.antialias=!1);var h=e(f);h||!f.antialias||b()||(f.antialias=!1,h=e(f));h&&(c=m.getContext("webgl2",f));c?r=!0:((c=m.getContext("webgl",f))||(c=m.getContext("experimental-webgl",f)),r=!1)}if(!c)return a("WebGL1 and 2 are not enabled");u.cg&&m.addEventListener&&(q=c.getExtension("WEBGL_lose_context"))&&(G=u.cg,m.addEventListener("webglcontextlost",G,!1));if(!Ga.m())return a("Not enough GL capabilities");k(c);Z.m();X.m();Ib.mh(c,Ga.Hl());w.forEach(function(B){B(c)});w.splice(0);return!0},kp:function(){return new Promise(function(u){c?
u(c):w.push(u)})},v:function(){c&&(Ga.v(),Z.v(),Ib.v());q&&G&&(m.removeEventListener("webglcontextlost",G,!1),q=G=null);c=y=n=v=m=null;w.splice(0)}};return H}(),vb=function(){function a(){null===b&&("undefined"!==typeof Z?b=Z:"undefined"!==typeof F&&(b=F))}var b=null;return{reset:function(){b=null},tj:function(d){b!==d&&(b&&b.J(),b=d)},Yb:function(){return b.Yb()},ec:function(){return b.ec()},fc:function(d){return b.fc(d)},ie:function(){return b.ie()},J:function(){return b.J()},set:function(d){a();
return b.set(d)},Bb:function(d){a();return b.Bb(d)},fe:function(d){a();return b.fe(d)}}}(),aa=function(){function a(E){c.bindTexture(c.TEXTURE_2D,E)}function b(E){var N=new Uint16Array(E.length);E.forEach(function(x,z){C[0]=x;var P=K[0];var S=P>>16&32768;x=P>>12&2047;var la=P>>23&255;P=103>la?S:142<la?S|31744|((255==la?0:1)&&P&8388607):113>la?(x|=2048,S|(x>>114-la)+(x>>113-la&1)):(S|la-112<<10|x>>1)+(x&1);N[z]=P});return N}function d(){if(null!==L.Cf)return L.Cf;var E=e(b([.5,.5,.5,.5]),!0);return null===
E?!0:L.Cf=E}function e(E,N){if(!vb.Yb()||!H)return null;var x=null,z=Math.sqrt(E.length/4);try{var P=c.getError();if("FUCKING_BIG_ERROR"===P)return!1;x=A.instance({isFloat:!1,S:N,array:E,width:z});P=c.getError();if(P!==c.NO_ERROR)return!1}catch(S){return!1}Aa.ba();c.viewport(0,0,z,z);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);vb.set("s0");x.Ka(0);X.l(!0,!0);E=4*z*z;N=new Uint8Array(E);c.readPixels(0,0,z,z,c.RGBA,c.UNSIGNED_BYTE,N);z=!0;for(P=0;P<E;++P)z=z&&3>Math.abs(N[P]-127);x.remove();Aa.$();
return z}var k=0,m=null,v=0,n=null,q=null,r=null,y=null,G=null,w=null,H=!1,u=[],f={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,ka:null,ai:null,Am:!1,S:!1,B:null,G:4,Wf:0},h=!1,B=null,J=null,g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=!1,l=!1,C=new Float32Array(1),K=new Int32Array(C.buffer),L={Cf:null,Df:null},A={m:function(){H||(G=[c.RGBA,null,c.RGBA,c.RGBA],w=
[c.RGBA,null,c.RGBA,c.RGBA],m=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],p="undefined"!==typeof ha,l="undefined"!==typeof Ga,n=[-1,-1,-1,-1,-1,-1,-1,-1],y=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],H=!0)},rm:function(){if(!q){for(var E=new Float32Array(16384),N=0;16384>N;++N)E[N]=2*Math.random()-1;q={random:A.instance({isFloat:!0,isPot:!0,array:E,width:64}),Jj:A.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}A.Fo()},pj:function(E){c.framebufferTexture2D(Aa.qf(),
c.COLOR_ATTACHMENT0,c.TEXTURE_2D,E,0)},$h:function(){return q.Jj},Fo:function(){y[1]=Ga.pf(c)},eo:function(){w=G=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},Yi:function(E){Z.set("s1");Aa.ba();var N=E.O(),x=E.Y();c.viewport(0,0,N,x);E.h(0);X.l(!1,!1)},iq:function(E,N){A.Yi(E);c.readPixels(0,0,E.O(),E.Y(),c.RGBA,c.UNSIGNED_BYTE,N)},jq:function(E,N){A.Yi(E);return Ga.ng(0,0,E.O(),E.Y(),N)},Nh:function(E,N,x,z,P,S,la){E.activeTexture(E.TEXTURE0);var ba=E.createTexture();E.bindTexture(E.TEXTURE_2D,ba);P=P instanceof
Float32Array?P:new Float32Array(P);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST);E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,S);E.texImage2D(E.TEXTURE_2D,0,E.RGBA,x,z,0,E.RGBA,E.FLOAT,P);E.bindTexture(E.TEXTURE_2D,null);E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!1);la&&(Aa.$(),Z.Bb(E));E.viewport(0,0,x,z);E.framebufferTexture2D(E.FRAMEBUFFER,
E.COLOR_ATTACHMENT0,E.TEXTURE_2D,N,0);E.bindTexture(E.TEXTURE_2D,ba);la?X.l(!0,!0):X.Ob(E);E.deleteTexture(ba);H&&(n[0]=-1,r=null,k=0)},He:function(E){E!==k&&(c.activeTexture(m[E]),k=E)},instance:function(E){function N(){ka=void 0!==Q.ka.videoWidth?Q.ka.videoWidth:Q.ka.width;na=void 0!==Q.ka.videoHeight?Q.ka.videoHeight:Q.ka.height}function x(da){var ta=c.getError();if("FUCKING_BIG_ERROR"===ta)return!1;c.texImage2D(c.TEXTURE_2D,0,ab,Ea,Oa,da);ta=c.getError();ta!==c.NO_ERROR&&Ea!==c.RGBA&&(Ea=c.RGBA,
c.texImage2D(c.TEXTURE_2D,0,ab,Ea,Oa,da));return!0}function z(){if(!Y){a(ma);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,rb);Q.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,Q.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,Q.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));Q.isAnisotropicFiltering&&"undefined"!==typeof V&&c.texParameterf(c.TEXTURE_2D,
ha.Ll().TEXTURE_MAX_ANISOTROPY_EXT,V.ik);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,Q.isLinear?c.LINEAR:c.NEAREST);Q.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,Q.isMipmap&&!Ab?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,Q.isMipmap&&!Ab?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);Ea=G[Q.G-1];ab=w[Q.G-1];Oa=y[t];if(Ga.la()){var da=Ga.Nl();Ea===c.RGBA&&Oa===c.FLOAT?Q.isMipmap||Q.isLinear?ab=Ib.Pl(c):Ga.fa()?da&&(ab=da):ab=c.RGBA16F||c.RGBA:Ea===
c.RGB&&Oa===c.FLOAT&&da&&(ab=da,Ea=c.RGBA)}if(Q.S&&!Q.isFloat||Q.isFloat&&Q.isMipmap&&Ib.Im())ab=Ga.Ol(),Oa=Ga.pf(c);Q.Wf&&(Qb=Q.Wf);Q.isSrgb&&4===Q.G&&(Ea=ha.im());if(Q.ka)x(Q.ka);else if(Q.url)x(va);else if(Da){da=Da;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,ab,ka,na,0,Ea,Oa,da),c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,ab,ka,na,0,Ea,Oa,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,ka,na,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(rc){c.texImage2D(c.TEXTURE_2D,
0,ab,ka,na,0,Ea,Oa,null)}Q.isKeepArray||(Da=null)}else da=c.getError(),"FUCKING_BIG_ERROR"!==da&&(c.texImage2D(c.TEXTURE_2D,0,ab,ka,na,0,Ea,Oa,null),da=c.getError(),da!==c.NO_ERROR&&(Ea=c.RGBA,Q.S&&Oa!==c.FLOAT&&(Oa=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,ab,ka,na,0,Ea,Oa,null))));if(Q.isMipmap)if(!Ab&&Ua)Ua.Ad(),Rb=!0;else if(Ab){da=Math.log2(Math.min(ka,na));Hb=Array(1+da);Hb[0]=ma;for(var ta=1;ta<=da;++ta){var Ya=Math.pow(2,ta),Ka=ka/Ya;Ya=na/Ya;var Xa=c.createTexture();a(Xa);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,ab,Ka,Ya,0,Ea,Oa,null);a(null);Hb[ta]=Xa}Rb=!0}a(null);n[k]=-1;rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);Fa=!0;Q.B&&Ua&&(Q.B(Ua),Q.B=null)}}function P(){for(var da=ka*na,ta=2*da,Ya=3*da,Ka=0;Ka<da;++Ka)ea[0][Ka]=lb[Ka],ea[1][Ka]=lb[Ka+da],ea[2][Ka]=lb[Ka+ta],ea[3][Ka]=lb[Ka+Ya]}function S(){var da=ka*na*4;ca=[new Uint8Array(da),new Uint8Array(da),new Uint8Array(da),new Uint8Array(da)];
ea=[new Float32Array(ca[0].buffer),new Float32Array(ca[1].buffer),new Float32Array(ca[2].buffer),new Float32Array(ca[3].buffer)];Ca=new Uint8Array(4*da);lb=new Float32Array(Ca.buffer);oa=!0}function la(){ba=new Uint8Array(ka*na*4);jc=new Float32Array(ba.buffer);Xb=!0}var ba,Q=Object.assign({},f,E),fa=v++;null===Q.isFlipY&&(Q.isFlipY=Q.url?!0:!1);Q.data&&(Q.array="string"===typeof Q.data?Kb(Q.data):Q.isFloat?new Float32Array(Q.data):new Uint8Array(Q.data),Q.isFlipY=!1);var t=0,O=Q.ka?!0:!1,D=null,
W=null,ja=!1;Q.S=Q.S||Q.isFloat;Q.S&&(t=1);!Q.Am&&Q.isFloat&&l&&!Ga.fa()&&(Q.isFloat=!1);Q.isFloat&&(t=2);Q.isAnisotropicFiltering&&p&&!ha.Hm()&&(Q.isAnisotropicFiltering=!1);var ma=Q.ai||c.createTexture(),va=null,Da=!1,ka=0,na=0,Fa=!1,Y=!1,oa=!1,ea=null,ca=null,Ca=null,lb=null,ab=null,Ea=null,Oa=null,rb=Q.isFlipY,sc=(E=Q.S&&Q.isMipmap)&&Ib.Rk(),Ab=E&&!sc?!0:!1,Hb=null,Qb=-1,ic=-1,Rb=!1,Xb=!1,jc=ba=null;Q.width&&(ka=Q.width,na=Q.height?Q.height:ka);var Ua={get:function(){return ma},O:function(){return ka},
Y:function(){return na},jm:function(){return Q.url},ui:function(){return Q.isFloat},vi:function(){return Q.S},wq:function(da){ma=da},$p:function(){return Q.isLinear},Ad:function(){c.generateMipmap(c.TEXTURE_2D)},Jk:function(da,ta){Ab?(da||(da=Ua.Xh()),A.He(ta),a(Hb[da]),n[ta]=-1):Ua.h(ta)},Xh:function(){-1===Qb&&(Qb=Math.log(ka)/Math.log(2));return Qb},El:function(da){da||(da=Ua.Xh());if(Ab){Z.set("s12");A.He(0);for(var ta=ka,Ya=na,Ka=1;Ka<=da;++Ka)ta/=2,Ya/=2,Z.N("u14",.25/ta,.25/Ya),c.viewport(0,
0,ta,Ya),a(Hb[Ka-1]),c.framebufferTexture2D(Aa.qf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,Hb[Ka],0),X.l(!1,1===Ka);n[0]=-1}else da!==ic&&(ic=da,c.TEXTURE_MAX_LEVEL&&c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAX_LEVEL,da)),Ua.Ad()},xq:function(da){(O=!(Array.isArray(da)||da.constructor===Float32Array||da.constructor===Uint8Array))?(Da=null,Q.ka=da,N()):Da=da},h:function(da){if(!Fa)return!1;A.He(da);if(n[da]===fa)return!1;a(ma);n[da]=fa;return!0},Ka:function(da){c.activeTexture(m[da]);k=da;a(ma);n[da]=fa},
o:function(){r=Ua;A.pj(ma)},M:function(){c.viewport(0,0,ka,na);r=Ua;A.pj(ma)},re:A.re,Yn:function(da,ta){ka=da;na=ta},resize:function(da,ta){Ua.Yn(da,ta);z()},clone:function(da){da=A.instance({width:ka,height:na,S:Q.S,isFloat:Q.isFloat,isLinear:Q.isLinear,isMirrorY:Q.isMirrorY,isFlipY:da?!rb:rb,isPot:Q.isPot});vb.set("s0");Aa.$();da.M();Ua.h(0);X.l(!0,!0);return da},Vc:function(){c.viewport(0,0,ka,na)},remove:function(){c.deleteTexture(ma);Y=!0;u.splice(u.indexOf(Ua),1);Ua=null},refresh:function(){Ua.Ka(0);
rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);O?c.texImage2D(c.TEXTURE_2D,0,ab,Ea,Oa,Q.ka):c.texImage2D(c.TEXTURE_2D,0,ab,ka,na,0,Ea,Oa,Da);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Wi:function(){oa||S();c.readPixels(0,0,ka,4*na,c.RGBA,c.UNSIGNED_BYTE,Ca);P();return ea},tn:function(){oa||S();return Ga.ng(0,0,ka,4*na,Ca).then(function(){P();return ea})},vn:function(){Xb||la();c.readPixels(0,0,ka,na,c.RGBA,c.UNSIGNED_BYTE,ba);return jc},un:function(){Xb||la();return Ga.ng(0,0,ka,na,ba)},zh:function(da){Aa.ba();
Z.set("s15");Ua.h(0);if(da)c.viewport(0,0,ka,na),Z.ko("u15",.25,.25,.25,.25),X.l(!1,!0);else for(da=0;4>da;++da)c.viewport(0,na*da,ka,na),Z.xa("u15",g[da]),X.l(!1,0===da)},Tg:function(da){var ta;if(ta=Oa===y[0])null!==L.Df?ta=L.Df:(ta=e(new Uint8Array([127,127,127,127]),!1),ta=null===ta?!0:L.Df=ta),ta=!ta;a(ma);rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);ta?(ja||(D=document.createElement("canvas"),D.width=ka,D.height=na,W=D.getContext("2d"),W.createImageData(ka,na),ja=!0),null.data.set(da),W.putImageData(null,
0,0),c.texImage2D(c.TEXTURE_2D,0,ab,Ea,Oa,D)):c.texImage2D(c.TEXTURE_2D,0,ab,ka,na,0,Ea,Oa,da);n[k]=fa;rb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Lq:function(da,ta){a(ma);ta&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,ab,Ea,Oa,da);n[k]=fa;ta&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},bc:function(da,ta){var Ya=ka*na,Ka=4*Ya;da=Q.S?da?"RGBE":"JSON":"RGBA";ta&&(da=ta);ta=Ga.la()&&!1;var Xa=null;switch(da){case "RGBE":Xa="s13";break;case "JSON":Xa=ta?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Xa=
"s7"}oa||("RGBA"===da||"RGBE"===da||"RGBAARRAY"===da?(ca=new Uint8Array(Ka),oa=!0):"JSON"!==da||ta||S());Aa.ba();Z.set(Xa);Ua.h(0);Ka=null;if("RGBA"===da||"RGBE"===da||"RGBAARRAY"===da){c.viewport(0,0,ka,na);X.l(!0,!0);c.readPixels(0,0,ka,na,c.RGBA,c.UNSIGNED_BYTE,ca);if("RGBAARRAY"===da)return{data:ca};h||(B=document.createElement("canvas"),J=B.getContext("2d"),h=!0);B.width=ka;B.height=na;Ya=J.createImageData(ka,na);Ya.data.set(ca);J.putImageData(Ya,0,0);Ka=B.toDataURL("image/png")}else if("JSON"===
da)if(ta)Ka=new Float32Array(Ya),c.viewport(0,0,ka,na),X.l(!0,!0),c.readPixels(0,0,ka,na,c.RGBA,c.FLOAT,Ka);else{for(Ka=0;4>Ka;++Ka)c.viewport(0,na*Ka,ka,na),Z.xa("u15",g[Ka]),X.l(!Ka,!Ka);Ua.Wi();Ka=Array(Ya);for(ta=0;ta<Ya;++ta)Ka[4*ta]=ea[0][ta],Ka[4*ta+1]=ea[1][ta],Ka[4*ta+2]=ea[2][ta],Ka[4*ta+3]=ea[3][ta]}return{format:da,data:Ka,width:ka,height:na,isMirrorY:Q.isMirrorY,isFlipY:"RGBA"===da?Q.isFlipY:!Q.isFlipY}}};Q.isMipmap&&!Ab&&Fa&&!Rb&&(Ua.Ad(),Rb=!0);if(Q.url)a(ma),c.texImage2D(c.TEXTURE_2D,
0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),va=new Image,va.tp="Anonymous",va.crossOrigin="Anonymous",va.src=Q.url,va.onload=function(){ka=va.width;na=va.height;z()};else if(Q.ka){var Mb=function(){N();ka?z():setTimeout(Mb,1)};Mb()}else Q.array?(Q.S&&!Q.isFloat?Q.array instanceof Uint16Array?(Da=Q.array,z()):d()?(Da=b(Q.array),z()):(z(),A.Nh(c,ma,Ua.O(),Ua.Y(),Q.array,rb,!0)):(Da=Q.isFloat?Q.array instanceof Float32Array?Q.array:new Float32Array(Q.array):Q.array instanceof Uint8Array?Q.array:new Uint8Array(Q.array),
z()),Q.isKeepArray||(Da&&Da!==Q.array&&(Da=null),delete Q.array)):Q.ai?Fa=!0:z();Ua.Pp=Ua.O;Q.B&&Fa&&(Q.B(Ua),Q.B=null);u.push(Ua);return Ua},ba:function(E){E!==k&&(c.activeTexture(m[E]),k=E);n[E]=-1;a(null)},Lk:function(E){q.random.h(E)},re:function(){r=null;c.framebufferTexture2D(Aa.qf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==k&&c.activeTexture(m[0]);for(var E=0;E<m.length;++E)n[E]=-1;k=-1},mq:function(){k=-1},Lj:function(){for(var E=0;E<m.length;++E)A.ba(E)},I:function(){q&&
(q.random.remove(),q.Jj.remove())},Yc:function(E,N){if("RGBA"===E.format||"RGBE"===E.format){var x=new Image;x.src=E.data;x.onload=function(){A.instance({isMirrorY:E.isMirrorY,isFlipY:E.isFlipY,isFloat:!1,ka:x,B:function(z){if("RGBA"===E.format)N(z);else{var P=E.width,S=E.height,la=A.instance({isMirrorY:E.isMirrorY,isFloat:!0,width:P,height:S,isFlipY:E.isFlipY});Aa.$();c.viewport(0,0,P,S);Z.set("s14");la.o();z.h(0);X.l(!0,!0);A.ba(0);N(la);Ga.flush();z.remove()}}})}}else"JSON"===E.format?N(A.instance({isFloat:!0,
isFlipY:E.isFlipY,width:E.width,height:E.height,array:new Float32Array(E.data)})):N(!1)},Xk:b,v:function(){r&&(Aa.$(),A.re(),Aa.ba());A.Lj();u.slice(0).forEach(function(E){E.remove()});u.splice(0);H=!1;v=0;"undefined"!==typeof Ib&&Ib.v();q=null}};return A}(),Nc={instance:function(a){var b=[aa.instance(a),aa.instance(a)],d=[b[1],b[0]],e=d,k={kj:function(m){e[1].o();e[0].h(m);k.xj()},Sn:function(m){e[1].M();e[0].h(m);k.xj()},xj:function(){e=e===b?d:b},refresh:function(){e[0].refresh();e[1].refresh()},
h:function(m){e[0].h(m)},Ka:function(m){e[0].Ka(m)},Kk:function(m){e[1].h(m)},Kp:function(){return e[0]},Np:function(){return e[1]},Tg:function(m){e[0].Tg(m);e[1].Tg(m)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){k.Sn(0);Z.set("s0");X.l(!1,!1)}};return k}},X=function(){function a(q){var r={ja:null,indices:null};r.ja=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,r.ja);q.bufferData(q.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),q.STATIC_DRAW);r.indices=q.createBuffer();
q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,r.indices);q.bufferData(q.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),q.STATIC_DRAW);return r}var b=null,d=0,e=!1,k=[],m=-2,v=-2,n={reset:function(){v=m=-2},m:function(){e||(b=a(c),n.ld(),e=!0)},instance:function(q){var r=d++,y=q.indices?q.indices.length:0,G="undefined"===typeof q.mode?c.STATIC_DRAW:q.mode,w=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,w);c.bufferData(c.ARRAY_BUFFER,q.ja instanceof Float32Array?q.ja:new Float32Array(q.ja),G);m=r;var H=null,u=
null,f=null;if(q.indices){H=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,H);var h=null;65536>q.indices.length?(h=Uint16Array,u=c.UNSIGNED_SHORT,f=2):(h=Uint32Array,u=c.UNSIGNED_INT,f=4);h=q.indices instanceof h?q.indices:new h(q.indices);c.bufferData(c.ELEMENT_ARRAY_BUFFER,h,G);v=r}var B={xc:function(J){m!==r&&(c.bindBuffer(c.ARRAY_BUFFER,w),m=r);J&&vb.ie()},Hk:function(){v!==r&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,H),v=r)},bind:function(J){B.xc(J);B.Hk()},U:function(){c.drawElements(c.TRIANGLES,
y,u,0)},La:function(J,g){c.drawElements(c.TRIANGLES,J,u,g*f)},remove:function(){c.deleteBuffer(w);q.indices&&c.deleteBuffer(H);B=null}};k.push(B);return B},ld:function(){-1!==m&&(c.bindBuffer(c.ARRAY_BUFFER,b.ja),m=-1);-1!==v&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indices),v=-1)},l:function(q,r){q&&X.ld();r&&vb.ec();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Ob:function(q){q=q||c;var r=a(q);q.bindBuffer(q.ARRAY_BUFFER,r.ja);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,r.indices);vb.fc(q);q.clear(q.COLOR_BUFFER_BIT);
q.drawElements(q.TRIANGLES,3,q.UNSIGNED_SHORT,0);q.flush();q.bindBuffer(q.ARRAY_BUFFER,null);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null);q.deleteBuffer(r.ja);q.deleteBuffer(r.indices);n.reset();e&&(n.ld(),vb.ec())},I:function(){var q=c,r=b;q.deleteBuffer(r.ja);q.deleteBuffer(r.indices)},v:function(){n.I();k.forEach(function(q){q.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);n.reset();e=!1;k.splice(0);d=0}};return n}(),Aa=function(){var a=null,b=null,d=null,e=
!1,k=[],m={ma:-2,Mh:1},v={Yb:function(){return e},m:function(){if(!e){a=c.createFramebuffer();var n=Ga.la();b=n&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;d=n&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;e=!0}},Ml:function(){return b},Th:function(){return d},qf:function(){return c.FRAMEBUFFER},Op:function(){return m},Dp:function(){return a},instance:function(n){void 0===n.Gc&&(n.Gc=!1);var q=n.ha?n.ha:null,r=n.width,y=void 0!==n.height?n.height:n.width,G=a,w=null,H=!1,u=!1,f=0;q&&
(r=r?r:q.O(),y=y?y:q.Y());var h={ej:function(){H||(G=c.createFramebuffer(),H=!0,f=m.Mh++)},fd:function(){h.ej();h.o();w=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,w);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,r,y);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,w);c.clearDepth(1)},bind:function(B,J){f!==m.ma&&(c.bindFramebuffer(b,G),m.ma=f);q&&q.o();J&&c.viewport(0,0,r,y);B&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},hh:function(){f!==m.ma&&(c.bindFramebuffer(b,
G),m.ma=f)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Re:function(){c.clear(c.COLOR_BUFFER_BIT)},oh:function(){c.clear(c.DEPTH_BUFFER_BIT)},Vc:function(){c.viewport(0,0,r,y)},o:function(){f!==m.ma&&(c.bindFramebuffer(b,G),m.ma=f)},rtt:function(B){q=B;m.ma!==f&&(c.bindFramebuffer(c.FRAMEBUFFER,G),m.ma=f);B.o()},ba:function(){c.bindFramebuffer(b,null);m.ma=-1},resize:function(B,J){r=B;y=J;w&&(c.bindRenderbuffer(c.RENDERBUFFER,w),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
r,y))},remove:function(){G===a||u||(c.bindFramebuffer(b,G),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),w&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null),c.bindFramebuffer(b,null),c.deleteFramebuffer(G),w&&c.deleteRenderbuffer(w));u=!0}};n.Gc&&h.fd();k.push(h);return h},ba:function(){c.bindFramebuffer(b,null);m.ma=-1},Jq:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);Ga.uj();m.ma=-1},reset:function(){m.ma=-2},$:function(){0!==
m.ma&&(c.bindFramebuffer(b,a),m.ma=0)},clear:function(){Ga.uj();c.clear(c.COLOR_BUFFER_BIT)},v:function(){v.ba();k.forEach(function(n){n.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);v.reset();e=!1;k.splice(0);m.Mh=1}};return v}(),Ga=function(){function a(){n="undefined"===typeof jb?ha:jb;q=!0}function b(g,p){for(var l=0;l<g.length;++l){var C=p.getExtension(g[l]);if(C)return C}return null}function d(){null!==h.qe&&(clearTimeout(h.qe),h.qe=null);h.Tb=!1}function e(g){if(0===h.xb.length){h.za=
c.PIXEL_PACK_BUFFER;h.xb.splice(0);h.Ed.splice(0);for(var p=0;p<h.zc;++p)h.xb.push(c.createBuffer()),h.Ed.push(-1);h.Ta=0;h.bg=0}c.bindBuffer(h.za,h.xb[h.Ta]);g.byteLength!==h.Ed[h.Ta]&&(c.bufferData(h.za,g.byteLength,c.STREAM_READ),h.Ed[h.Ta]=g.byteLength);h.Up=!0}function k(){c.bindBuffer(h.za,null)}function m(){h.Rb.forEach(function(g){c.deleteSync(g)});h.Rb.splice(0)}function v(){h.Ta=(h.Ta+1)%h.zc;++h.bg}var n=null,q=!1,r={ki:!1,Lg:null,Mg:null,ri:!1,Fm:!1,Ng:null,si:!1,Og:null,li:!1,Se:null,
xm:!1,Te:null,ym:!1},y=null,G={Wa:!0,Ya:!0,hf:!0,Vi:!1},w=null,H=!0,u=null,f=null,h={Yk:1,zc:-1,Ta:0,bg:0,Tb:!1,xb:[],Rb:[],Ed:[],za:null,qe:null},B="undefined"===typeof window?{}:window,J={m:function(){if(q)return!0;J.reset();q||a();var g=c;if(!y.ki){y.Lg=J.Jh(g);B.GL_EXT_FLOAT=y.Lg;y.ri=y.Lg?!0:!1;if(y.ri||J.la())y.Mg=J.Kh(g),y.Fm=y.Mg?!0:!1,B.GL_EXT_FLOATLINEAR=y.Mg;y.ki=!0}if(!y.li){y.Ng=J.xd(g);y.Ng&&(y.si=!0,B.GL_EXT_HALFFLOAT=y.Ng);if(y.si||J.la())y.Og=J.Lh(g),B.GL_EXT_HALFFLOATLINEAR=y.Og;
y.Xp=y.Og?!0:!1;y.li=!0}y.Se=J.Hh(g);y.xm=y.Se?!0:!1;B.GL_EXT_COLORBUFFERFLOAT=y.Se;y.Te=J.Ih(g);y.ym=y.Te?!0:!1;B.GL_EXT_COLORBUFFERHALFFLOAT=y.Te;Aa.m();aa.m();if(!J.il())return!1;X.m();aa.rm();return!0},reset:function(){y=Object.assign({},r);w=Object.assign({},G)},O:function(){q||a();return n.O()},Y:function(){q||a();return n.Y()},la:function(){q||a();return n.la()},Gh:function(g){J.Hh(g);J.Ih(g);J.Jh(g);J.Kh(g);J.xd(g);J.Lh(g)},Hh:b.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float",
"OES_color_buffer_float"]),Ih:b.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Jh:b.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Kh:b.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),xd:b.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Lh:b.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear",
"WEBKIT_OES_texture_half_float_linear"]),pf:function(g){var p=J.xd(g);return p&&p.HALF_FLOAT_OES?p.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},Nl:function(){return f||c.RGBA32F||c.RGBA},Ol:function(){return u||c.RGBA16F||c.RGBA},Hl:function(){return w},fa:function(){return w.Wa},op:function(){return w.Ya},Qk:function(){return w.hf},Tk:function(){return w.Vi&&H},Ij:function(g){H=g;!g&&h.Tb&&(m(),c.bindBuffer(h.za,null),h.Tb=!1)},aq:function(){return h.Tb},oe:function(g,p,l){function C(){g.bindTexture(g.TEXTURE_2D,
null);g.bindFramebuffer(K,null);g.deleteTexture(E);g.deleteFramebuffer(A)}var K=g.FRAMEBUFFER,L=g.NEAREST,A=g.createFramebuffer();g.bindFramebuffer(K,A);var E=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,E);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,L);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,
L);g.texImage2D(g.TEXTURE_2D,0,p,3,3,0,g.RGBA,l,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,E,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return C(),!1;vb.fe(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);X.Ob(g);g.bindFramebuffer(K,null);vb.Bb(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,E);X.Ob(g);p=new Uint8Array(36);g.readPixels(0,0,3,3,g.RGBA,g.UNSIGNED_BYTE,
p);C();for(l=0;36>l;++l)if(3!==l%4&&3<Math.abs(p[l]-127))return!1;return!0},$e:function(g){var p={Wa:!1,Ya:!1};g.disable(g.BLEND);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&J.oe(g,g.RGBA32F,g.FLOAT)&&(p.Wa=!0,f=g.RGBA32F);!p.Wa&&J.oe(g,g.RGBA,g.FLOAT)&&(p.Wa=!0,f=g.RGBA);var l=J.pf(g);u=null;g.RGBA16F&&J.oe(g,g.RGBA16F,l)&&(p.Ya=!0,u=g.RGBA16F);!p.Ya&&J.oe(g,g.RGBA,l)&&(p.Ya=!0,u=g.RGBA);return p},kl:function(){var g=Aa.instance({width:2});g.ej();var p=aa.instance({width:2,isFloat:!0,
G:3});g.o();p.o();J.flush();c.checkFramebufferStatus(Aa.Th())!==c.FRAMEBUFFER_COMPLETE?(aa.eo(),w.hf=!1):w.hf=!0;g.remove();p.remove()},ll:function(){var g=!1;J.la()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(p){return"undefined"!==typeof c[p]}));w.Vi=g},il:function(){var g=J.$e(c);Object.assign(w,g);if(!w.Wa&&!w.Ya)return!1;J.kl();J.ll();return!0},wn:function(g,p,l,C,K){c.readPixels(g,p,l,C,c.RGBA,c.UNSIGNED_BYTE,
K);return Promise.resolve(K,!1)},ng:function(g,p,l,C,K,L,A){if(!J.Tk())return J.wn(g,p,l,C,K);h.zc=A||h.Yk;e(K);c.readPixels(g,p,l,C,c.RGBA,c.UNSIGNED_BYTE,0);h.Rb[h.Ta]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);J.flush();var E=!1;return new Promise(function(N,x){function z(){if(!h.Tb)return d(),k(),v(),x(),!1;var P=(h.Ta+1)%h.zc;switch(c.clientWaitSync(h.Rb[P],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;default:return d(),c.deleteSync(h.Rb[P]),h.Rb[P]=null,c.bindBuffer(h.za,h.xb[P]),
c.getBufferSubData(h.za,0,K),k(),v(),N(K,E),!0}h.qe=setTimeout(z,0);return!1}d();h.bg+1<h.zc?(k(),v(),N(K,!1)):(h.Tb=!0,z()||!L||E||(E=!0,L()))})},uj:function(){c.viewport(0,0,J.O(),J.Y())},flush:function(){c.flush()},v:function(){d();m();aa.v();Aa.v();X.v();h.xb.forEach(function(g){c.deleteBuffer(g)});h.xb.splice(0);vb.reset();q=!1}};return J}(),Ib=function(){function a(l,C,K,L){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,L?h.NEAREST_MIPMAP_NEAREST:h.LINEAR);var A=null;if(null!==K)try{A=h.getError();
if("FUCKING_BIG_ERROR"===A)return!1;h.texImage2D(h.TEXTURE_2D,0,l,4,4,0,h.RGBA,C,K);A=h.getError();if(A!==h.NO_ERROR)return!1}catch(E){return!1}L&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);X.Ob(h);A=h.getError();if("FUCKING_BIG_ERROR"===A)return!1;h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,y);A=h.getError();A===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,y),A=h.getError());if(A!==
h.NO_ERROR)return!1;K=!0;for(L=0;16>L;++L)K=K&&4>Math.abs(y[L]-127);K&&(q.Ri=C,q.ji=l);return K}function b(l,C){return B.Wa&&a(l,h.FLOAT,new Float32Array(G),C)?(n=v.eh,!0):!1}function d(l,C,K){if(!B.Ya)return!1;var L=aa.Xk(G),A=Ga.xd(h);if(A&&A.HALF_FLOAT_OES&&a(l,A.HALF_FLOAT_OES,L,C)||h.HALF_FLOAT&&a(l,h.HALF_FLOAT,L,C))return n=v.rc,!0;L=new Float32Array(G);if(a(l,h.FLOAT,L,C))return n=v.rc,!0;h.bindTexture(h.TEXTURE_2D,K);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,2,2,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(q.sd,
p);aa.Nh(h,K,2,2,L,!1,!1);h.bindFramebuffer(q.sd,null);h.bindTexture(h.TEXTURE_2D,K);return a(l,null,null,C)?(n=v.rc,!0):!1}function e(l,C,K){r=!0;if(d(l,!0,K)||b(C,!0))return!0;r=!1;return d(l,!1,K)||b(C,!1)?!0:!1}function k(l){if(n===v.J){h=l||c;n=v.RGBA8;r=!0;Ga.Gh(h);B||(B=Ga.$e(h));Aa.reset();p=h.createFramebuffer();q.sd=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(q.sd,null);h.clearColor(0,0,0,0);h.viewport(0,0,2,2);Z.J();J=Z.Bb(h);l=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,
l);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);g=l;var C=l=h.RGBA,K=h.RGBA16F,L=h.RGBA32F;L&&(l=L);K&&(C=K);if((K||L)&&e(C,l,g))return m(),!0;l=C=h.RGBA;if(e(C,l,g))return m(),!0;n=v.RGBA8;m();return!1}}function m(){h.deleteProgram(J.na);h.deleteTexture(g);g=J=null}for(var v={J:-1,eh:3,rc:2,RGBA8:0},n=v.J,q={Ri:null,ji:null,sd:null},r=!0,y=new Uint8Array(16),G=Array(64),
w=0;4>w;++w)for(var H=0;4>H;++H){var u=0===(H+w)%2?1:0,f=4*w+H;G[4*f]=u;G[4*f+1]=u;G[4*f+2]=u;G[4*f+3]=u}var h=null,B=null,J=null,g=null,p=null;return{Rk:function(l){k(l);return r},mh:function(l,C){n===v.J&&(typeof("undefined"!==C)&&(B=C),k(l));return n!==v.RGBA8},Yp:function(l){k(l);return n===v.eh},Im:function(l){k(l);return n===v.rc},Jp:function(l){k(l);return q.Ri},Pl:function(l){k(l);return q.ji},v:function(){h=null;r=!0;n=v.J;B=null}}}(),$c={instance:function(a){function b(){w&&w.remove();w=
aa.instance({isFloat:!1,isPot:!1,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}var d=null,e=!1,k=!1,m=null,v=!1,n=!1,q=null,r="undefined"===typeof a.preprocessing?!1:a.preprocessing,y="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(e=!0,I&&void 0!==I.ca&&(a.mask=I.ca+a.mask),d=aa.instance({isFloat:!1,url:a.mask}));var G=!1;a.customInputShader&&(G="s49",Z.pa({name:"_",id:G,g:a.customInputShader,Kq:["uSource"],precision:"lowp"}),Z.j(G,[{type:"1i",name:"_",value:0}]));switch(r){case "sobel":q=
"s38";v=!0;break;case "meanNormalization":q="s39";v=!0;break;case "grayScale":q="s35";v=!1;break;case "grayScaleTilt":q="s36";n=!0;v=!1;break;case "rgbGrayTilt":q="s37";n=!0;v=!1;break;case "copy":q=G?G:"s0";break;case "inputLightRegulation":q=G?G:"s35";m=qd.instance({ii:y,Li:a.size,Hi:a.nBlurPass,Ba:!1});k=!0;break;case "inputMix0":q="none";m=rd.instance({Z:y,jb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Ba:!1});k=!0;break;case "inputMix1":q="none";m=sd.instance({Z:y,jb:a.varianceMin,Sa:a.blurKernelSizePx,
gain:a.gain||1,Ba:!1});k=!0;break;case "inputCut4":q="none";m=td.instance({Z:y,jb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Hc:a.isNormalized||!1,hg:a.overlap||0,Ba:!1});y*=m.Ql();k=!0;break;case "direct":case "none":q="abort";break;default:q="s4"}y=Math.ceil(y);n&&Z.j(q,[{name:"u29",type:"1f",value:a.tilt}]);e&&(q+="Mask");var w=null;b();var H={O:function(){return a.size},Rl:function(){return y},rf:function(){return H.O()},Vl:function(){return k?m.Dc():w},se:function(u){a.Aa=u;b()},wa:function(u){Aa.$();
if("abort"===q)return u.h(0),u;"none"!==q&&(Z.set(q),v&&Z.H("u30",1/a.size),w.M(),e&&d.h(1),X.l(!1,!1),w.h(0),u=w);k&&m.process(u)},v:function(){w.remove();e&&d.remove()}};return H}},ad={instance:function(a){function b(){if(p.kc){k.input&&(k.input.remove(),k.Id.remove());var C=a.size*a.sparsity;g=Math.log(C/a.size)/Math.log(2);k.input=aa.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:C*a.Aa[0],height:C*a.Aa[1],Wf:g});k.Id=aa.instance({isFloat:!0,isPot:!0,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}}
function d(){k.zb&&k.zb.remove();k.zb=aa.instance({isFloat:!0,isPot:!v,isLinear:!v&&n.isLinear,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}function e(C){n.buffer.forEach(function(K,L){n.results[L][0]=C[0][K];n.results[L][1]=C[1][K];n.results[L][2]=C[2][K];n.results[L][3]=C[3][K]});return n.results}a.normalize=a.normalize||!1;var k={input:null,bias:null,Id:null,zb:null,gg:null,eg:null,fg:null},m=null,v=!0,n={type:"undef",B:null,isLinear:!1,buffer:[],results:[],Kd:!1},q=-1,r=a.isReorganize?a.isReorganize:
!1,y=a.kernelsCount?!0:!1,G=[a.Sb?"s31":"s30",a.Sb?"s33":"s32","s34"][a.shiftRGBAMode||0],w={isEnabled:!1},H=1/a.size;a.Cm?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.be.rf(),v=!1):"full"===a.connectivityUp&&(a.sparsity=a.be.rf());var u={elu:"s18",elu01:"s19",relu:"s17",arctan:"s20",arctan2:"s21",sigmoid:"s16",copy:"s0"}[a.activation],f=a.sparsity*a.sparsity,h=!1,B=a.size,J="";if(a.maxPooling){switch(a.maxPooling.size){case 2:J="s40";break;case 4:J="s41"}h=!0;B/=a.maxPooling.size;k.eg=
aa.instance({isFloat:!0,isPot:!1,width:B})}var g=-1,p=null;v&&d();k.bias=aa.instance(a.bias);var l={O:function(){return a.size},rf:function(){return B},Qh:function(){return a.classesCount},Ik:function(C){m.h(C)},nn:function(){a.remap&&a.remap.isEnabled&&(w={isEnabled:!0,Vm:aa.instance(a.remap.maskTexture),Lc:a.remap.layers.map(function(C){return a.parent.Sl(C)}),depth:a.remap.depth})},fo:function(){switch(a.connectivityUp){case "direct":p=ud.instance(a.connectivity);break;case "square":p=vd.instance(a.connectivity);
break;case "squareFast":p=wd.instance(a.connectivity,a.activation);break;case "full":p=xd.instance(Object.assign({Sb:a.Sb,Ec:a.Ec||[1,1]},a.connectivity));break;case "conv":q=a.kernelsCount,p=yd.instance(a.connectivity),r&&(k.gg=aa.instance({width:B,isFloat:!0,isFlipY:!1,isPot:!1}))}b()},wa:function(C,K){m=C;p.kc?(k.input.M(),y&&k.bias.h(2),p.wa(w),k.input.h(0),k.input.El(g),k.Id.M(),y?Z.set("s0"):(Z.set(G),Z.H("u4",f),k.bias.h(1)),k.input.Jk(g,0),X.l(!1,!1),Z.set(u),k.zb.o(),k.Id.h(0),X.l(!1,!1)):
(k.zb.M(),k.bias.h(1),p.wa());if(v)return K=k.zb,h&&(k.eg.M(),K.h(0),Z.set(J),Z.N("u14",H,H),X.l(!1,!1),K=k.eg),r&&(k.gg.o(),Z.set("s23"),Z.N("u18",q,B/q),K.h(0),X.l(!1,!1),K=k.gg),K.h(0),K;var L=k.zb;if(a.normalize||n.Kd)C=a.normalize,Z.set(n.Kd?"s9":"s8"),Z.H("u10",C?H:1),k.fg.M(),L.h(0),X.l(!1,!1),L=k.fg;C=null;switch(n.type){case "cpuRGBA2Float":L.zh(!1);K?C=l.rn(L).then(n.B):(L=l.sn(L),n.B(L));break;case "cpuMeanFloat":L.zh(!0);if(K)C=L.un().then(n.B);else{L=L.vn();for(var A=0;A<L.length;++A);
n.B(L)}break;case "gpuRawAvg":case "gpuRaw":L.h(0);case "none":null!==n.B&&n.B(L)}K&&null===C&&(C=Promise.resolve());return C},se:function(C){a.Aa=C;b();d()},oo:function(C){C&&(n.type=C.Xd||"none",n.B=C.Wd||null,n.isLinear=C.dg?!0:!1);d();C="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var K=0,L=0,A=0;K<C;++K)n.buffer.push(L+(a.size-1-A)*a.size),n.results.push([-1,-1,-1,-1]),++L,L===a.size&&(L=0,++A);n.Kd="gpuRawAvg"===n.type||"cpuMeanFloat"===n.type;if(a.normalize||
n.Kd)k.fg=aa.instance({isFloat:!0,isPot:!0,width:a.size})},rn:function(C){return C.tn().then(e)},sn:function(C){C=C.Wi();e(C);return n.results},v:function(){for(var C in k){var K=k[C];K&&K.remove()}p&&(p.v(),p=null)}};a.be&&l.fo(a.be);return l}},ud={instance:function(a){var b=aa.instance(a.weights);return{kc:!0,Dd:function(){return 1},v:function(){b.remove()},km:function(){return b},wa:function(){Z.set("s29");b.h(1);X.l(!1,!1)}}}},xd={instance:function(a){var b=a.fromLayerSize,d=aa.instance(a.weights),
e=a.Sb?"s26":"s25";return{kc:!0,Dd:function(){return b},v:function(){d.remove()},wa:function(k){if(k.isEnabled){Z.set("s27");k.Vm.h(3);for(var m=Math.min(k.Lc.length,k.depth),v=0;v<m;++v)k.Lc[v].Ik(4+v)}else Z.set(e);a.Sb&&Z.he("u21",a.Ec);Z.H("u8",a.toLayerSize);Z.H("u9",a.fromLayerSize);d.h(1);X.l(!1,!1)}}}},vd={instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,k=e*d,m=k/b,v=b/d,n=0,q=0,r=0,y=Array(e*d*e*d*4),G=Array(e*d*e*d*4),w=Array(b*b),H=0;H<w.length;++H)w[H]=0;
H=Math.floor(e/2);for(var u=.5/d,f=.5/b,h=.5/k,B=0;B<d;++B)for(var J=Math.round(B*v),g=0;g<d;++g){var p=Math.round(g*v),l=B/d,C=g/d;l+=u;C+=u;for(var K=0;K<e;++K){var L=J+K-H;0>L&&(L+=b);L>=b&&(L-=b);for(var A=0;A<e;++A){var E=n/k,N=q/k,x=p+A-H;0>x&&(x+=b);x>=b&&(x-=b);var z=L/b,P=x/b;N=1-N-1/k;z+=f;P+=f;E+=h;N+=h;var S=B*e+K,la=g*e+A;la=d*e-la-1;S=la*d*e+S;y[4*S]=E;y[4*S+1]=N;y[4*S+2]=z;y[4*S+3]=P;P=w[x*b+L]++;S=P%m;z=L*m+S;x=x*m+(P-S)/m;x=b*m-1-x;x=x*b*m+z;G[4*x]=E;G[4*x+1]=N;G[4*x+2]=l;G[4*x+3]=
C;++n>=k&&(n=0,++q);++r}}}w=null;var ba=aa.instance(a.weights);delete a.weights.data;var Q=aa.instance({width:k,isFloat:!0,array:new Float32Array(G),isPot:!0});G=null;var fa=aa.instance({width:k,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;return{kc:!0,Dd:function(){return m},v:function(){Q.remove();fa.remove();ba.remove()},wa:function(){Z.set("s24");ba.h(1);fa.h(2);X.l(!1,!1)}}}},yd={instance:function(a){var b=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,k=a.inputScale||
[1,1],m=aa.instance(a.weights);return{kc:!0,Dd:function(){return e},Rp:function(){return d},km:function(){return m},v:function(){m.remove()},wa:function(){Z.set("s28");Z.he("u28",k);Z.H("u26",b);Z.H("u27",d);Z.H("u8",a.toLayerSize);Z.H("u9",a.fromLayerSize);m.h(1);X.l(!1,!1)}}}},wd={instance:function(a,b){var d=a.fromLayerSize,e=a.toLayerSize,k=a.toSparsity,m=a.stride?a.stride:1,v=k*e/d,n=e<d,q=d/e,r=aa.instance(a.weights),y="s50"+[d.toString(),e.toString(),k.toString(),m.toString(),b].join("_");
Z.Bl(y)||(a=cb(b),e=[{type:"1f",name:"u8",value:e},{type:"1f",name:"u32",value:m}],n&&e.push({type:"1f",name:"u9",value:d}),d=[(n?v:k).toFixed(1),a],n&&d.push(q.toFixed(1)),Z.tm(n?"s46":"s45",y,d),Z.j(y,e.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));return{kc:!1,Dd:function(){return v},v:function(){r.remove()},wa:function(){Z.set(y);r.h(3);X.l(!1,!1)}}}},qd={instance:function(a){var b=a.Hi?a.Hi:3,d=a.ii?a.ii:64,e=a.Li?a.Li:64,k=a.Ba?!0:!1;a=
{isFloat:!1,width:d,isPot:!1,isFlipY:!1};var m=aa.instance(a),v=aa.instance(a),n=aa.instance(a),q=aa.instance(a),r=aa.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),y=1/d;return{process:function(G){Z.set("s42");q.o();X.l(k,!1);Z.set("s43");for(var w=0;w<b;++w)m.o(),Z.N("u14",y,0),X.l(k,!1),n.o(),q.h(0),X.l(k,!1),v.o(),m.h(0),Z.N("u14",0,y),X.l(k,!1),q.o(),n.h(0),X.l(k,!1),w!==b-1&&v.h(0);Z.set("s44");r.o();G.h(0);v.h(1);q.h(2);X.l(k,!1);r.h(0)},Dc:function(){return r}}}},rd={instance:function(a){function b(y){return aa.instance({isFloat:y,
width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),e=b(!1),k=[b(!1),b(!1),b(!1)],m=[b(!1),b(!1),b(!1)],v=b(!0),n=[e,m[0],m[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6));
var q="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),r={u1:0};Z.tc([{id:"s52",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",
s:r,i:["u1"],precision:"lowp"},{id:"s53",name:"_",g:a,s:r,i:["u1","u33"],precision:"lowp"},{id:"s54",name:"_",g:q,s:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){Z.set("s52");e.M();X.l(d.Ba,!1);Z.set("s53");for(var y=0;3>y;++y)Z.N("u33",1,0),k[y].o(),n[y].h(0),X.l(!1,!1),Z.N("u33",0,1),m[y].o(),k[y].h(0),X.l(!1,!1);Z.set("s54");v.o();e.h(0);m[0].h(1);m[1].h(2);m[2].h(3);X.l(!1,!1);v.h(0)},Dc:function(){return v}}}},sd={instance:function(a){function b(r){return aa.instance({isFloat:r,
width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),e=b(!1),k=b(!1),m=b(!1),v=b(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6));var n="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",
d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),q={u1:0};Z.tc([{id:"s55",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",s:q,i:["u1"],precision:"lowp"},{id:"s56",name:"_",g:a,s:q,i:["u1","u33"],precision:"lowp"},{id:"s57",name:"_",g:n,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){Z.set("s55");e.M();X.l(d.Ba,!1);Z.set("s56");Z.N("u33",
1,0);k.o();e.h(0);X.l(!1,!1);Z.N("u33",0,1);m.o();k.h(0);X.l(!1,!1);Z.set("s57");v.o();e.h(0);m.h(1);X.l(!1,!1);v.h(0)},Dc:function(){return v}}}},td={instance:function(a){function b(y){return aa.instance({isFloat:y,width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Sa:9,Z:128,gain:1,hg:0,Hc:!1,Ba:!1},a),e=b(!1),k=null,m=null,v=null;d.Hc&&(k=b(!1),m=b(!1),v=b(!0));a={u1:0};var n=[{id:"s58",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.hg.toFixed(4)),s:a,i:["u1"],precision:"lowp"}];if(d.Hc){var q="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6)),r="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4));n.push({id:"s59",name:"_",g:q,s:a,i:["u1","u33"],precision:"lowp"},{id:"s60",name:"_",g:r,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}Z.tc(n);return{process:function(){Z.set("s58");e.M();X.l(d.Ba,!1);d.Hc?(Z.set("s59"),Z.N("u33",1,0),k.o(),e.h(0),X.l(!1,!1),Z.N("u33",0,1),m.o(),k.h(0),X.l(!1,!1),Z.set("s60"),v.o(),e.h(0),m.h(1),X.l(!1,!1),v.h(0)):e.h(0)},Ql:function(){return 2-d.hg},Dc:function(){return d.Hc?v:e}}}},Gb=function(){function a(f,
h,B,J,g,p,l){if(!H)if(l===p.length)g();else{switch(p[l]){case "A":B();break;case "D":f();break;case "S":h().then(function(C,K){u.Hj();a(f,h,B,K?null:J,g,p,++l)}).catch(function(C){console.log("An error occurred in the WebAR loop: ",C);g()});return;case "R":J&&J()}a(f,h,B,J,g,p,++l)}}var b={n:5,ag:1,zi:0,zd:[35,49],wd:[2,200],k:.7,Do:200,gn:.05},d=-1,e=null,k=-1,m=-1,v=0,n=-1,q=-1,r=0,y=0,G=b.wd[1],w=Math.log(2),H=!0,u={V:function(){switch(d){case -1:return-1;case 0:return q+e.zi;case 1:return r}},
Rh:function(f){return Math.pow(Math.min(Math.max(n,0),e.n-1)/(e.n-1),f||1)},m:function(f){e=Object.assign({},b,f);n=q=e.ag;d=0;u.reset()},Hj:function(f){f=("undefined"===typeof f?Date.now():f)||0;var h=Math.min(Math.max(f-y,e.wd[0]),e.wd[1]);G=h;y=f;var B=-1===k?0:e.k;k=Math.min(Math.max(1E3/h,5),120)*(1-B)+k*B;f-m>e.Do&&5<++v&&(h=e.k,n=n*(1-h)+(k<e.zd[0]?q-1:k>e.zd[1]?q+1:q)*h,Math.abs(n-q)>1-e.gn&&(h=Math.min(Math.max(Math.round(n),0),e.n-1),h!==q&&(n=q=h,k=(e.zd[1]-e.zd[0])/2)),m=f)},pg:function(f,
h,B,J,g,p){H=!1;a(f,h,B,J,g,p,0)},stop:function(){H=!0},$n:function(f){r=f;d=1},Co:function(){d=0;u.reset()},reset:function(){G=b.wd[1];m=k=-1;v=0},Dq:function(f,h,B){B=Math.exp(-w*G/B);return(1-B)*f+B*h},Ip:function(){return G}};return u}(),Oc=function(){function a(G,w){var H=G[0]-.5;G=G[1]-.5;var u=w[0]-.5;w=w[1]-.5;return H*H+G*G-(u*u+w*w)}var b={Ii:4,Yd:[1.5,1.5,2],ra:[.1,.1,.1],cj:1,Z:-1,Bf:-1,xo:2,dn:1,qg:!0,zl:.8},d=null,e=[],k=[],m=[],v=[0],n=[.5,.5,1],q=null,r=0,y=[0,0,0];return{m:function(G){d=
Object.assign({},b,G);e.splice(0);k.splice(0);m.splice(0);r=0;G=d.Yd[0]*d.ra[0];var w=d.Yd[1]*d.ra[1],H=1/(1+d.Yd[2]*d.ra[2]),u=d.cj*Math.min(d.Z,d.Bf),f=u/d.Z;u/=d.Bf;var h=.5*d.zl;h*=h;for(var B=0;B<d.Ii;++B){var J=[];k.push(J);var g=Math.pow(H,B),p=f*g,l=u*g;g=p*d.dn;m.push(g);var C=p*G,K=l*w;p/=2;l/=2;for(var L=1+(1-p-p)/C,A=1+(1-l-l)/K,E=0;E<A;++E)for(var N=l+E*K,x=N-.5,z=0;z<L;++z){var P=p+z*C,S=P-.5;S*S+x*x>h||(P=[P,N,g],e.push(P),J.push(P))}d.qg&&J.sort(a);q=e}d.qg&&e.sort(a)},get:function(G){var w=
q.length;if(0===w)return n;for(;G>=v.length;)v.push(0);v[G]>=w&&(v[G]=0);var H=q[Math.floor(v[G])%w];v[G]=(v[G]+1/d.xo)%w;if(0===r)return H;y[0]=H[0];y[1]=H[1];y[2]=r;return y},hq:function(G){G>=v.length||(v[G]=Math.floor(Math.random()*q.length))},vq:function(G){r=G;if(0===r)q=e;else{for(var w=m.length,H=w-1,u=0;u<w;++u)if(m[u]<=G){H=u;break}q=k[H]}},reset:function(){for(var G=e.length/v.length,w=0;w<v.length;++w)v[w]=Math.floor(w*G);r=0;q=e}}}(),zb=function(){function a(){d(f+H.Xf);h.port.postMessage("DONE")}
function b(){p.gd=0===H.ya?J(d):J(e)}function d(A){g.Wb&&null!==u&&(A-=f,A=Math.min(Math.max(A,H.Dh[0]),H.Dh[1]),f+=A,m(),l.isEnabled&&l.Ic&&g.Na&&f-l.Kf>H.dh&&(r(),l.Kf=f),u(f))}function e(A){g.Wb&&(p.timeout=setTimeout(d.bind(null,A),H.ya))}function k(){u=null;g.Wb=!1;m()}function m(){p.gd&&(window.cancelAnimationFrame(p.gd),p.gd=null);p.timeout&&(window.clearTimeout(p.timeout),p.timeout=null)}function v(A){A&&!g.Na?(g.Na=!0,B&&Gb.Co(),h.port.postMessage("STOP"),Ga.Ij(!0),b()):!A&&g.Na&&(g.Na=!1,
B&&Gb.$n(1),Ga.Ij(!1),h.port.postMessage("START"))}function n(A){A.target.hidden?K():C()}function q(A,E,N){E=A.createShader(E);A.shaderSource(E,N);A.compileShader(E);return E}function r(){l.Ic=!1;var A=l.Xa,E=l.Fd,N=l.Gd,x=l.za;A.uniform1f(l.bi,Math.random());l.Xb?E.beginQueryEXT(x,N):A.beginQuery(x,N);A.drawElements(A.POINTS,1,A.UNSIGNED_SHORT,0);l.Xb?E.endQueryEXT(x):A.endQuery(x);Ga.flush();G().then(function(z){0===z||isNaN(z)?(l.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",
z)):(z=H.Xj*H.bh*1E3/z,l.we=(l.we+1)%H.qc,l.Lf[l.we]=z,++l.xi>H.qc&&(l.Md.set(l.Lf),l.Md.sort(function(P,S){return P-S}),z=l.Md[Math.floor(H.qc/2)],l.yd=Math.max(l.yd,z),H.ah(z/l.yd)),l.Ic=!0)}).catch(function(){l.Ic=!0})}function y(A){var E=l.Xa,N=l.Fd,x=l.Gd;x=l.Xb?N.Cp(x,N.QUERY_RESULT_AVAILABLE_EXT):E.getQueryParameter(x,E.QUERY_RESULT_AVAILABLE);E=E.getParameter(N.GPU_DISJOINT_EXT);x?A(!E):setTimeout(y.bind(null,A),.1)}function G(){return new Promise(function(A,E){y(function(N){if(N){N=l.Xa;
var x=l.Fd,z=l.Gd;N=l.Xb?x.getQueryObjectEXT(z,x.QUERY_RESULT_EXT):N.getQueryParameter(z,N.QUERY_RESULT);A(N)}else E()})})}var w={mi:!0,Dh:[1,200],Xf:20,ya:0,bh:50,Xj:240,dh:3E3,qc:3,ah:null},H=null,u=null,f=0,h=null,B=!1,J=null,g={Ma:!1,Na:!0,Jf:!1,Hf:!1,Gf:!1,Wb:!1},p={gd:null,timeout:null},l={isEnabled:!1,Ic:!1,Xa:null,Fd:null,Gd:null,za:null,bi:null,Xb:!0,Kf:0,xi:0,Lf:null,Md:null,we:0,yd:0},C=v.bind(null,!0),K=v.bind(null,!1),L={m:function(A){H=Object.assign(w,A);Object.assign(g,{Na:!0,Ma:!0,
Wb:!1});J=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==H.ah){A=document.createElement("canvas");A.setAttribute("width","1");A.setAttribute("height","1");var E={antialias:!1};A=A.getContext("webgl2",E)||A.getContext("webgl",E);if(E=A.getExtension("EXT_disjoint_timer_query")||A.getExtension("EXT_disjoint_timer_query_webgl2")){l.Xa=A;l.Fd=E;l.isEnabled=!0;l.Xb=E.beginQueryEXT?!0:!1;var N=q(A,A.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),x=q(A,A.FRAGMENT_SHADER,
"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",H.bh.toString())),z=A.createProgram();A.attachShader(z,N);A.attachShader(z,x);A.linkProgram(z);N=A.getAttribLocation(z,"a0");l.bi=A.getUniformLocation(z,"u39");A.useProgram(z);A.enableVertexAttribArray(N);z=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,z);A.bufferData(A.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),A.STATIC_DRAW);A.vertexAttribPointer(N,4,A.FLOAT,
!1,16,0);z=A.createBuffer();A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,z);A.bufferData(A.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),A.STATIC_DRAW);A.disable(A.DEPTH_TEST);A.disable(A.DITHER);A.disable(A.STENCIL_TEST);A.viewport(0,0,1,1);z=l.Xb?E.createQueryEXT():A.createQuery();l.Gd=z;l.za=E.TIME_ELAPSED_EXT||A.TIME_ELAPSED;l.Kf=-H.dh;l.Lf=new Float32Array(H.qc);l.Md=new Float32Array(H.qc);l.yd=0;l.we=0;l.xi=0;l.Ic=!0}}if(H.mi){A=!1;try{if("undefined"===typeof SharedWorker){var P=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
H.Xf.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),S=new Worker(P);S.addEventListener("message",a);h={Ui:S,port:S};g.Jf=!0}else{var la=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
H.Xf.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ba=new SharedWorker(la);ba.port.start();ba.port.addEventListener("message",a);h={Ui:ba,port:ba.port};g.Hf=!0}A=!0}catch(Q){}A&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",n):(window.addEventListener("blur",K),window.addEventListener("focus",C)),window.addEventListener("pagehide",
K),window.addEventListener("pageshow",C),g.Gf=!0)}B="undefined"!==typeof Gb},v:function(){k();g.Gf&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",n):(window.removeEventListener("blur",K),window.removeEventListener("focus",C)),window.removeEventListener("pagehide",K),window.removeEventListener("pageshow",C),g.Gf=!1);g.Hf?(h.port.close(),g.Hf=!1):g.Jf&&(h.Ui.terminate(),g.Jf=!1);Object.assign(g,{Na:!0,Ma:!1,Wb:!1});u=null},eq:function(){return g.Na},update:function(A){Object.assign(H,
A)},pg:function(A){g.Ma||L.m({});m();g.Wb=!0;u=A;g.Na&&b()},stop:k};return L}(),zc={mf:function(){return Date.now()},Fp:function(){return performance.now()}},wb=function(){function a(Y){switch(C){case l.movePinch:var oa=-Y.deltaY;0===K&&f("pinch",-1,.001*oa,null)}Y.deltaY;Y.preventDefault()}function b(Y){if(-1!==K)switch(C){case l.swipe:if(1!==K)break;q();y(Y,A);var oa=A[0]-L[0];k(oa);Y=oa/(20*J.offsetWidth/100);f("swipeMove",Math.min(Math.max(Y,-1),1),Y,null);break;case l.movePinch:if(2===K||3===
K){y(Y,A);oa=A[0]-L[0];var ea=A[1]-L[1];2===K?(W+=Math.sqrt(oa*oa+ea*ea),10>W?(L[0]=A[0],L[1]=A[1]):(va||(va=!0,f("moveStart",null,null,null)),ja[0]=oa,ja[1]=ea,N[0]=oa-E[0],N[1]=ea-E[1],f("move",ja,N,null),E[0]=ja[0],E[1]=ja[1])):3===K&&(Y=r(Y)/ma,f("pinch",Y,Y-Da,null),Da=Y)}}}function d(Y){if(-1!==K)switch(C){case l.swipe:if(1!==K)break;q();y(Y,A);Y=A[0]-L[0];var oa=0>Y;(Y=20<100*Math.abs(Y)/J.offsetWidth)&&oa?f("swipeLeft",x,null,null):Y&&!oa&&f("swipeRight",x,null,null);var ea=function(){setTimeout(function(){n();
K=0;f("swipeEnd",null,null,null)},202)};Y?(Y=function(){var ca=(oa?-1:1)*J.width,Ca=(oa?1:-1)*ca/J.width;x.style.transitionDuration=(400).toString()+"ms";x.style.left=(ba[0]+ca).toString()+"px";x.style.top=ba[1].toString()+"px";x.style.transform="rotate( "+Ca.toString()+"rad )";ea()},la?Y():Q=Y):(x.style.transitionDuration=(200).toString()+"ms",x.style.opacity="0",x.style.left=ba[0].toString()+"px",x.style.top=ba[1].toString()+"px",x.style.transform="",ea());K=-1;break;case l.movePinch:if(2===K||
3===K)K===K.move?f("moveEnd",null,null,null):3===K&&f("pinchEnd",null,null,null),K=0}}function e(Y){Y.preventDefault();if(-1!==K)switch(C){case l.swipe:if(0!==K)break;q();K=1;fa=setTimeout(function(){n();fa=null;1===K&&(K=0,f("swipeEnd",null,null,null))},1E3);m();f("swipeStart",null,null,null);f("swipeGetCanvas",x,P,z);y(Y,L);break;case l.movePinch:0!==K?2!==K||va||void 0===Y.changedTouches&&void 0===Y.touches||(ma=r(Y),20<ma&&(K=3,Da=1,f("pinchStart",null,null,null))):3!==K&&(va=!1,y(Y,L),E[0]=0,
E[1]=0,K=2,W=0)}}function k(Y){var oa=0>Y;x.style.left=ba[0]+Y+"px";x.style.transformOrigin=oa?O:t;x.style.transform="rotate( "+((oa?1:-1)*Y/J.width).toString()+"rad )"}function m(){la=!1;var Y=J.getBoundingClientRect();ba[0]=Y.left;ba[1]=Y.top;x.width=Math.round(J.width/4);x.height=Math.round(J.height/4);z.width=x.width;z.height=x.height;x.style.width=J.offsetWidth+"px";x.style.height=J.offsetHeight+"px";x.style.left=ba[0]+"px";x.style.top=ba[1]+"px";setTimeout(v,0)}function v(){P.drawImage(J,0,
0,x.width,x.height);S.drawImage(x,0,0);la=!0;document.body.appendChild(x);Q&&(Q(),Q=!1)}function n(){x.style.transitionDuration="0ms";x.style.opacity="1";x.style.transform="";la&&(document.body.removeChild(x),la=!1)}function q(){fa&&(window.clearTimeout(fa),fa=null)}function r(Y){G(Y,ka,0);G(Y,na,1);return Math.sqrt(ka[0]*ka[0]+na[0]*na[0])}function y(Y,oa){void 0!==Y.changedTouches||void 0!==Y.touches?G(Y,oa,0):(oa[0]=Y.pageX,oa[1]=Y.pageY)}function G(Y,oa,ea){Y.touches.length>ea?(oa[0]=Y.touches[ea].pageX,
oa[1]=Y.touches[ea].pageY):(oa[0]=Y.changedTouches[ea].pageX,oa[1]=Y.changedTouches[ea].pageY)}function w(){p.forEach(function(Y){J.removeEventListener(Y.type,Y.tb,!1)});return p.splice(0,p.length)}function H(Y){Y.forEach(function(oa){u(oa.type,oa.tb)})}function u(Y,oa){J.removeEventListener(Y,oa,!1);x.removeEventListener(Y,oa,!1);J.addEventListener(Y,oa,!1);x.addEventListener(Y,oa,!1);0===p.filter(function(ea){return ea.type===Y&&ea.tb===oa}).length&&p.push({type:Y,tb:oa})}function f(Y,oa,ea,ca){g[Y].forEach(function(Ca){Ca.tb(oa,
ea,ca)})}function h(Y){return Y[0]+"% "+(100-Y[1]).toString()+"%"}var B=!1,J=null,g={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],moveStart:[],moveEnd:[]},p=[],l={idle:0,swipe:1,movePinch:2},C=l.idle,K=0,L=[0,0],A=[0,0],E=[0,0],N=[0,0],x=document.createElement("canvas"),z=document.createElement("canvas"),P=x.getContext("2d"),S=z.getContext("2d");x.style.position="fixed";x.style.zIndex="800";x.style.cursor="move";x.style.pointerEvents=
"none";x.className="swipeImage";x.setAttribute("draggable",!1);var la=!1,ba=[0,0],Q=null,fa=null,t=h([50,100]),O=h([50,0]),D=null,W=0,ja=[0,0],ma=0,va=!1,Da=1,ka=[0,0],na=[0,0],Fa={init:function(Y){if(B)Fa.switch_canvas(Y.qa);else return J=Y.qa,u("mousedown",e),u("mouseup",d),u("mouseout",d),u("mousemove",b),u("mousemove",b),u("wheel",a),u("touchstart",e),u("touchend",d),u("touchmove",b),B=!0,Fa},switch_canvas:function(Y){if(!B)Fa.init({qa:Y});else if(J!==Y){var oa=w();J=Y;H(oa);for(var ea in g)for(Y=
g[ea],oa=Y.length-1;0<=oa;--oa)Y[oa].yn&&Y.splice(oa,1)}},get_mode:function(){for(var Y in l)if(l[Y]===C)return Y;return!1},switch_mode:function(Y){B&&"undefined"!==typeof l[Y]&&(Y=l[Y],C!==Y&&(q(),C=Y,K=0))},add_listener:function(Y,oa,ea){g[Y].push({tb:oa,yn:"undefined"===typeof ea?!1:ea});return Fa},remove_listener:function(Y){g[Y].splice(0,g[Y].length);return Fa},animate_swipe:function(Y,oa){D&&(clearInterval(D),D=null);m();var ea=J.width/(oa/1E3)*("left"===Y?-1:1),ca=0,Ca,lb=Date.now();D=setInterval(function(){D&&
(Ca=Date.now(),ca+=(Ca-lb)/1E3*ea,k(ca),lb=Ca,Math.abs(ca)>.75*J.width&&D&&(clearInterval(D),D=null,n()))},16)}};return Fa}();window.CanvasListeners=wb;var T={VERSION:"3.8.7",dd:[],cd:[],Fe:!1,Ee:!1,Ge:!1,ready:!1,isBusy:!1},$a={idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:45,FOVforced:0,De:10,Ce:8E3},Qc={Jc:!0,Ud:"models3D",Td:"materials",Ao:"tweakers",neuralNetworkPath:"built/jeefitNNC_60_0.json",neuralNetworkVersion:"60_0",
ca:"",ua:"",$c:"",ya:0,hk:20,width:1024,height:1024,oi:!0,fn:[2,3.5],aj:300,ad:[1,6],scanOverlapFactors:[2,2,3],scanNScaleLevels:2,scanScale0Factor:.7,ra:[.2,.2,.3],nc:[[.8,.5],[.8,.5],[1,1]],yo:30,gl:.9,qn:[.2,.6],pn:1,zo:[.01,.035],Hn:[.003,.007],Jg:[0,.6],Dl:.2,ab:[.698111,1.047166,.122169],Gj:[-.1,0,0],ae:[0,-62,8],ln:1.03,Ea:[0,-60,0],$f:50,Ac:.4,jf:73,Ie:[.02,1],fk:[4,1],Mk:[0,.5],Jn:.15,Gn:1,Cn:[.5,4],No:20,Ap:!1,Fc:145,Af:-18,yf:20,zf:3,Mc:[-110,0],ic:1,vj:.4,wj:3,ke:[0,0,0],jc:[1.1,1],pd:0,
Ze:.95,Ye:90,Xe:50,hd:30,Lb:.05,wf:!0,Qd:!0,Sf:"images/masks/target.jpg",Tf:!1,Pd:[1/255,175/255,236/255,0],Rd:-.001,Rf:3.14,Me:0,Le:"images/masks/burka.png",Je:Math.PI-Math.PI/4,We:Math.PI/4,og:[.3,.2,.1],Zb:1,Ai:[700,90],Pm:[.2,.04],Oo:"images/backgrounds/viewer3D.png",$g:[0,0,0],Zg:[0,15,60],Ae:.3,Wo:50,So:Xc?Za:!1,To:Xc?Za:!1,Vo:1E3,Yo:1E3,Uo:40,Ro:[0,0,-400],Di:.1,Tm:.5,Ei:[.5,1.5],Sd:30,Sm:!0},I=Object.assign({},Qc);V.uh=!0;V.vh=!0;V.th=!1;V.Pa=!0;var bb={ce:3.5,Ab:"images/debug/picsou.png",
Sc:45,Pf:.785,Qf:.3925,Od:5,Nd:2,Of:0,Nf:0,Po:"images/backgrounds/bg1.jpg",Qo:"images/backgrounds/bg1_light.jpg",Tj:1,Uj:2};I.fx=[4,50];I.Mc=[-110,0];I.vj=.25;I.wj=3;I.ke=[0,-2,20];I.jc=[.95,1];V.Qc=2.1289;V.ig=1;bb.ce=2.5858;bb.Pf=.4388;bb.Qf=.118;bb.Ab="images/debug/hdri2.png";bb.Sc=180;bb.rg=.8065;bb.Od=5.3887;bb.Nd=.5351;bb.Of=-.3019;bb.Nf=0;bb.Tj=3.5288;bb.Uj=6.2168;var Pc={element:null,Fh:null,Ld:!1,rh:null,ha:null,Pg:null,deviceId:-1,Pb:-1,vd:0,Si:null,ze:-1},Ba=Object.assign({},Pc),gb=null,
Yc=I.fn,Ec=window.devicePixelRatio?window.devicePixelRatio:1;var qc={Cl:Math.max(Yc[0],Ec)/Ec,gf:Math.min(Ec,Yc[1])};var eb=null;T.onLoad=function(a){T.ready?a():T.dd.push(a)};T.onHalfLoad=function(a){T.load_model?a():T.cd.push(a)};T.onWebcamAsk=function(a){T.Fe=a};T.onContextLost=function(a){T.Ee=a};T.onWebcamGet=function(a){T.Ge=a};T.get_onHalfLoadCallstack=function(){return T.cd};T.set_size=function(a,b,d){d=d?qc.gf:1;I.width=a*d;I.height=b*d};T.get_videoDevices=function(a){cd(a)};T.set_videoDevice=
function(a){Ba.deviceId=a};T.set_videoSizes=function(a,b,d,e,k,m){$a.idealWidth=a;$a.idealHeight=b;$a.minWidth=d;$a.maxWidth=e;$a.minHeight=k;$a.maxHeight=m};T.set_loading=function(a,b,d){a&&(I.Tf=!0,I.Sf=a);"number"===typeof b&&(a=new Yb(b),I.Pd=[a.r,a.X,a.b,0]);"number"===typeof d&&(I.Rd=d)};T.set_settings=function(a,b,d){a&&Object.assign(I,a);b&&Object.assign($a,b);d&&Object.assign(bb,d)};T.get_size=function(){return{width:I.width,height:I.height}};T.get_cv=function(){return jb.ub()};T.set_NNCPath=
function(a){I.$c=a};T.set_materialsPath=function(a){I.Td=a};T.set_modelsPath=function(a){I.Ud=a};T.destroy=function(){return eb?eb.v():Promise.resolve()};T.update_lightSettings=function(a){a=Object.assign({screenTextureURL:null,screenLuminosity:-1,lightDirFactor:-1,lightAmbFactor:-1,screenWidthAngle:-1},a);0<=a.lightDirFactor&&(bb.Od=a.lightDirFactor);0<=a.lightAmbFactor&&(bb.Nd=a.lightAmbFactor);0<=a.screenLuminosity&&(bb.ce=a.screenLuminosity);0<=a.screenWidthAngle&&(bb.Sc=a.screenWidthAngle);a.screenTextureURL&&
(bb.Ab=a.screenTextureURL);T.ready&&(eb.Cj(),ua.Ia.jh(Ba.ha))};T.init2=function(a){var b=Object.assign({basePath:null,modelsPath:null,materialsPath:null,materialTextureBasePath:null,NNCPath:null,cv:null,isRequestCamera:!0,width:512,height:512,isMirror:!0,isApplyOverSampling:!1,scanOverlapFactors:null,scanNScaleLevels:null,scanScale0Factor:null},a);I.Jc=b.isRequestCamera;T.set_size(b.width,b.height,b.isApplyOverSampling);T.update_lightSettings(a);b.modelsPath&&(I.Ud=b.modelsPath);b.materialsPath&&
(I.Td=b.materialsPath);b.materialTextureBasePath&&(V.Gi=b.materialTextureBasePath);b.NNCPath&&(I.$c=b.NNCPath);I.scanOverlapFactors=b.scanOverlapFactors||I.scanOverlapFactors;I.scanNScaleLevels=b.scanNScaleLevels||I.scanNScaleLevels;I.scanScale0Factor=b.scanScale0Factor||I.scanScale0Factor;I.oi=b.isMirror;return new Promise(function(d,e){T.onHalfLoad(d);T.init(b.basePath,function(){},e,b.cv)})};T.init=function(a,b,d,e){eb=dd();T.qb=d?function(k,m){d(k,m);T.qb=!1}:function(){};T.ep=eb;a&&(I.ca=a);
b&&T.dd.push(b);eb.Cj();a=eb.Xl();return jb.m({Ve:"jeefitCanvas",qa:e,width:a.width,height:a.height,debug:!1,cg:function(){T.Ee&&T.Ee()},premultipliedAlpha:!0})?I.Jc?gd():hd():(T.qb&&T.qb("GL_INCOMPATIBLE","Cannot init Context"),!1)};window.JEELIZVTO=T;var Mc=function(){function a(){Aa.ba();c.viewport(0,0,1,1);Z.set("s73");e.h(0);X.l(!1);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,m);b(0<m[0])}var b=null,d=!1,e=null,k=!1,m=null,v={m:function(n){if(k)return!1;e=n;Z.tc([{id:"s73",name:"_",g:"uniform sampler2D u41;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u41,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",
i:["u41"],precision:"lowp"}]);Z.j("s73",[{type:"1i",name:"u41",value:0}]);m=new Uint8Array(4);return k=!0},start:function(n,q){v.stop();b=q;d=window.setInterval(a,n)},stop:function(){d&&(window.clearInterval(a),d=!1)}};return v}(),Fc={};Yb.prototype={constructor:Yb,r:1,X:1,b:1,set:function(a){a instanceof Yb?this.L(a):"number"===typeof a?Sc(this,a):"string"===typeof a&&id(this,a);return this},Mn:function(){function a(b,d,e){0>e&&(e+=1);1<e&&--e;return e<1/6?b+6*(d-b)*e:.5>e?d:e<2/3?b+6*(d-b)*(2/3-
e):b}return function(b,d,e){b=Fc.Math.Bp(b,1);d=Fc.Math.Qe(d,0,1);e=Fc.Math.Qe(e,0,1);0===d?this.r=this.X=this.b=e:(d=.5>=e?e*(1+d):e+d-e*d,e=2*e-d,this.r=a(e,d,b+1/3),this.X=a(e,d,b),this.b=a(e,d,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.X,this.b)},L:function(a){this.r=a.r;this.X=a.X;this.b=a.b;return this},add:function(a){this.r+=a.r;this.X+=a.X;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.X*=a.X;this.b*=a.b;return this},Ca:function(a){this.r*=
a;this.X*=a;this.b*=a;return this},sb:function(a,b){void 0===b&&(b=0);this.r=a[b];this.X=a[b+1];this.b=a[b+2];return this}};var jd={};tc.prototype={constructor:tc,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get w(){return this.P},set w(a){this.P=a},set:function(a,b,d,e){this.C=a;this.D=b;this.F=d;this.P=e;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.P)},L:function(a){this.C=a.x;
this.D=a.y;this.F=a.z;this.P=a.w;return this},inverse:function(){this.C*=-1;this.D*=-1;this.F*=-1;this.normalize();return this},rd:function(a){return this.C*a.C+this.D*a.D+this.F*a.F+this.P*a.P},Mf:function(){return this.C*this.C+this.D*this.D+this.F*this.F+this.P*this.P},length:function(){return Math.sqrt(this.C*this.C+this.D*this.D+this.F*this.F+this.P*this.P)},normalize:function(){var a=this.length();0===a?(this.F=this.D=this.C=0,this.P=1):(a=1/a,this.C*=a,this.D*=a,this.F*=a,this.P*=a);return this},
multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),Tc(this,a,b)):Tc(this,this,a)},sb:function(a,b){void 0===b&&(b=0);this.C=a[b];this.D=a[b+1];this.F=a[b+2];this.P=a[b+3];return this}};Zb.prototype={constructor:Zb,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},fj:function(a){this.x=a;
return this},gj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},L:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.ed(a,b);this.x+=a.x;this.y+=a.y;return this},ed:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.gb(a,b);this.x-=a.x;this.y-=a.y;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},bf:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},Qe:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},rd:function(a){return this.x*a.x+this.y*a.y},Mf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.bf(this.length())},
sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this}};Va.prototype={constructor:Va,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},fj:function(a){this.x=a;return this},gj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},L:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.ed(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},ed:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.gb(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},bf:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},Qe:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},rd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Mf:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.bf(this.length())},sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}};$b.Wj="XYZ";$b.prototype={constructor:$b,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get order(){return this.Ra},set order(a){this.Ra=a},set:function(a,b,d,e){this.C=
a;this.D=b;this.F=d;this.Ra=e||this.Ra;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.Ra)},L:function(a){this.C=a.C;this.D=a.D;this.F=a.F;this.Ra=a.Ra;return this},sb:function(a){this.C=a[0];this.D=a[1];this.F=a[2];void 0!==a[3]&&(this.Ra=a[3]);return this}};Bc.prototype={constructor:Bc,set:function(a,b){this.min.L(a);this.max.L(b);return this},clone:function(){return(new this.constructor).L(this)},L:function(a){this.min.L(a.min);this.max.L(a.max);return this},
empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||new Va).gb(this.max,this.min)},getParameter:function(a,b){return(b||new Va).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};ac.prototype={constructor:ac,set:function(a,b,d,e,k,m,v,n,q,r,y,G,w,H,u,f){var h=this.elements;h[0]=a;h[4]=b;
h[8]=d;h[12]=e;h[1]=k;h[5]=m;h[9]=v;h[13]=n;h[2]=q;h[6]=r;h[10]=y;h[14]=G;h[3]=w;h[7]=H;h[11]=u;h[15]=f;return this},clone:function(){return(new ac).sb(this.elements)},L:function(a){this.elements.set(a.elements);return this},multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),Vc(this,a,b)):Vc(this,this,a)},Ca:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var b=this.elements,d=a.x,e=a.y;a=a.z;b[0]*=d;b[4]*=e;b[8]*=a;b[1]*=d;b[5]*=e;b[9]*=a;b[2]*=d;b[6]*=e;b[10]*=a;b[3]*=d;b[7]*=e;b[11]*=a;return this},sb:function(a){this.elements.set(a);return this}};Cc.prototype={constructor:Cc,
clone:function(){return(new this.constructor).L(this)},L:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Da.L(a.Da);this.color.L(a.color);this.$b=a.$b;for(var b=0,d=a.ye.length;b<d;b++)this.ye[b]=a.ye[b].clone();b=0;for(d=a.Xg.length;b<d;b++)this.Xg[b]=a.Xg[b].clone();return this}};var F=function(){function a(p,l,C){l=p.createShader(l);p.shaderSource(l,C);p.compileShader(l);return p.getShaderParameter(l,p.COMPILE_STATUS)?l:!1}function b(p,l){ha.la()&&(l.g=l.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));
l.vf=a(p,p.VERTEX_SHADER,l.u,l.name+" VERTEX");l.uf=a(p,p.FRAGMENT_SHADER,l.g,l.name+" FRAGMENT");var C=p.createProgram();p.attachShader(C,l.vf);p.attachShader(C,l.uf);p.linkProgram(C);return C}function d(p){p.u="#version 300 es\n"+p.u.replace(/varying/g,"out");p.g="#version 300 es\n"+p.g.replace(/varying/g,"in");p.u=p.u.replace(/texture2D\(/g,"texture(");p.g=p.g.replace(/texture2D\(/g,"texture(");p.da||(p.g=p.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),p.g=p.g.replace(/gl_FragColor/g,
"FragColor"));var l=0,C=[];p.u=p.u.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(K,L,A){var E="";A.split(",").forEach(function(N){N=N.trim();E+="layout(location = "+l+") in "+L+" "+N+";\n";C.push(N);++l});return E});p.ak=C}function e(p){return["float","sampler2D","int"].map(function(l){return"precision "+p+" "+l+";\n"}).join("")}function k(p,l){if(l.hi)return!1;var C=ha.la();V.Wp||C||p.enableVertexAttribArray(0);void 0===l.da&&(l.da=!1);l.da&&(l.bd=C?3:2);l.id=J++;void 0===l.bd&&
(l.bd=2);void 0===l.precision&&(l.precision="highp");l.da&&(l.g=(ha.la()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":"#extension GL_EXT_draw_buffers : require\n")+l.g);void 0===l.u&&(l.u="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var K=e(l.precision);
l.g=K+l.g;l.u=K+l.u;C&&3<=l.bd&&d(l);l.Fa&&l.Fa.forEach(function(L){l.u=l.u.replace(L.search,L.replace);l.g=l.g.replace(L.search,L.replace)});l.na=b(p,l);l.A={};l.i.forEach(function(L){l.A[L]=p.getUniformLocation(l.na,L)});l.attributes={};l.va=[];l.Wg=0;void 0===l.K&&(l.K=["a0"]);void 0===l.R&&(l.R=[2]);l.K.forEach(function(L,A){var E=C&&3<=l.bd?l.ak.indexOf(L):p.getAttribLocation(l.na,L);l.attributes[L]=E;l.va.push(E);l.Wg+=4*l.R[A]});l.set=function(){h!==l.id&&(-1!==h&&B.J(),h=l.id,B=l,p.useProgram(l.na),
l.va.forEach(function(L){0!==L&&p.enableVertexAttribArray(L)}))};l.J=function(){h=-1;l.va.forEach(function(L){0!==L&&p.disableVertexAttribArray(L)})};l.hi=!0}function m(p,l){k(p,l);l.set();h=-1;return l}function v(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"highp"}}function n(){g.j("s104",[{type:"1i",name:"u1",value:0}]);g.j("s105",[{type:"1i",name:"u153",value:0}]);g.j("s106",[{type:"1i",name:"u74",value:0}])}function q(){var p=
"u41 u143 u144 u145 u146 u42 u78".split(" ").concat(H,u);f.s107={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 v=s(a);vec3 w=mix(u143,u83,c);float x=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u81,1.,u85);vec2 j=u80/t;vec3 k=a0;float A=max(0.,-a0.z-u145)*u146;k.x+=A*sign(a0.x)*(1.-u85);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u149,u150,a0.z);}",
i:["u149","u150"].concat(p),K:["a0"],precision:"highp"};f.s108={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u147"].concat(G,p),K:["a0","a1"],R:[3,2],precision:"lowp"};f.s109={name:"_",g:"uniform vec3 u147;void main(){gl_FragColor=vec4(u147,0.);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u147"].concat(p),R:[3],precision:"lowp"};f.s110={name:"_",g:"uniform vec4 u13;varying vec3 vv0;varying float vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 h=s(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 k=u80/t;vec3 l=a0;float z=max(0.,-a0.z-u145)*u146;l.x+=z*sign(a0.x)*(1.-u85);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u13","u78"].concat(p),K:["a0","a2"],precision:"highp"};f.s111={name:"_",g:"uniform sampler2D u153;uniform vec4 u13;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u153,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3);gl_FragColor=vec4(a,m);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 f=u85*e;vec3 c=u85*q;vec2 v=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u79,0.,0.),u82,c);float w=mix(texture2D(u41,t).r,0.,u85);a.z+=w;mat3 h=u(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 k=u80/v;vec3 l=a0;float B=max(0.,-a0.z-u145)*u146;l.x+=B*sign(a0.x)*(1.-u85);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u13","u78","u153"].concat(p),K:["a3","a0","a2","a1"],R:[4,3,3,2],precision:"highp"};f.s112={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u111","u148"].concat(p),precision:"lowp"};f.s113={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u111","u148"].concat(w,p),K:["a0","a1"],R:[3,2],precision:"lowp"};p=["u136","u124","u137"];f.s114={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=1.;}",i:p,precision:"highp"};f.s115={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a2,0.);gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:p,K:["a0","a2"],precision:"highp"};f.s105={name:"_",g:"uniform sampler2D u153;uniform vec3 u154;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u154),c=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u137*vec4(a2,0.),a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u153","u154"].concat(p),K:["a0","a2","a1","a3"],precision:"highp"};f.s104={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u136*u124*u137*vec4(a0,1.)+f,vv0=a1;}",i:["u147"].concat(G,p),K:["a0","a1"],
Fa:[{search:"0.0005",replace:Ga.fa()?"0.0005":"0.0"}],precision:"lowp"};f.s116={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;void main(){gl_Position=u136*u124*u137*vec4(a0,1.);}",i:["u111"].concat(p),precision:"highp"};f.s106={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;void main(){gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a1;}",i:["u111"].concat(w,p),K:["a0","a1"],R:[3,2],precision:"highp"}}function r(){for(var p in f)k(c,f[p])}var y=!1,G=["u1","u73"],w=["u74","u75"],H="u76 u77 u78 u79 u80 u81".split(" "),u="u82 u83 u84 u85 u86 u87".split(" "),f={},h=-1,B=null,J=0,g={pa:function(p,l){f[p]=l;y&&k(c,f[p])},lq:function(p,l){f[p]=l;l.hi=!1;k(c,f[p])},Yb:function(){return y},m:function(){f.s0=
v();f.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"lowp"};f.s74={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(-1.,1.)*vv0+vec2(1.,0.));}",i:["u1"],precision:"lowp"};f.s75={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){gl_FragColor=vec4(mix(texture2D(u12,vv0).rgb,texture2D(u1,vv0).rgb,u13*f),1.);}",i:["u1","u12",
"u13"],precision:"highp"};f.s76={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u12,vv0),texture2D(u1,vv0),u13*f);}",i:["u1","u12","u13"],precision:"highp"};f.s12={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 b=texture2D(u88,vv0*u89),c=texture2D(u1,vv0*u89);float a=smoothstep(u90,0.,vv0.y);a+=smoothstep(1.-u90,1.,vv0.y),gl_FragColor=pow(mix(c,b,a*f),u91*f);}",
i:["u1","u89","u88","u90","u91"]};f.s77={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),f=exp2(c);vec3 g=clamp(b/f,0.,1.);return vec4(g,(c+128.)/256.);}void main(){vec2 a=vv0*u89;float c=floor(a.x),d=mod(c,2.);a.x=mod(a.x,1.),a.x=mix(a.x,1.-a.x,d);vec3 f=texture2D(u88,a).rgb,g=texture2D(u1,a).rgb;float b=smoothstep(u90,0.,vv0.y);b+=smoothstep(1.-u90,1.,vv0.y);vec3 j=mix(g,f,b*h);vec4 k=i(pow(j,u91*h));gl_FragColor=k;}",
i:["u1","u89","u88","u90","u91"],precision:"highp"};f.s78={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:"lowp"};f.s79={name:"_",g:"uniform sampler2D u1,u92;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u14"],precision:"lowp"};f.s80={name:"_",g:"uniform sampler2D u1,u92,u41;uniform vec2 u14,u93;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;float c=texture2D(u41,vec2(.5,.5)).a,d=u93.x+pow(c,2.)*(u93.y-u93.x);vec3 j=mix(b/5.,texture2D(u92,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u92","u14","u41","u93"],precision:"lowp"};f.s81={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u14).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u14).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u14).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u14).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u14;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u14"],precision:"lowp"};f.s82={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);gl_FragColor=b/5.;}",i:["u1","u14"],precision:"lowp"};f.RGBEtoRGB={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",
i:["u1"],precision:"highp"};f.s13={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.,0.,0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:"highp"};f.s83={name:"_",g:"uniform sampler2D u94,u95;uniform float u96,u97;varying vec2 vv0;void main(){vec3 a=texture2D(u95,vv0).rgb,b=texture2D(u94,vv0).rgb;gl_FragColor=vec4(b*u97+u96*a,1.);}",
i:["u94","u95","u96","u97"],precision:"highp"};f.s84={name:"_",g:"uniform sampler2D u98,u99;uniform float u91;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u99,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u98,g).rgb,u91*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u98","u99","u91"],precision:"lowp",Fa:[{search:"8888",replace:V.wm[ha.V()]}]};f.s85={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u14).a+.110236*texture2D(u1,vv0-2.*u14).a+.220472*texture2D(u1,vv0-u14).a+.275591*a.a+.220472*texture2D(u1,vv0+u14).a+.110236*texture2D(u1,vv0+2.*u14).a+.031496*texture2D(u1,vv0+3.*u14).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u14"],precision:"lowp"};f.s86={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",
i:["u1"],precision:"lowp"};f.s87={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u14)+.110236*texture2D(u1,vv0-2.*u14)+.220472*texture2D(u1,vv0-u14)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u14)+.110236*texture2D(u1,vv0+2.*u14)+.031496*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};f.s88={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u14)+texture2D(u1,vv0-2.*u14)+texture2D(u1,vv0-u14)+texture2D(u1,vv0)+texture2D(u1,vv0+u14)+texture2D(u1,vv0+2.*u14)+texture2D(u1,vv0+3.*u14);gl_FragColor=a/7.;}",
i:["u1","u14"],precision:"lowp"};f.s89={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",i:["u1"],precision:"highp"};f.s90={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u88,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",
i:["u1","u88"],precision:"highp"};f.s91={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u88,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",i:["u1","u88"],precision:"highp"};f.s92=
{name:"_",g:"uniform sampler2D u1,u100,u2,u101;uniform vec4 u102;uniform vec2 u103;uniform float u104,u105,u106,u107;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u100,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u101,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u103*.5+h).r,l=atan(a.x,a.y),m=-(mod(u104,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u105,b),c=.5+u107*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u102*k;gl_FragColor=mix(d,o,j*u106);}",
i:"u1 u2 u101 u100 u102 u104 u105 u106 u103 u107".split(" "),precision:"lowp"};var p="u108 u109 u110 u111 u98 u112 u3 u113 u100 u114 u115 u116 u117 u118 u14".split(" ");V.ea&&(f.s93={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u119,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u120,u115,u117,u114;varying vec2 vv0;const float j=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/j,1.-c/j);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/j,i=h/j,k=pow(2.,b)/u114;c=(1.-k)*c;return f+vec2(c,i)*d;}void main(){vec4 c=texture2D(u108,vv0);vec3 k=texture2D(u100,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(k,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u113;vec4 b=texture2D(u111,vv0),m=texture2D(u109,vv0);vec3 d=m.rgb;float f=m.a;vec4 n=texture2D(u110,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),g=floor(p/16.),E=(p-16.*g)/16.;g/=16.;float F=b.a;f=1.-(1.-f)*(1.-n.a);vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u112,G)),r=normalize(B),h=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u3));float I=acos(-s.z),J=smoothstep(u115-u117,u115+u117,I);h=mix(l(texture2D(u98,H)),u116,J);float a=o+(E-o)*pow(1.-dot(d,-r),g*16.);a=clamp(a,0.,1.);float t=1.-u120*texture2D(u119,vv0).r;h*=pow(t,2.),q*=t;vec3 i=C*mix(q,h,a),M=mix(k,i,z*(f*(1.-a)+a));float K=dot(i,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(i,L);}",
i:p.concat(["u119","u120"]),precision:"highp"});f.s94={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u115,u117,u118,u121,u122,u114,u123;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),m=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 r(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 a,float e){float b=pow(2.,e);vec2 f=vec2(1.,.5)/b,h=vec2(0.,1.-1./b);float i=atan(a.x,a.z),j=acos(-a.y),c=.5+.5*i/g,k=j/g,l=.5*b/u114;c=(1.-l)*c;return h+vec2(c,k)*f;}float n(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float o(vec2 a){float b=texture2D(u108,a).a;return step(.01,b);}vec3 p(vec2 a){return texture2D(u100,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u108,vv0);if(h.a<.01){gl_FragColor=vec4(p(vv0),0.);return;}float i=h.a;vec3 L=h.rgb,M=L+u113;vec4 c=texture2D(u111,vv0),s=texture2D(u109,vv0);vec3 a=s.rgb;float j=s.a;vec4 k=texture2D(u110,vv0);vec3 e=k.rgb;if(i>1.){gl_FragColor=vec4(mix(p(vv0),e,k.a),1.);return;}e=pow(e,u121*m);float t=c.r,N=c.g,O=c.a,u=floor(c.b*255.),l=floor(u/16.),P=(u-16.*l)/16.;l/=16.,j=1.-(1.-j)*(1.-k.a);vec2 v=vv0+vec2(-1.,0.)*u14,w=vv0+vec2(1.,0.)*u14,x=vv0+vec2(0.,1.)*u14,y=vv0+vec2(0.,-1.)*u14;vec3 Q=texture2D(u109,v).rgb,R=texture2D(u109,w).rgb,S=texture2D(u109,x).rgb,T=texture2D(u109,y).rgb;float U=n(a,Q)*o(v),V=n(a,R)*o(w),W=n(a,S)*o(x),X=n(a,T)*o(y),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=r(texture2D(u112,aa)),ca=(1.-O)*ba,z=normalize(M),A=G,B=reflect(-z,a);float da=floor(_*u3);vec2 ea=K(B,da);float fa=acos(-B.z),ga_=smoothstep(u115-u117,u115+u117,fa);vec3 ha=r(texture2D(u98,ea));A=mix(ha,u116,ga_*u118);float b=t+(P-t)*pow(1.+dot(a,z),l*15.);b=clamp(b,0.,1.);vec2 C=vv0;vec3 D=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(D.xy)),E=sqrt(u14.y/u14.x),ja=smoothstep(.3,.8,i);C+=ja*D.xy*vec2(1./E,E)*ia*.03;vec3 ka=e*mix(ca,A,b);float q=i*(j*(1.-b)+b);vec3 f=mix(p(C),pow(ka,m/u121),q);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*m,f,mix(1.,u122,q)*m);float ma=mix(la,q,u123);gl_FragColor=vec4(f,ma);}",
i:p.concat(["u123","u121","u122"]),precision:"highp"};V.ea&&(f.s95={name:"_",g:"uniform sampler2D u108,u109;uniform mat4 u124;uniform vec2 u125,u14,u126;uniform float u127,u128,u129,u130,u131,u132,u133,u134,u120;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u126;vec4 pos=texture2D(u108,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u127),s=sin(u127);vec3 no0=texture2D(u109,uvt).rgb;float zv=(u124*vec4(co0,1.)).z;vec3 co;vec2 scale=u125/abs(zv),uv,duv=u14*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u14*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u130,u131,1.),ao=dzFactor*clamp(u129*omegaMin*u132,0.,u120);gl_FragColor=vec4(ao,ao,ao,u128);}",
i:"u108 u109 u129 u128 u127 u14 u135 u130 u131 u132 u133 u134 u124 u125 u120".split(" "),Fa:[{search:"8888.8",replace:V.wk[ha.V()].toFixed(1)}],precision:"lowp"},f.s96={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);b+=texture2D(u1,a+u14*j)+texture2D(u1,a+u14*k)+texture2D(u1,a+u14*l)+texture2D(u1,a+u14*m),gl_FragColor=b/9.;}",
i:["u1","u14"],precision:"lowp"});f.s97={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;void main(){vec4 a=u136*u124*u137*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u136","u124","u137"],precision:"lowp"};f.s98={name:"_",g:"uniform sampler2D u138,u112,u99;uniform mat4 u136,u139;uniform vec2 u140;uniform float u141;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u140*(z-f),0.),B=vec3(u139*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u99,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u136*u,i=h.xyz/h.w;if(texture2D(u138,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u139*vec4(g,0.)),t+=texture2D(u112,y(s));}gl_FragColor=vec4(u141*t.rgb/n,1.);}",
i:"u138 u112 u99 u136 u139 u140 u141".split(" "),Fa:[{search:"8888.8",replace:V.so[ha.V()].toFixed(1)},{search:"9999.9",replace:V.to[ha.V()].toFixed(1)}],precision:"lowp"};f.s99={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u14)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};f.s100={name:"_",g:"uniform sampler2D u1,u142;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124;varying vec2 vv0;void main(){vec4 a=u136*u124*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u136","u124","u1"],K:["a0","a1"],precision:"lowp"};if(ha.aa()){p="u41 u143 u144 u145 u146 u42 u111 u147 u148 u13 u149 u150 u78".split(" ").concat(H,u);ha.ti()||(f.s101={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:"lowp",da:!0});f.s102={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],da:!0};f.s103NNGLcolor={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,s);vec2 f=u85*e;vec3 c=u85*r;vec2 w=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,t).rgb+vec3(u79,0.,0.),u82,c);float x=mix(texture2D(u41,u).r,0.,u85);a.z+=x;mat3 h=v(a);vec3 y=mix(u143,u83,c);float z=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u81,1.,u85);vec2 k=u80/w;vec3 l=a0;float C=max(0.,-a0.z-u145)*u146;l.x+=C*sign(a0.x)*(1.-u85);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u149,u150,a0.z),vv0=m,vv3=a0.y;}",
i:p,K:["a0","a2"],R:[3,3],da:!0};f.s103NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(G),K:["a0","a2","a1"],R:[3,3,2],da:!0};f.s103NNGLtextureNormalMap={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform sampler2D u1,u153;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(G,["u153"]),K:["a3","a0","a2","a1"],R:[4,3,3,2],da:!0};f.s103NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(G,w),K:["a0","a2","a1"],R:[3,3,2],da:!0};f.s103NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(G,["u153"],w),K:["a3","a0","a2","a1"],R:[4,3,3,2],da:!0};p="u136 u124 u137 u111 u147 u148 u13".split(" ");f.s103color={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",i:p,K:["a0","a2"],da:!0};f.s103={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(G),K:["a0","a2","a1"],da:!0};var l=["u153","u154"];f.s103NormalMap={name:"_",g:"uniform sampler2D u1,u153;uniform vec4 u111,u13;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(G,l),K:["a0","a2","a1","a3"],da:!0};f.s103ParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(G,w),K:["a0","a2","a1"],da:!0};f.s103NormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(G,l,w),K:["a0","a2","a1","a3"],da:!0}}else q();r();p=[{type:"1i",name:"u1",value:0}];g.j("s0",p);g.j("s1",p);g.j("s75",[{type:"1i",name:"u12",value:1}].concat(p));g.j("s76",[{type:"1i",name:"u12",
value:1}].concat(p));g.j("s12",[{type:"1i",name:"u88",value:1}].concat(p));g.j("s77",[{type:"1i",name:"u88",value:1}].concat(p));g.j("s78",p);g.j("s79",p);g.j("s80",[{type:"1i",name:"u92",value:1},{type:"1i",name:"u41",value:2}].concat(p));g.j("s81",p);g.j("s82",p);g.j("s13",p);g.j("s83",[{type:"1i",name:"u94",value:0},{type:"1i",name:"u95",value:1}]);g.j("s84",[{type:"1i",name:"u98",value:0},{type:"1i",name:"u99",value:1}]);g.j("s85",p);g.j("s86",p);g.j("s87",p);g.j("s88",p);g.j("s89",p);g.j("s90",
[{type:"1i",name:"u88",value:1}].concat(p));g.j("s91",[{type:"1i",name:"u88",value:1}].concat(p));V.ea&&(g.j("s95",[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},{type:"1f",name:"u130",value:V.jk},{type:"1f",name:"u131",value:V.kk},{type:"1f",name:"u132",value:V.xk},{type:"1f",name:"u133",value:V.nk},{type:"1f",name:"u134",value:V.pk},{type:"1f",name:"u129",value:1},{type:"1f",name:"u120",value:1}]),g.j("s96",p));l=[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},
{type:"1i",name:"u110",value:2},{type:"1i",name:"u98",value:3},{type:"1i",name:"u112",value:4},{type:"1i",name:"u111",value:6},{type:"1i",name:"u100",value:7},{type:"1f",name:"u118",value:0},{type:"1f",name:"u115",value:0},{type:"1f",name:"u117",value:0}];V.ea&&g.j("s93",l.concat([{type:"1f",name:"u120",value:V.mk[ha.V()]},{type:"1i",name:"u119",value:5}]));g.j("s94",l.concat([{type:"1f",name:"u121",value:V.Qc},{type:"1f",name:"u122",value:V.ig},{type:"1f",name:"u123",value:0}]));g.j("s98",[{type:"1i",
name:"u138",value:0},{type:"1i",name:"u112",value:1},{type:"1i",name:"u99",value:2},{type:"1f",name:"u141",value:V.ro}]);g.j("s99",p);g.j("s100",p);g.j("s92",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u101",value:2},{type:"1i",name:"u100",value:3},{type:"1f",name:"u106",value:1},{type:"2f",name:"u103",value:[0,0]}].concat(p));ha.aa()?(g.j("s103",p),g.j("s103NormalMap",[{type:"1i",name:"u153",value:1}].concat(p)),g.j("s103ParamsMap",[{type:"1i",name:"u74",value:1}].concat(p)),g.j("s103NormalParamsMap",
[{type:"1i",name:"u153",value:1},{type:"1i",name:"u74",value:2}].concat(p))):n();y=!0},co:function(){q();r();n()},Cd:function(){return B.id},sf:function(){return H},tf:function(){return u},set:function(p){vb.tj(g);f[p].set()},Bb:function(p){return m(p,v())},fe:function(p){return m(p,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"})},ho:function(p){return m(p,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",
i:[],precision:"highp",da:!0})},J:function(){-1!==h&&B.J()},ie:function(){var p=0;B.va.forEach(function(l,C){C=B.R[C];c.vertexAttribPointer(l,C,c.FLOAT,!1,B.Wg,p);p+=4*C})},ec:function(){g.fc(c)},fc:function(p){p.vertexAttribPointer(B.va[0],2,p.FLOAT,!1,8,0)},qq:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,12,0)},Qa:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,32,0)},bb:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,24,0)},lj:function(){c.vertexAttribPointer(B.attributes.a2,
3,c.FLOAT,!1,32,12)},mj:function(){c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,24,12)},Tc:function(){c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,32,24)},rq:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,20,0);c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,20,12)},Tn:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,32,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,32,12);c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,32,24)},Un:function(){c.vertexAttribPointer(B.attributes.a0,
3,c.FLOAT,!1,32,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,32,12)},Vn:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,24,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,24,12)},de:function(){c.vertexAttribPointer(B.attributes.a3,4,c.FLOAT,!1,16,0)},ge:function(p,l){c.uniform1i(B.A[p],l)},H:function(p,l){c.uniform1f(B.A[p],l)},N:function(p,l,C){c.uniform2f(B.A[p],l,C)},he:function(p,l){c.uniform2fv(B.A[p],l)},zg:function(p,l,C,K){c.uniform3f(B.A[p],l,C,K)},Ag:function(p,
l){c.uniform3fv(B.A[p],l)},xa:function(p,l){c.uniform4fv(B.A[p],l)},lo:function(p,l){c.uniformMatrix2fv(B.A[p],!1,l)},mo:function(p,l){c.uniformMatrix3fv(B.A[p],!1,l)},Uc:function(p,l){c.uniformMatrix4fv(B.A[p],!1,l)},j:function(p,l){g.set(p);l.forEach(function(C){switch(C.type){case "4f":c.uniform4fv(B.A[C.name],C.value);break;case "3f":c.uniform3fv(B.A[C.name],C.value);break;case "2f":c.uniform2fv(B.A[C.name],C.value);break;case "1f":c.uniform1f(B.A[C.name],C.value);break;case "1i":c.uniform1i(B.A[C.name],
C.value);break;case "mat2":c.uniformMatrix2fv(B.A[C.name],!1,C.value);break;case "mat4":c.uniformMatrix4fv(B.A[C.name],!1,C.value)}})},I:function(){for(var p in f){var l=f[p];c.detachShader(l.na,l.vf);c.detachShader(l.na,l.uf);c.deleteShader(l.vf);c.deleteShader(l.uf);c.deleteProgram(l.na)}},v:function(){c.disableVertexAttribArray(0);g.J();g.I();J=0;y=!1;B=null;h=-1}};return g}(),Wa=function(){var a={},b=[],d=!1,e=0,k=0,m=-1,v=-1,n=-1,q=1,r=null,y=!1,G=null,w=!1,H=!1,u=!1,f=!1,h=!1,B=!1,J=!1,g=!1,
p=null,l=null,C=-1,K=-1,L=null,A=-1,E,N=null,x=null,z=null,P=null,S=null,la=null,ba=null,Q=[{type:"1f",name:"u85",value:0},{type:"1f",name:"u149",value:0},{type:"1f",name:"u150",value:0},{type:"1f",name:"u80",value:1},{type:"1f",name:"u77",value:0},{type:"1f",name:"u87",value:1}],fa={m:function(t,O){a.Cg=t;ha.Sg();Gc.ff();Sb.ff(t.Ae);m=t.jf;v=t.Xo;n=t.$f;q=t.ze;var D=[{type:"1f",name:"u80",value:m},{type:"1f",name:"u77",value:n},{type:"1f",name:"u81",value:t.Kn},{type:"mat4",name:"u76",value:t.on},
{type:"2f",name:"u42",value:t.Vj}];t.Qg=D;var W=[{type:"3f",name:"u82",value:[0,0,0]},{type:"3f",name:"u83",value:t.$g},{type:"3f",name:"u84",value:t.Zg},{type:"1f",name:"u85",value:0},{type:"1f",name:"u86",value:t.Ae},{type:"1f",name:"u87",value:1}];t.Mj=W;fa.sm(t,O);d||void 0!==t.Ea||(t.Ea=[0,0,120]);g=J=I.wf;if(!d&&J){O=1*ha.wb();var ja=1*ha.vb(),ma={isLinear:!0,isPot:!1,width:O,height:ja};p=aa.instance(ma);l=aa.instance(ma);C=1/O;K=1/ja}D=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",
value:t.Ea},{type:"1f",name:"u145",value:t.hd},{type:"1f",name:"u146",value:t.Lb}].concat(D,W);r=t.Mc;W=[{type:"1f",name:"u149",value:r[0]},{type:"1f",name:"u150",value:r[1]}];ha.aa()?(O=[{type:"1i",name:"u1",value:0}],ja=[{type:"1i",name:"u153",value:2}],F.j("s103NNGLcolor",D.concat(W)),F.j("s103NNGLtexture",[].concat(O,D,W)),F.j("s103NNGLtextureNormalMap",[].concat(O,ja,D,W)),F.j("s103NNGLtextureParamsMap",[{type:"1i",name:"u74",value:2}].concat(O,D,W)),F.j("s103NNGLtextureNormalParamsMap",[{type:"1i",
name:"u74",value:3}].concat(O,ja,D,W))):(F.j("s107",D.concat(W)),F.j("s108",[{type:"1i",name:"u1",value:0}].concat(D)),F.j("s109",D),F.j("s110",D),F.j("s111",D.concat([{type:"1i",name:"u153",value:0}])),F.j("s112",D),F.j("s113",D.concat([{type:"1i",name:"u74",value:0}])));F.j("s80",[{type:"2f",name:"u93",value:t.Jg}]);F.j(V.ea?"s93":"s94",[{type:"1f",name:"u115",value:t.Je},{type:"3f",name:"u116",value:t.og},{type:"1f",name:"u117",value:t.We},{type:"1f",name:"u118",value:1},{type:"3f",name:"u113",
value:t.Zj}]);if(E=t.Qd)L=t.Rm,A=t.Rd,F.j("s92",[{type:"4f",name:"u102",value:t.Pd},{type:"1f",name:"u105",value:t.Rf},{type:"2f",name:"u103",value:t.Qm},{type:"1f",name:"u107",value:Math.sign(A)}]);b.forEach(function(va){va.hj(t)});d=!0},cc:function(t){H&&ua.ia.cc(t);f&&ua.sa.cc(t)},sm:function(t,O){void 0!==ua.ia&&t.ic&&ha.aa()&&(ua.ia.m(t),w=!0,O.push(function(D){ua.ia.cc(D);H=!u}));void 0!==ua.sa&&t.pd&&(ua.sa.m(t),O.push(function(D){ua.sa.cc(D);f=!0}));void 0!==ua.pc&&t.Me&&(ua.pc.m(t),B=h=!0);
void 0!==ua.pb&&(ua.pb.m(t),G=ua.pb.um({width:t.Fc,height:2*t.Fc,depth:1.5*t.Fc,yl:-t.Af,Ua:t.yf,bl:t.zf}),y=!0)},jo:function(t,O,D,W){t&&(ba=t,w&&ua.ia.dc(t),f&&ua.sa.dc(t),h&&ua.pc.dc(t),b.forEach(function(ja){ja.dc(t)}));D&&(P=D);W&&(S=W)},Cb:function(t){ha.aa()?(F.j("s103NNGLcolor",t),F.j("s103NNGLtexture",t),F.j("s103NNGLtextureNormalMap",t),F.j("s103NNGLtextureParamsMap",t),F.j("s103NNGLtextureNormalParamsMap",t)):(F.j("s107",t),F.j("s108",t),F.j("s109",t),F.j("s110",t),F.j("s111",t),F.j("s112",
t),F.j("s113",t))},eb:function(t,O,D){var W=[t[0]+O[0],t[1]+O[1],t[2]+O[2]];W=[W[0]+D[0],W[1]+D[1],W[2]+D[2]];a.ae=W;a.Zm=O;a.Lo=D;fa.Cb([{type:"3f",name:"u143",value:W}]);ha.aa()&&(w&&ua.ia.eb(t,O,D),f&&ua.sa.eb(W));y&&ua.pb.eb(t)},fb:function(t,O,D){var W=t*O*D;a.$m=O;a.Mo=D;a.lm=t;fa.Cb([{type:"1f",name:"u144",value:W}]);ha.aa()&&(w&&ua.ia.fb(t*O,D),f&&ua.sa.fb(W));y&&ua.pb.fb(t)},bj:function(){fa.eb(a.ae,a.Zm,a.Lo);fa.fb(a.lm,a.$m,a.Mo);fa.rj(a.rx);fa.m(a.Cg);fa.nj(a.Fk,a.Lb)},rj:function(t){a.rx=
t;fa.Cb([{type:"1f",name:"u79",value:t}]);ha.aa()&&(w&&ua.ia.xg(t),f&&ua.sa.xg(t))},nj:function(t,O){a.Fk=t;a.Lb=O;fa.Cb([{type:"1f",name:"u145",value:t},{type:"1f",name:"u146",value:O}])},ao:function(t){r=t;0===e&&fa.Cb([{type:"1f",name:"u149",value:r[0]},{type:"1f",name:"u150",value:r[1]}])},cb:function(t){function O(){y&&ua.pb.toggle(!1);E&&F.j("s92",[{type:"1f",name:"u106",value:0}])}0>=t?(k=0,0!==e&&(e=0,Sb.En(),y&&ua.pb.toggle(!0),E&&F.j("s92",[{type:"1f",name:"u106",value:1}]))):1<=t?(k=1,
1!==e&&(e=1,Sb.zj(!0)),O()):(k=t,2!==e&&(Sb.zj(!1),e=2,O()));F.j("s94",[{type:"1f",name:"u118",value:1-t}]);Q[0].value=k;Q[1].value=r[0]*(1-t)+-300*t;Q[2].value=r[1]*(1-t)+-300*t;Q[3].value=m*(1-t)+t*v;Q[4].value=n*(1-t);Q[5].value=1-t+t*q;H&&ua.ia.yg(k,Q);f&&ua.sa.yg(k,Q);fa.Cb(Q)},vl:function(t){ba.h(1);t.forEach(function(O){O.ql()});y&&G.U()},Km:function(){return 1===e},Ke:function(t){ba.Ka(t)},dk:function(t){b.push(t)},Hg:function(t){u=!t;H=t&&w},Gg:function(t){B=t&&h},ug:function(t){f&&ha.aa()&&
ua.sa.no(t)},Db:function(t){ha.aa()&&(w&&ua.ia.Db(t),f&&ua.sa.Db(t))},sl:function(t,O){if(!g)return!1;p.M();t.h(0);F.set("s85");F.N("u14",0,K);X.l(!1,!1);l.o();p.h(0);F.N("u14",C,0);X.l(!1,!1);F.set("s86");O.M();l.h(0);X.l(!1,!1);return!0},yj:function(t){g=t&&J},resize:function(t,O,D){J&&(t*=D,O*=D,p.resize(t,O),l.resize(t,O),C=1/t,K=1/O)},sg:function(t,O){var D=t.O(),W=t.Y(),ja={width:D,height:W,isPot:!1};w&&(z&&z.remove(),z=aa.instance(ja));N&&N.remove();N=Aa.instance({width:D,height:W});h||f?(ua.pc.tg(D,
W),x&&x.remove(),x=aa.instance(ja)):x=t;w&&ua.ia.tg(D,W);O&&(la&&la.remove(),la=aa.instance(ja))},ol:function(t){var O=null;switch(e){case 0:O=t;break;case 2:N.bind(!1,!0);la.o();F.set("s75");F.H("u13",k);t.h(1);S.h(0);X.l(!0,!0);O=la;break;case 1:O=S}if(!H||1===e||!ha.aa())return O;O.Ka(0);B&&ua.pc.U(O,x);N.bind(!1,!B);f&&(B?O.h(0):(x.o(),F.set("s1"),X.l(!0,!0)),ua.sa.U());x.h(0);P.Ka(2);ua.ia.U();z.o();F.set("s1");B||f?x.h(0):O.h(0);X.l(!0,!V.ea);ua.ia.add();return z},ek:function(t,O){if(!H)return t;
P.Ka(2);ua.ia.U();Aa.$();F.set("s74");O.M();ua.ia.fm().h(0);X.l(!0,!0);F.set("s1");c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);t.h(0);X.l(!1,!1);c.disable(c.BLEND);return O},tl:function(t,O){if(!E)return!1;F.set("s92");F.H("u104",t*A);L.h(1);Wa.Ke(2);x?x.h(3):O.h(3);return!0},v:function(){d=!1;k=e=0;n=v=m=-1;q=1;r=null;y=!1;G=null;B=h=f=u=H=w=!1;ua.ia.v();ua.Ia.v()}};return fa}(),xa=function(){function a(){n.forEach(function(D){D.wl(z)})}function b(){n.forEach(function(D){D.td(z)})}
function d(){n.forEach(function(D){D.ul(z)})}function e(){n.forEach(function(D){D.ud(z)})}function k(){z?Wa.vl(n):n.forEach(function(D){D.rl()})}function m(){E&&clearTimeout(E);E=setTimeout(function(){l=!1;E=null},16)}function v(D){D()}var n=[],q=[],r={ga_:!1,position:!1,yb:!1},y=[],G=[],w=null,H=0,u=null,f=null,h=null,B=null,J=!1,g=!1,p=!1,l=!1,C=!1,K=!1,L=null,A=null,E=null,N=null,x=!1,z=!1,P=!1,S=!1,la=!0,ba=!1,Q=!1,fa=null,t=null,O={m:function(){c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.clearDepth(1);
V.$k?(c.enable(c.CULL_FACE),c.frontFace("CCW"===V.al?c.CCW:c.CW),c.cullFace(c.BACK)):c.disable(c.CULL_FACE);O.sh();var D={isPot:!1,isLinear:!1,width:ha.wb(),height:ha.vb(),G:4,isFloat:!1};u=aa.instance(D);D=Object.assign({},D,{isLinear:!0,width:ha.O(),height:ha.Y()});f=aa.instance(D);h=aa.instance(D);V.Pa&&(D=Object.assign({},D,{isLinear:!1}),B=aa.instance(D));K=Ga.fa();V.Pa||(w=hc.instance({Kb:V.Kb,vc:V.vc,wc:V.wc,uc:V.uc}));J=!0},sh:function(){ha.aa()?r=vc.instance({}):(r.ga_=Jb.instance({hc:V.Pa?
!1:"s104",isFloat:!1,Ub:!0,clearColor:[0,0,0,0],G:4}),r.position=Jb.instance({hc:V.Pa?!1:"s114",isFloat:!0,Ub:!0,clearColor:[0,0,0,0],G:4}),r.yb=Jb.instance({hc:!1,isFloat:!0,Ub:!0,clearColor:[0,0,0,0],G:4}),r.Nc=Jb.instance({hc:!1,isFloat:!1,Ub:!0,clearColor:[0,0,0,0],G:4}))},Tl:function(){return w},oa:function(D){w=D},Iq:function(){},Db:function(D){Wa.Db(D)},hj:function(D){Wa.m(D,y);ha.aa()||(r.ga_.sj(!1),r.position.sj("s107"));z=S=!0},nq:function(){Wa.bj()},fp:function(D){Wa.dk(D)},Pn:function(D,
W,ja){Wa.eb(D,W,ja)},Qn:function(D,W,ja){Wa.fb(D,W,ja)},Nn:function(D,W){Wa.nj(D,W)},On:function(D){Wa.ao(D)},Rn:function(D){Wa.rj(D)},cb:function(D){Wa.cb(D)},ij:function(D,W,ja,ma){Wa.jo(D,W,ja,ma);W&&O.sg(W,ma?!0:!1);P=!0},Hg:function(D){Wa.Hg(D)},ug:function(D){Wa.ug(D)},Gg:function(D){Wa.Gg(D)},yj:function(D){Wa.yj(D)},gp:function(D){x&&(Q=!0,fa&&fa.remove(),fa=aa.instance({width:N.O(),height:N.Y(),isPot:!1}),t=D)},sg:function(D,W){N="string"===typeof D?aa.instance({url:D,isFloat:!1}):D;z&&Wa.sg(N,
W);x=!0},ck:function(D){n.push(D);0!==y.length&&(y.forEach(function(W){W(D)}),y.splice(0,y.length))},zn:function(D){D=n.indexOf(D);-1!==D&&n.splice(D,1)},hp:function(D){q.push(D)},kq:function(D){D=q.indexOf(D);-1!==D&&q.splice(D,1)},me:function(D){z&&(g=D)},animate:function(D){!V.Pa||z&&P?g&&(l||H>V.an&&C?(L&&clearTimeout(L),++H,window.cancelAnimationFrame(O.animate),L=setTimeout(function(){window.requestAnimationFrame(O.animate)},16)):(O.Xi(D),++H,z||g&&window.requestAnimationFrame(O.animate))):
setTimeout(O.animate,100)},jp:function(D){G.push(D)},Xi:function(D){if((!V.Pa||z&&P)&&J){G.forEach(v);ha.aa()?r.set()||ha.la()?(z||Ac.Bn(),k(),r.J(),K&&c.depthMask(!1)):(ha.Bo(),O.sh(),Jb.fd(),F.co(),V.Pa&&Wa.bj(),c.flush(),window.requestAnimationFrame(O.animate)):(z&&Wa.Ke(1),r.ga_.set(!0,!0,!0),b(),r.ga_.J(),K&&c.depthMask(!1),r.Nc.set(!1,!K,!1),d(),r.Nc.J(),r.position.set(!0,!K,!1),sb.U(),a(),r.position.J(),r.yb.set(!1,!K,!1),e(),r.yb.J());c.disable(c.DEPTH_TEST);K||c.depthMask(!1);V.ea&&Bb.U();
var W=O.Oh();if(null!==W){W.h(7);F.set(V.ea?"s93":"s94");F.N("u14",1/ha.wb(),1/ha.vb());Jb.Gk();u.M();ba?(c.enable(c.BLEND),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),F.H("u123",1)):c.disable(c.BLEND);z||sb.ef();r.position.h(0);r.yb.h(1);r.ga_.h(2);w.jd(3);r.Nc.h(6);w.kd(4);w.wh();V.ea&&Bb.h(5);X.l(!0,!0);ba&&F.H("u123",0);Aa.$();if(ba){c.disable(c.BLEND);var ja=Wa.ek(u,f);F.set("s82");h.M();ja.h(0);X.l(!1,!1);f.o();h.h(0);X.l(!1,!1);f.h(0)}else Wa.sl(u,
f)||(F.set("s1"),f.M(),u.h(0),X.l(!1,!1)),la?(F.set("s81"),h.M(),f.h(0),X.l(!1,!1),f.o(),h.h(0),S&&z?(F.set("s80"),B.h(1),Wa.Ke(2),X.l(!1,!1),F.set("s1"),B.M(),f.h(0),X.l(!1,!1)):(F.set("s79"),X.l(!1,!1),f.h(0))):f.h(0);Aa.ba();c.viewport(0,0,ha.O(),ha.Y());!ba&&z&&Wa.tl(D,W)||F.set("s1");X.l(!1,!1);c.enable(c.DEPTH_TEST);c.depthMask(!0);c.flush()}}},Oh:function(){if(!x||ba)return aa.$h();if(!z)return N;if(Q&&!Wa.Km()){F.set(t);Aa.$();fa.Vc();fa.o();N.h(0);var D=fa;X.l(!0,!0)}else D=N;return Wa.ol(D)},
Eq:function(){V.fl||g||(g=!0,O.animate(Date.now()),p||wc.wo(),p||Sb.ib(!1),A&&clearTimeout(A),V.ea&&Bb.ee(),A=setTimeout(O.ta,V.Ck),p||ha.om(),p=!0)},Fq:function(){g&&(C=g=!1,cancelAnimationFrame(O.animate))},ta:function(){C||!p||l||V.uh||(C=l=!0,A&&clearTimeout(A),E&&clearTimeout(E),sb.lf().Zi(),A=setTimeout(function(){ha.Ug(V.en);V.ea&&Bb.Nj();H=0;m()},24))},wake:function(){C&&p&&!l&&(l=!0,C=!1,H=0,sb.lf().Zi(),A&&clearTimeout(A),E&&clearTimeout(E),A=setTimeout(function(){ha.Ug(1);V.ea&&Bb.ee();
m()},16))},Sp:function(){},yp:function(){},le:function(D){S=D},Hq:function(D){la=D},Aj:function(D){ba=D},Mq:function(){F.j("s94",[{type:"1f",name:"u121",value:V.Qc},{type:"1f",name:"u122",value:V.ig}])},resize:function(D,W,ja){u.resize(D*ja,W*ja);f.resize(D,W);h.resize(D,W);V.Pa&&B.resize(D,W);Wa.resize(D,W,ja);D=[{type:"2f",name:"u14",value:[1/D,1/W]}];F.j("s81",D);F.j("s79",D);F.j("s82",D)},I:function(){L&&clearTimeout(L);A&&clearTimeout(A);E&&clearTimeout(E);n.concat(q).forEach(function(D){D.I()});
n.splice(0,n.length);q.splice(0,q.length);r.ga_.remove();r.yb.remove();r.Nc.remove();r.position.remove();u.remove();f.remove();h.remove();B&&B.remove();l=!0},v:function(){O.I();K=C=l=p=g=z=P=l=!1}};return O}(),ua={},ha=function(){function a(){Jb.resize(d*q,e*q);u.aa()&&vc.resize(d*q,e*q);xa.resize(d,e,q);V.ea&&Bb.resize(d*q,e*q,q);u.Sg()}var b=null,d=0,e=0,k=-1,m=!1,v={pe:!1,Kg:!1,Kj:!1,Dg:!1,drawBuffers:!1,Em:!1,pi:!1,Gm:!1,If:!1,Za:!1},n=Object.assign({},v),q=1,r=!1,y=!1,G=!1,w=!1,H=!1,u={m:function(f){void 0!==
f.onload&&f.onload&&(y=f.onload);void 0===f.expand&&(f.expand=!1);void 0===f.Jd&&(f.Jd=!1);void 0===f.qa&&(f.qa=!1);void 0===f.Qb&&(f.Qb=!1);void 0===f.alpha&&(f.alpha=!1);void 0===f.preserveDrawingBuffer&&(f.preserveDrawingBuffer=!1);f.Jd&&(m=!0);b=f.qa?f.qa:document.getElementById(f.Uk);f.expand&&u.expand();try{window.bp=f.Qb?f.Qb.Fl():b.getContext("webgl",{antialias:!1,alpha:f.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:f.preserveDrawingBuffer});w=f.Qb?f.Qb.la():!1;G=
!w;8>c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)&&u.qd("too few texture image units");if(!Ga.m())return u.qd("invalid config");V.Io&&(n.Kg=c.getExtension("EXT_texture_filter_anisotropic"),n.Kg&&(n.pi=!0));V.Jo&&(n.pe=c.getExtension("WEBGL_compressed_texture_s3tc"),n.pe&&void 0!==n.pe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&n.pe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&(n.Em=!0));G&&(n.Kj=c.getExtension("OES_element_index_uint")||c.getExtension("MOZ_OES_element_index_uint")||c.getExtension("WEBKIT_OES_element_index_uint"),
n.Kj&&(n.Gm=!0));!w&&V.Ko&&(n.Dg=c.getExtension("EXT_sRGB"),n.Dg&&(n.If=!0));G?(n.drawBuffers=c.getExtension("WEBGL_draw_buffers"),n.drawBuffers&&!V.th&&(n.Za=!0)):n.Za=4<=c.getParameter(c.MAX_DRAW_BUFFERS);if(n.Za){var h=u.hl();n.Za=n.Za&&h}}catch(B){return u.qd(B)}if(null===c||!c)return u.qd("NO_GL");f.expand&&window.addEventListener("resize",u.expand,!1);b.addEventListener("contextmenu",function(B){B.preventDefault();return!1},!1);d=b.width;e=b.height;u.Ef();return!0},Ef:function(){k=m?3:2;Ga.fa()||
(k=Math.min(k,1));Ga.Qk()||(k=Math.min(k,0));Gc.m();Jb.m();for(var f in ua)ua[f].Rc();F.m();sb.m();Sb.m();xa.m();wc.m();V.ea&&Bb.m();"undefined"!==typeof FPSCounter&&FPSCounter.m();u.Sg();u.jl();r=!0;y&&y();return!0},jl:function(){if(n.Za){var f=vc.instance({width:256,height:1});f.bind();c.viewport(0,0,256,1);F.set("s102");F.xa("color",[1,0,0,1]);X.l(!0,!0);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT||c.DEPTH_BUFFER_BIT);Aa.ba();F.set("s1");f.yb.h(0);X.l(!1,!1);f=new Uint8Array(1024);c.readPixels(0,
0,256,1,c.RGBA,c.UNSIGNED_BYTE,f);H=1>=f[1020]}},hl:function(){var f=vc.instance({width:1,height:1});if(!f.set())return f.remove(),!1;F.ho(c);X.Ob(c);c.bindFramebuffer(c.FRAMEBUFFER,null);F.Bb(c);f.ga_.Ka(0);X.Ob(c);var h=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,h);f.remove();return 3<Math.abs(h[0]-127)?!1:!0},la:function(){return w},O:function(){return d},Y:function(){return e},wb:function(){return q*u.O()},vb:function(){return q*u.Y()},Gl:function(){return d/e},V:function(){return k},
Zp:function(){return 3===k},ti:function(){return H},aa:function(){return n.Za},Bo:function(){n.Za=!1},bq:function(){return!1},Sk:function(){return 0<u.V()},pp:function(){return u.aa()&&0<u.V()},kf:function(f){var h=c,B="";w||(h=n.drawBuffers,B="_WEBGL");return[h["COLOR_ATTACHMENT0"+B],h["COLOR_ATTACHMENT1"+B],h["COLOR_ATTACHMENT2"+B],h["COLOR_ATTACHMENT3"+B]].splice(0,f)},Bd:function(f){return u.kf(4)[f]},im:function(){return w?c.SRGB?c.SRGB:c.RGBA:n.If?n.Dg.SRGB_ALPHA_EXT:c.RGBA},Hm:function(){return n.pi},
Ll:function(){return n.Kg},Um:function(f){u.la()?c.drawBuffers(u.kf(f)):n.drawBuffers.drawBuffersWEBGL(u.kf(f))},expand:function(){xa.wake();u.resize(window.innerWidth,window.innerHeight);xa.ta()},resize:function(f,h){!b||f===d&&h===e||(d=f,e=h,b.width=d,b.height=e,r&&(sb.resize(),a()))},Sg:function(){var f=[{type:"2f",name:"u14",value:[1/ha.wb(),1/ha.vb()]}];F.j("s81",f);F.j("s79",f)},Ug:function(f){q=f;a()},Ja:function(f,h){b.addEventListener(f,h,!1)},qd:function(){k=-1;return!1},nh:function(){return 0<=
k},fq:function(){},oq:function(){},Cq:function(){var f=document.getElementById("loading");f&&(f.style.display="block")},om:function(){var f=document.getElementById("loading");f&&(f.style.display="none")},I:function(){u.nh()&&(aa.Lj(),xa.I(),X.I(),Jb.I(),V.ea&&Bb.I(),hc.I(),wc.I(),F.I(),aa.I(),c.flush(),c=null)},v:function(){xa.v();Wa.v();F.v();Object.assign(n,v);r=!1}};return u}(),sb=function(){var a=!1,b=!1,d=[];return{m:function(){},instance:function(e){void 0===e.$i&&(e.$i=!0);void 0===e.De&&(e.De=
.1);void 0===e.Ce&&(e.Ce=100);void 0===e.direction&&(e.direction=[0,0,-1]);void 0===e.Pb&&(e.Pb=45);var k=new ac,m=new Va(50,-50,-400),v=null;k.setPosition(m);var n=new Int8Array(20),q=new Int8Array(20),r=0,y=0,G=0,w=0,H={U:function(){q[F.Cd()]||(F.Uc("u124",k.elements),q[F.Cd()]=1);n[F.Cd()]||(F.Uc("u136",v),n[F.Cd()]=1)},df:function(){y||(F.Uc("u124",k.elements),y=1);r||(F.N("u125",v[0],v[5]),r=1)},ef:function(){G||(F.zg("u113",m.x,m.y,m.z),G=1)},Mb:function(){w||(F.zg("u154",m.x,m.y,m.z),w=1)},
ph:function(){var u=e.De,f=e.Ce,h=Math.tan(.5*e.Pb*Math.PI/180);v=[.5/h,0,0,0,0,.5*ha.Gl()/h,0,0,0,0,-(f+u)/(f-u),-1,0,0,-2*f*u/(f-u),0];for(u=0;20>u;++u)n[u]=0;r=0},bo:function(u,f){m.fj(f[0]).gj(f[1]).z=f[2];k.elements.set(u);for(u=0;20>u;++u)q[u]=0;w=G=y=0},Zi:function(){for(var u=w=G=0;20>u;++u)q[u]=0}};H.ph();a=H;b=!0;e.$i&&d.push(H);return H},U:function(){b&&a.U()},df:function(){b&&a.df()},ef:function(){b&&a.ef()},Mb:function(){b&&a.Mb()},resize:function(){d.forEach(function(e){e.ph()})},lf:function(){return a}}}(),
Jb=function(){var a=[],b=null;return{m:function(){b=Aa.instance({width:ha.wb(),height:ha.vb(),Gc:!ha.aa()})},instance:function(d){void 0===d.width&&(d.width=ha.wb());void 0===d.height&&(d.height=ha.vb());void 0===d.isFloat&&(d.isFloat=!1);void 0===d.Ub&&(d.Ub=!1);void 0===d.clearColor&&(d.clearColor=[0,0,0,0]);void 0===d.G&&(d.G=4);var e=aa.instance({isFloat:d.isFloat&&Ga.fa(),S:d.isFloat,width:d.width,height:d.height,isPot:!1,isLinear:!1,G:d.G}),k=void 0!==d.hc&&d.hc?!0:!1,m=d.hc,v={set:function(n,
q,r){r&&b.bind(!1,r);e.o();n&&(c.clearColor(d.clearColor[0],d.clearColor[1],d.clearColor[2],d.clearColor[3]),b.Re());q&&b.oh();k&&F.set(m)},sj:function(n){k=(m=n)?!0:!1},J:function(){e.re()},h:function(n){e.h(n)},resize:function(n,q){e.resize(n,q)},debug:function(){e.debug()},remove:function(){e.remove()}};d.Ub&&a.push(v);return v},resize:function(d,e){b.resize(d,e);a.forEach(function(k){k.resize(d,e)})},Gk:function(){b.hh()},fd:function(){b.fd()},Vc:function(){b.Vc()},sp:function(){b.oh()},rp:function(){b.Re()},
qp:function(){b.clear()},I:function(){b.remove()}}}(),vc=function(){var a=[];return{instance:function(b){void 0===b.width&&(b.width=ha.wb());void 0===b.height&&(b.height=ha.vb());var d=c.createFramebuffer(),e=b.width,k=b.height,m=!0;b={isFloat:Ga.fa(),S:!0,width:e,height:k,isPot:!1,isLinear:!1,G:4};var v=aa.instance(b),n=aa.instance(b),q=aa.instance(b),r=aa.instance(b),y=Aa.Ml(),G=Aa.Th();c.bindFramebuffer(y,d);var w=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,w);c.renderbufferStorage(c.RENDERBUFFER,
c.DEPTH_COMPONENT16,e,k);c.framebufferRenderbuffer(y,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,w);c.clearDepth(1);c.framebufferTexture2D(y,ha.Bd(0),c.TEXTURE_2D,v.get(),0);c.framebufferTexture2D(y,ha.Bd(1),c.TEXTURE_2D,n.get(),0);c.framebufferTexture2D(y,ha.Bd(2),c.TEXTURE_2D,r.get(),0);c.framebufferTexture2D(y,ha.Bd(3),c.TEXTURE_2D,q.get(),0);ha.Um(4);c.bindFramebuffer(y,null);Aa.reset();var H={position:v,yb:n,Nc:q,ga_:r,bind:function(){c.bindFramebuffer(y,d);Aa.reset()},set:function(){m&&c.checkFramebufferStatus(G);
c.bindFramebuffer(y,d);Aa.reset();if(m){if(c.checkFramebufferStatus(G)!==c.FRAMEBUFFER_COMPLETE)return!1;m=!1}c.viewport(0,0,e,k);c.clearColor(0,0,0,0);F.Yb()&&!ha.ti()&&(F.set("s101"),X.l(!1,!1));c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);return!0},J:function(){},resize:function(u,f){e=u;k=f;v.resize(u,f);n.resize(u,f);r.resize(u,f);q.resize(u,f);c.bindRenderbuffer(c.RENDERBUFFER,w);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,e,k);c.bindRenderbuffer(c.RENDERBUFFER,null)},remove:function(){v.remove();
n.remove();r.remove();q.remove();c.deleteRenderbuffer(w);c.deleteFramebuffer(d);var u=a.indexOf(H);-1!==u&&a.splice(u,1)}};a.push(H);return H},resize:function(b,d){a.forEach(function(e){e.resize(b,d)})}}}(),hc=function(){var a=[],b=V.gh;return{instance:function(d){function e(){q?k():(h=zd.instance({ha:G,Dm:b}),n=V.Dk[ha.V()],w=aa.instance({isFloat:Ga.fa(),S:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:n,height:n/2,G:3}),H=aa.instance({isFloat:Ga.fa(),S:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:n,height:n/
2,G:3}),u=aa.instance({isFloat:Ga.fa(),S:!0,isPot:!0,width:1,height:n/2,G:3}),f=aa.instance({isFloat:Ga.fa()&&!b,S:!b,isPot:!1,isLinear:!0,isMirrorY:!0,isMipmap:!1,width:n,height:n/2,G:b?4:3}),q=!0,k(),J.forEach(function(g){g()}),J.splice(0,J.length))}function k(){if(q){Aa.$();h.Wn(G);h.xn();w.M();F.set("s84");G.h(0);F.H("u91",V.Qc);aa.Lk(1);X.l(!0,!0);for(var g=V.vm[ha.V()],p=0;p<g;++p)H.o(),F.set("s87"),F.N("u14",1/n,0),w.h(0),X.l(!1,!1),w.o(),F.N("u14",0,2/n),H.h(0),X.l(!1,!1);u.M();F.set("s89");
w.h(0);X.l(!1,!1);F.set(b?"s91":"s90");f.M();w.h(0);u.h(1);X.l(!1,!1);aa.ba(0);aa.ba(1)}}var m=Object.assign({Kb:null,vc:null,uc:0,wc:0},d),v=0,n=0,q=!1,r=null,y=null,G=null,w=null,H=null,u=null,f=null,h=null,B=0,J=[];d={m:function(){function g(){2===++p&&(G=aa.instance({isFloat:Ga.fa(),S:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:v,height:v/2,G:3}),Aa.$(),G.M(),F.set("s83"),F.H("u96",m.wc),F.H("u97",m.uc),r.h(0),y.h(1),X.l(!0,!0),e())}var p=0;v=V.Ek[ha.V()];B=Math.log2(v)-1;m.Kb&&(r=
aa.instance({isPot:!1,url:m.Kb,B:g,G:3,isFlipY:!1}),y=aa.instance({isPot:!1,url:m.vc,B:g,G:3,isFlipY:!1}))},oj:function(g){G=g;e()},jd:function(g){q&&(h.h(g),F.H("u114",h.O()))},kd:function(g){q&&f.h(g)},wh:function(){F.H("u3",B)},Ph:function(){return B},O:function(){return v},md:function(g){q?g():J.push(g)},I:function(){r&&r.remove();y&&y.remove();w.remove();u.remove();H.remove();h.remove();f.remove();G.remove()}};a.push(d);d.m();return d},I:function(){a.forEach(function(d){d.I()})}}}(),fd={instance:function(a){var b=
a.Om,d=a.Mm,e=0,k=b.O();a=V.gh;var m=aa.instance({isFloat:Ga.fa()&&!a,S:!a,isLinear:!0,isMipmap:!1,isPot:!1,width:k,G:a?4:3,isFlipY:!1}),v=aa.instance({isFloat:Ga.fa()&&!a,S:!a,isPot:!1,isLinear:!0,Vp:!0,isMipmap:!1,width:k,height:k/2,G:a?4:3}),n=Aa.instance({width:k,height:k}),q=a?"s76":"s75";return{io:function(r){e=r;F.set(q);c.viewport(0,0,k,k);n.o();m.o();F.H("u13",e);b.jd(1);d.jd(0);X.l(!0,!0);c.viewport(0,0,k,k/2);v.o();b.kd(1);d.kd(0);X.l(!1,!1);c.flush()},jd:function(r){m.h(r)},kd:function(r){v.h(r)},
wh:function(){F.H("u3",b.Ph()*(1-e)+d.Ph()*e)}}}},Sb=function(){function a(N){var x=(l-V.Pe)/(V.kh-V.Pe);x=1-Math.pow(1-x,V.$o);l+=N*(1+x*V.ap);l=Math.min(Math.max(l,V.Pe),V.kh);E.ib()}function b(N){-1!==n&&(B=h=0,v(),a(V.Zo*N.deltaY/window.innerHeight),N.preventDefault())}function d(){g+=h;p+=B;p=Math.min(Math.max(p,V.jn),V.hn);E.ib()}function e(N){if(0===n||-1===n)return!1;var x=void 0!==N.touches&&N.touches.length;N.preventDefault();if(2===n){var z=Wc(N.touches[0].pageX,N.touches[0].pageY,N.touches[1].pageX,
N.touches[1].pageY);a(-(u-z)*V.kn);u=z}else z=x?N.touches[0].clientX:N.clientX,N=x?N.touches[0].clientY:N.clientY,h=2*(z-w)*Math.PI/ha.O(),B=2*(N-H)*Math.PI/ha.Y(),4===n?(A[0]+=h*V.Mi,A[1]-=B*V.Mi,A[0]=Math.min(Math.max(A[0],-V.Pi),V.Pi),A[1]=Math.min(Math.max(A[1],-V.Qi),V.Qi),E.ib()):d(),w=z,H=N}function k(){0!==n&&-1!==n&&(0===h&&0===B||1!==n||!K?xa.ta():(v(),f=Date.now(),C=setInterval(E.Lm,J)),n=0)}function m(N){if(2!==n&&-1!==n){B=h=0;v();xa.wake();var x=void 0!==N.changedTouches&&N.touches.length;
N.preventDefault();x&&2===N.touches.length?(n=2,u=Wc(N.touches[0].pageX,N.touches[0].pageY,N.touches[1].pageX,N.touches[1].pageY)):(n=x||2!==N.button?1:4,w=x?N.touches[0].clientX:N.clientX,H=x?N.touches[0].clientY:N.clientY);return!1}}function v(){C&&(clearInterval(C),C=!1)}var n=0,q=!1,r=!1,y=!1,G=1,w=0,H=0,u=0,f=0,h=0,B=0,J=16,g=V.Fj,p=V.Oi,l=V.Oe,C=!1,K=0,L=new Float32Array([0,0,0,0,0]),A=[V.Ok,V.Pk],E={m:function(){K=V.gk[ha.V()];J=V.vd[ha.V()];ha.Ja("mousedown",m);ha.Ja("mouseup",k);ha.Ja("mouseout",
k);ha.Ja("mousemove",e);ha.Ja("mousemove",e);ha.Ja("wheel",b);ha.Ja("touchstart",m);ha.Ja("touchend",k);ha.Ja("touchmove",e)},ib:function(N){q?(r[0]=-p,r[1]=g,y[1].value=G/V.Oe*l,Wa.Cb(y)):(L[0]=g,L[1]=p,L[2]=l,L[3]=A[0],L[4]=A[1],wc.Ln(L,N))},Lm:function(){if(1E-4>h&&1E-4>B||-1===n)v(),B=h=0,0===n&&xa.ta();var N=Date.now(),x=N-f;f=N;N=Math.pow(K,x/J);h*=N;B*=N;d()},ff:function(N){q||(q=!0,n=-1,r=[0,0,0],y=[{name:"u82",type:"3f",value:r},{name:"u86",type:"1f",value:1}],G=N)},zj:function(N){-1===n&&
N&&(n=0);N||(n=-1)},En:function(){B=h=0;g=V.Fj;p=V.Oi;l=V.Oe;E.ib()},tq:function(N){l=N},uq:function(N){A[0]=N[0];A[1]=N[1];V.lh=N[2]},sq:function(N,x){g=N;p=x}};return E}(),Ac=function(){var a={s103:!1,s103color:!1,s103NormalMap:!1,s103ParamsMap:!1,s103NormalParamsMap:!1};return{instance:function(b){function d(t){if(fa){t.tweaker&&window.JEELIZVTO&&"undefined"!==typeof T&&T.fh(t.tweaker);E=t.partsNames||[];A.splice(0);A.push({n:0,offset:0});C.min.set(Infinity,Infinity,Infinity);C.max.set(-Infinity,
-Infinity,-Infinity);var O=t.uvs;O&&(O=O.filter(function(ca){return ca}));ba=O&&0<O.length&&0<O[0].length?!0:!1;"undefined"!==typeof yb&&"string"===typeof t.faces&&(t.faces=yb(t.faces));"undefined"!==typeof Ob&&("string"===typeof t.vertices&&(t.vertices=Ob(t.vertices)),O&&O.length&&O.forEach(function(ca,Ca){"string"===typeof ca&&(O[Ca]=Ob(ca))}));var D=t.metadata.faces,W=1+(ba?1:0);D=(t.faces.length-D)/(t.metadata.faces*W);6!==D&&8!==D||ba||(++W,D/=2);if(4===D){D=6*W+2;for(var ja=4*W+1,ma=Array(t.metadata.faces*
D),va=0;va<t.metadata.faces;++va)for(var Da=0;Da<W;++Da)ma[va*D+4*Da]=t.faces[va*ja+5*Da],ma[va*D+4*Da+1]=t.faces[va*ja+5*Da+1],ma[va*D+4*Da+2]=t.faces[va*ja+5*Da+2],0===Da&&(ma[va*D+3]=t.faces[va*ja+4]),ma[va*D+4*Da+3*W+1]=t.faces[va*ja+5*Da],ma[va*D+4*Da+3*W+2]=t.faces[va*ja+5*Da+2],ma[va*D+4*Da+3*W+3]=t.faces[va*ja+5*Da+3],0===Da&&(ma[va*D+3*W+4]=t.faces[va*ja+4]);t.faces=ma;t.metadata.faces*=2}H=Array(t.metadata.vertices);for(D=0;D<t.metadata.vertices;++D)H[D]=new Va(t.vertices[3*D],t.vertices[3*
D+1],t.vertices[3*D+2]),kd(C,H[D]);u=Array(t.metadata.faces);W=3*W+1;for(D=0;D<t.metadata.faces;++D)u[D]=new Cc(t.faces[W*D],t.faces[W*D+1],t.faces[W*D+2]),u[D].$b=t.faces[W*D+3];x=3<H.length;fa&&(fa.visible=x);nd(H,u);f=od(H,u);if(ba){W=Array(H.length);D=["a","b","c"];for(ja=0;ja<t.metadata.faces;++ja)for(ma=0;3>ma;++ma)if(va=t.faces[7*ja+ma],Da=t.faces[7*ja+1+ma+3],"undefined"===typeof W[va])W[va]=[[va,Da]];else if(W[va][0][1]!==Da){for(var ka=-1,na=1;na<W[va].length;++na)if(W[va][na][1]===Da){ka=
W[va][na][0];break}na=-1;-1===ka?(na=H.length,H.push(H[va].clone()),f.push(f[va].clone()),W[va].push([na,Da]),W[na]=[[na,Da]]):na=ka;t.faces[7*ja+ma]=na;u[ja][D[ma]]=na}h=Array(H.length);for(t=0;t<H.length;++t)D="undefined"===typeof W[t]?t:W[t][0][1],h[t]=new Zb(O[0][2*D],O[0][2*D+1])}var Fa=uc(C);b.Ib&&(H.forEach(function(ca){ca.x-=Fa.x;ca.z-=Fa.z;ca.y-=C.min.y}),C.min.x-=Fa.x,C.max.x-=Fa.x,C.min.z-=Fa.z,C.max.z-=Fa.z,C.max.y-=C.min.y,C.min.y=0);if(b.Jb){var Y=V.Bk/Math.max(C.max.x-C.min.x,C.max.y-
C.min.y,C.max.z-C.min.z);H.forEach(function(ca){ca.Ca(Y)});C.min.Ca(Y);C.max.Ca(Y)}t=ba?8:6;W=new Float32Array(H.length*t);for(D=0;D<H.length;++D)W[t*D]=H[D].x,W[t*D+1]=H[D].y,W[t*D+2]=H[D].z,W[t*D+3]=f[D].x,W[t*D+4]=f[D].y,W[t*D+5]=f[D].z,ba&&(W[t*D+6]=h[D].x,W[t*D+7]=h[D].y);u.sort(function(ca,Ca){return ca.$b-Ca.$b});var oa=new (65536>3*u.length?Uint16Array:Uint32Array)(3*u.length),ea=0;u.forEach(function(ca,Ca){ca.$b===ea?A[ea].n+=3:(A.push({n:3,offset:3*Ca}),++ea);oa[3*Ca]=ca.a;oa[3*Ca+1]=ca.b;
oa[3*Ca+2]=ca.c});B&&B.remove();B=X.instance({ja:W,indices:oa});p=g=!1;la&&fa.qh();z=!0;fa.cf();b.B&&(b.B(fa),b.B=null)}}function e(t){B.La(t.n,t.offset)}function k(t,O){S[O]&&(F.set(S[O].cm()),B.bind(!1),ba?(F.Qa(),F.lj()):(F.bb(),F.mj()),S[O].Kc()&&(F.Tc(),g.xc(!1),F.de(),sb.Mb()),S[O].ml(),S[O].ud(),B.La(t.n,t.offset))}function m(t,O){S[O]&&(F.set(S[O].dm()),B.bind(!1),ba?(F.Qa(),F.lj()):(F.bb(),F.mj()),S[O].Kc()&&(F.Tc(),g.xc(!1),F.de(),sb.Mb()),fa.Bc(),S[O].ud(),B.La(t.n,t.offset))}function v(t,
O){Q&&S[O]&&(S[O].nl(),B.La(t.n,t.offset))}function n(t,O){Q&&S[O]&&(S[O].pl(ba),B.La(t.n,t.offset))}function q(t,O){S[O]&&(F.set(S[O].Zl()),S[O].Bh(),B.La(t.n,t.offset))}function r(t,O){S[O]&&(F.set(S[O].$l()),fa.Bc(),S[O].Bh(),B.La(t.n,t.offset))}function y(t,O){S[O]&&(F.set(S[O].am()),S[O].Kc()&&(g.xc(!1),F.de(),sb.Mb()),B.bind(!1),S[O].yh(ba),B.La(t.n,t.offset))}function G(t,O){if(S[O]){var D=S[O].bm();F.set(D);S[O].Kc()&&(g.xc(!1),F.de(),sb.Mb(),B.bind(!1));a[D]||(fa.Bc(),B.bind(!1),a[D]=!0);
S[O].yh(ba);B.La(t.n,t.offset)}}function w(t,O){return new Promise(function(D,W){t?(t.B=function(ja){S[O]&&S[O].I();S[O]=ja;la=la||ja.Kc();D()},Gc.instance(t)):W()})}if(!ha.nh())return!1;void 0===b.Ib&&(b.Ib=!1);void 0===b.Jb&&(b.Jb=!1);void 0===b.Ne&&(b.Ne=!1);var H=null,u=null,f=null,h=null,B=null,J=null,g=null,p=!1,l=new ac,C=new Bc,K=[],L=null,A=[{n:0,offset:0}],E=[],N=[],x=!1,z=!1,P=[],S=[],la=!1,ba=!1,Q=!1,fa={visible:x,Zk:function(){return A.length},Wl:function(){return E},qh:function(){!p&&
ba&&(u=u.filter(function(t){return null!==t}),J=pd(H,f,h,u),g=X.instance({ja:J,indices:!1}),h=f=u=H=J=null,p=!0)},Bc:function(){sb.U();fa.Ah()},Ah:function(){F.Uc("u137",l.elements)},zp:function(){x&&(fa.Ah(),B.bind(!1),ba?F.Qa():F.bb(),B.U())},wl:function(t){x&&(t||fa.Bc(),B.bind(!1),ba?F.Qa():F.bb(),B.U())},xl:function(){x&&(B.bind(!1),ba?F.Qa():F.bb(),A.forEach(v))},xh:function(){x&&(B.bind(!1),ba?F.Qa():F.bb(),N.forEach(e))},ul:function(t){Q&&x&&(B.bind(!1),ba?F.Qa():F.bb(),t?A.forEach(q):A.forEach(r))},
td:function(t){x&&(t||fa.Bc(),B.bind(!1),t||(F.Qa(),F.Tc()),Q&&A.forEach(n))},ud:function(t){Q&&x&&(t?A.forEach(k):A.forEach(m))},rl:function(){Q&&x&&A.forEach(G)},ql:function(){Q&&x&&A.forEach(y)},Yh:function(){return L},Wh:function(){return P},Ho:function(t,O){S[t].update(O);fa.Pj()},vg:function(t,O){P=t;Q=!1;S.forEach(function(D){D.I()});S=Array(t.length);la=!1;t=t.map(function(D,W){return"string"===typeof D?md(-1===D.indexOf(".json")?D+".json":D).then(function(ja){ja.name=D;return w(ja,W,D)}):
w(D,W,!1)});Promise.all(t).then(function(){Q=!0;fa.md(function(){la&&fa.qh();fa.Pj();xa.Db(fa);xa.me(!0);O&&O(fa)},4);fa.cf()})},Pj:function(){N.splice(0);A.forEach(function(t,O){S[O]&&S[O].Jm()&&N.push(t)})},md:function(t,O){z&&Q?t(fa):K.push({tb:t,order:O?O:0})},cf:function(){z&&Q&&(K.sort(function(t,O){return 0>t.order-O.order?1:-1}),K.forEach(function(t){t.tb(fa)}),K.splice(0))},remove:function(){fa.I();fa=null},I:function(){x=z=!1;B&&B.remove();S.forEach(function(t){t.I()});p&&g.remove();A.splice(0)},
gm:function(){return C.size().x},hm:function(){return C.size().y},Qp:function(){return C.size().z},Il:function(){return uc(C).x},Jl:function(){return uc(C).y},Ep:function(){return uc(C).z},Mp:function(){return C.min.y},replace:function(t,O,D){if(t===L)return O&&fa&&(fa.cf(),O(fa)),!1;L=t;xa.me(!1);Dc(t,function(W){d(W);O&&O(fa)},D);return!0}};b.Oc&&fa.vg(b.Oc,b.Ne);L=b.url;Dc(b.url,d);return fa},Bn:function(){a.s103=!1;a.s103color=!1;a.s103NormalMap=!1;a.s103ParamsMap=!1;a.s103NormalParamsMap=!1}}}(),
wc=function(){var a=null,b=!1,d=!1,e=null,k=new Float32Array(16),m=new Float32Array(3),v={data:0},n={m:function(){a=V.Nb?new Worker("js/worker.php"):{postMessage:function(q){v.data=q;Hc.cn(v)},terminate:function(){}};a.onmessage=function(q){switch(q.data[0]){case 3:for(var r=0;16>r;++r)k[r]=q.data[r+1];for(r=0;3>r;++r)m[r]=q.data[r+17];sb.lf().bo(k,m);break;case 6:n.Xn(),b=!0,Sb.ib(!1),V.ea&&(Bb.enable(),Bb.ee())}};e=new Float32Array(6);e[0]=2;V.Nb||Hc.Zn(a)},wo:function(){V.vh||(d=!0)},Gq:function(){d=
!1},Ln:function(q,r){if(r||b&&d)e[1]=q[0],e[2]=q[1],e[3]=q[2],e[4]=q[3],e[5]=q[4],a.postMessage(e)},Xn:function(){a.postMessage([5,V.lh])},I:function(){V.Nb&&a.terminate()}};return n}(),Hc=function(){var a=0,b=0,d=0,e=[0,0],k=new ac,m=new tc,v=new tc,n=new Va,q=new Va,r=new $b,y=0,G=new Float32Array(20);G[0]=3;var w=null,H={data:!1},u={m:function(){"undefined"===typeof V&&(self.cp={Nb:!0});V.Nb&&u.jg([6])},cn:function(f){switch(f.data[0]){case 2:u.wg(f.data);break;case 5:y=f.data[1]}},jg:function(f){V.Nb?
postMessage(f):(H.data=f,w.onmessage(H))},wg:function(f){a=f[1];b=f[2];d=f[3];e[0]=f[4];e[1]=f[5];n.set(e[0],e[1],-d);r.set(b,a,0,"XYZ");if(!1===r instanceof $b)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");f=Math.cos(r.C/2);var h=Math.cos(r.D/2),B=Math.cos(r.F/2),J=Math.sin(r.C/2),g=Math.sin(r.D/2),p=Math.sin(r.F/2),l=r.order;"XYZ"===l?(m.C=J*h*B+f*g*p,m.D=f*g*B-J*h*p,m.F=f*h*p+J*g*B,m.P=f*h*B-J*g*p):"YXZ"===l?(m.C=J*h*B+f*g*p,m.D=
f*g*B-J*h*p,m.F=f*h*p-J*g*B,m.P=f*h*B+J*g*p):"ZXY"===l?(m.C=J*h*B-f*g*p,m.D=f*g*B+J*h*p,m.F=f*h*p+J*g*B,m.P=f*h*B-J*g*p):"ZYX"===l?(m.C=J*h*B-f*g*p,m.D=f*g*B+J*h*p,m.F=f*h*p-J*g*B,m.P=f*h*B+J*g*p):"YZX"===l?(m.C=J*h*B+f*g*p,m.D=f*g*B+J*h*p,m.F=f*h*p-J*g*B,m.P=f*h*B-J*g*p):"XZY"===l&&(m.C=J*h*B-f*g*p,m.D=f*g*B-J*h*p,m.F=f*h*p+J*g*B,m.P=f*h*B+J*g*p);n.y-=y;f=k.elements;p=m.x;var C=m.y,K=m.z;J=m.w;var L=p+p,A=C+C;g=K+K;h=p*L;B=p*A;p*=g;l=C*A;C*=g;K*=g;L*=J;A*=J;J*=g;f[0]=1-(l+K);f[4]=B-J;f[8]=p+A;f[1]=
B+J;f[5]=1-(h+K);f[9]=C-L;f[2]=p-A;f[6]=C+L;f[10]=1-(h+l);f[3]=0;f[7]=0;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;k.setPosition(n);v.L(m).inverse();f=q.L(n);C=f.x;L=f.y;K=f.z;h=v.x;B=v.y;J=v.z;g=v.w;p=g*C+B*K-J*L;l=g*L+J*C-h*K;A=g*K+h*L-B*C;C=-h*C-B*L-J*K;f.x=p*g+C*-h+l*-J-A*-B;f.y=l*g+C*-B+A*-h-p*-J;f.z=A*g+C*-J+p*-B-l*-h;for(f=1;17>f;++f)G[f]=k.elements[f-1];G[17]=q.x;G[18]=q.y;G[19]=q.z;u.jg(G)},Zn:function(f){w=f;u.jg([6])}};return u}();Hc.m();var Gc=function(){function a(v){var n=v.split(":").shift();
return"data"===n||"blob"===n?v:("undefined"!==typeof I&&I.ca?I:V).ca+V.Gi+v}function b(v,n){return Math.min(n+v+n*v,1)}var d=!1,e=null,k=1,m={diffuseTexture:null,normalTexture:null,paramsTexture:null,colorTextureUsage:0,metalness:.5,roughness:.5,fresnelMin:0,fresnelMax:1,fresnelPow:5,alpha:1,diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],B:null};return{m:function(){e=aa.instance({width:1,height:1,isMipmap:!1,G:4,array:new Uint8Array([255,255,255,255]),If:!1})},ff:function(){d=!0;k=2},instance:function(v){function n(){"number"===
typeof h.alpha?(u[0]=h.alpha,u[1]=0,u[2]=0,u[3]=0):(u[0]=h.alpha[0],u[1]=h.alpha[1]-h.alpha[0],u[2]=h.alpha[2],u[3]=h.alpha[3]);var z=1<=h.fresnelPow?h.fresnelMin:h.fresnelMax;f[0]=b(u[0],z);f[1]=b(u[1],z);f[2]=u[2];f[3]=u[3];l={Ni:h.fresnelMax,Ci:[h.fresnelMin,h.roughness,h.fresnelPow/15,h.metalness],Fi:h.paramsMapMask}}function q(){return new Promise(function(z){(w=h.normalTexture&&ha.Sk()?!0:!1)&&!g.Da?g.Da=aa.instance({url:a(h.normalTexture),isLinear:!0,isMipmap:!0,isAnisotropicFiltering:!1,isPot:!0,
G:3,B:z}):z()})}function r(){return new Promise(function(z){(H=h.diffuseTexture&&""!==h.diffuseTexture?!0:!1)&&!g.ga_?(g.ga_=aa.instance({url:a(h.diffuseTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!0,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,G:4,B:z}),J="s108"):(g.ga_||(J="s109",g.ga_=e),z());B=[h.diffuseColor[0]/255,h.diffuseColor[1]/255,h.diffuseColor[2]/255]})}function y(){return new Promise(function(z){(p=h.paramsTexture?!0:!1)&&!g.$a?h.paramsTexture===h.diffuseTexture?(g.$a=g.ga_,
z()):g.$a=aa.instance({url:a(h.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!1,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,G:4,B:z}):z()})}function G(z){n();Promise.all([q(),r(),y()]).then(function(){w||p||H?w||p?w&&!p?(C="s103NormalMap",K="s103NNGLtextureNormalMap"):!w&&p?(C="s103ParamsMap",K="s103NNGLtextureParamsMap"):(C="s103NormalParamsMap",K="s103NNGLtextureNormalParamsMap"):(C="s103",K="s103NNGLtexture"):(C="s103color",K="s103NNGLcolor");L=w?"s111":"s110";A=w?"s105":"s115";
E=p?"s113":"s112";N=p?"s106":"s116";h.B&&setTimeout(h.B.bind(null,z),1)})}var w,H,u=[1,0,0,0],f=[0,0,0,0],h=Object.assign({},m,v),B=null,J=null,g={ga_:null,Da:null,$a:null},p=w=H=!1,l=null,C=null,K=null,L=null,A=null,E=null,N=null,x={update:function(z){x.I();Object.assign(h,z);G()},Kc:function(){return w},Jm:function(){return.99>u[0]},dm:function(){return A},cm:function(){return L},$l:function(){return N},Zl:function(){return E},bm:function(){return C},am:function(){return K},ud:function(){w&&g.Da.h(0)},
pl:function(z){d&&F.set(J);z?F.Qa():F.bb();H&&F.Tc();x.td()},td:function(){H&&(F.H("u73",h.colorTextureUsage),g.ga_.h(0));F.Ag("u147",B)},Bh:function(){p&&(g.$a.h(0),F.xa("u75",l.Fi),F.Tc());F.xa("u111",l.Ci);F.H("u148",l.Ni)},yh:function(z){p&&!w?g.$a.h(k):w&&(H||e.h(0),g.Da.h(k),p&&g.$a.h(k+1));p&&F.xa("u75",l.Fi);H||w?F.Tn():z?F.Un():F.Vn();x.td();F.xa("u13",u);F.xa("u111",l.Ci);F.H("u148",l.Ni)},ml:function(){F.xa("u13",u)},nl:function(){F.xa("u13",f)},I:function(){H&&g.ga_.remove();w&&g.Da.remove();
p&&h.paramsTexture!==h.diffuseTexture&&g.$a.remove();Object.assign(g,{ga_:null,Da:null,$a:null})}};G(x);return x}}}(),Bb=function(){var a=0,b=0,d=0,e=0,k=0,m=0,v=V.zk,n=V.yk,q=V.Ak,r=0,y=0,G=null,w=null,H=0,u=0,f=0,h=0,B=0,J=null,g=0,p=0,l=0,C=Date.now(),K=null,L=!1,A=!1,E=!1,N=1,x=!1,z={m:function(){a=V.uk[ha.V()];b=V.tk[ha.V()];d=V.sk[ha.V()];p=V.vk[ha.V()];e=V.lk[ha.V()];k=V.qk[ha.V()];f=V.rk[ha.V()];h=ha.O();B=ha.Y();r=Math.round(h*a);y=Math.round(B*a);w=Aa.instance({width:r,height:y,Gc:!1});
G=aa.instance({width:r,height:y,isPot:!1,isLinear:!0});J=aa.instance({width:r,height:y,isPot:!1,isLinear:!0,G:1});L=!0},resize:function(P,S,la){N=la;h=P;B=S;r=Math.round(P*a);y=Math.round(S*a);w.resize(r,y);A=!0},U:function(){var P=Math.exp(-(Date.now()-C)/p);g=E?l+(1-P)*(1-l):l*P;H=b+g*(d-b);u=e+(1-g)*(1-e);m=k+(1-g)*(1-k);aa.ba(5);if(A&&L)aa.ba(6),J.resize(r,y),F.set("s0"),F.ge("u1",6),w.bind(!1,!0),J.o(),w.Re(),G.h(6),X.l(!0,!0),G.resize(r,y),G.o(),J.h(6),X.l(!1,!1),F.ge("u1",0),A=!1;else{c.enable(c.BLEND);
c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA);P=H/f;c.blendColor(P,P,P,P);c.colorMask(!0,!1,!1,!0);F.set("s95");sb.df();F.H("u128",H);p&&(F.H("u129",u),F.H("u120",m));var S=N*(v+Math.pow(Math.random(),q)*(n-v));F.N("u14",S/h,S/B);w.hh();w.Vc();G.o();S=2*Math.PI*Math.random();for(var la=!0,ba=0;ba<f;++ba)1===ba&&(c.blendFunc(c.SRC_ALPHA,c.ONE),F.H("u128",P)),F.H("u127",S+ba/f*(Math.PI/2)),F.N("u126",(Math.random()-.5)/h,(Math.random()-.5)/B),X.l(la,la),la=!1;c.disable(c.BLEND);F.set("s96");F.N("u14",
1/r,1/y);J.o();G.h(7);X.l(!1,!1);c.colorMask(!0,!0,!0,!0)}},h:function(P){J.h(P)},enable:function(){x=!0},mn:function(){if(E||!x)return!1;K&&clearTimeout(K);z.ee();K=setTimeout(z.Nj,400)},ee:function(){K&&(clearTimeout(K),K=!1);!E&&x&&(window.Yj.disable(),E=!0,C=Date.now(),l=g)},Nj:function(){E&&x&&(K&&(clearTimeout(K),K=null),window.Yj.enable(),E=!1,C=Date.now(),l=g)},I:function(){G.remove();J.remove();w.remove()}};z.mn();return z}(),zd={instance:function(a){var b=a.ha.O(),d=a.Dm?!0:!1,e=d?"s77":
"s12",k=aa.instance({isFloat:a.ha.ui()&&Ga.fa()&&!d,S:a.ha.vi()&&!d,isLinear:!0,isMipmap:!1,isPot:!1,width:b,height:b,G:d?4:3}),m=aa.instance({isFloat:a.ha.ui()&&Ga.fa(),S:a.ha.vi(),isPot:!0,width:1,height:b/2,G:3});m.o();F.set("s89");a.ha.h(0);X.l(!0,!0);var v=Math.round(Math.log(b)/Math.log(2));k.Wn=function(n){a.ha=n};k.xn=function(){k.o();F.set(e);F.H("u91",V.Qc);a.ha.h(0);m.h(1);for(var n=0,q=0;q<=v;++q){var r=Math.pow(2,v-q),y=r/2;c.viewport(0,n,b,y);F.N("u89",b/r,1);F.H("u90",Math.min(6/y,
.6));n+=r/2;X.l(0===q,0===q)}};k.An=k.remove;k.remove=function(){k.An();m.remove()};return k}};ua.Ia=function(){var a={Sc:45,rg:1,Ab:"../../images/debug/picsou.png",ce:.8,Pf:3.14/6,Qf:.314,Od:4,Nd:.5,Of:-.25,Nm:1,Z:256,Nf:.15},b={Va:null,Cc:null,screen:null},d=!1,e=!1,k=-1,m=null,v=null,n=null,q=Math.PI/180,r=[1,1],y=!1,G={m:function(w){k=w.width;w={isFloat:Ga.fa(),S:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:k,height:k/2,G:3};b.Va&&(b.Va.remove(),b.Cc.remove());b.Va=aa.instance(w);b.Cc=
aa.instance(w);F.j("s117",[{type:"1i",name:"u155",value:0}]);F.j("s118",[{type:"1i",name:"u160",value:0}]);G.Qj();y=!0},Qj:function(){F.j("s118",[{type:"1f",name:"u161",value:a.Pf},{type:"1f",name:"u162",value:a.Qf},{type:"1f",name:"u163",value:a.Od},{type:"1f",name:"u164",value:a.Nd},{type:"1f",name:"u165",value:a.Of}])},cq:function(){return e},oa:function(w){m=w},Rc:function(){v="uniform sampler2D u155;uniform vec2 u156,u157,u10;uniform int u158;uniform float u159,u141;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5,.5);const float e=1.2;const vec3 g=vec3(1.,1.,1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u10*(c-u156)/u157;float b=1.;if(u158==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u159*g,texture2D(u155,a).rgb*u141,b*g);gl_FragColor=vec4(d,1.);}";
n="uniform sampler2D u160;uniform float u161,u162,u163,u164,u165;varying vec2 vv0;const float f=3.141593;const vec2 o=vec2(.5,.5);const vec3 h=vec3(1.,1.,1.);void main(){float i=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u160,vec2(.5,.5));float d=a.r,j=u163*a.g,k=u164*(a.b+u165),b=a.a,g=asin(cos(b)*cos(d)),l=atan(cos(b)*sin(d),-sin(b)),m=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(i-l)),n=1.-smoothstep(u161-u162,u161+u162,m);gl_FragColor=vec4(h*(max(k,0.)+max(j,0.)*n),1.);}";F.pa("s117",{name:"_",
g:v,i:"u155 u156 u158 u157 u159 u141 u10".split(" "),precision:"highp"});F.pa("s118",{name:"_",g:n,i:"u160 u161 u162 u163 u164 u165".split(" "),precision:"highp"})},Fg:function(w,H,u,f,h,B,J){F.N("u156",H,u);F.ge("u158",f?1:0);F.N("u157",h,h/B);F.he("u10",J);w.h(0);X.l(!1,!1)},bk:function(w){c.viewport(0,0,a.Z,a.Z/2);F.set("s118");w.h(0);X.l(!1,!1)},Zh:function(){return b.Va},jh:function(w){G.m({width:a.Z});G.Rj(w,!1,1);e=!0},ih:function(){d&&b.screen.jm()===a.Ab||(d=!1,b.screen&&b.screen.remove(),
b.screen=aa.instance({url:a.Ab,isFloat:!1,B:function(){d=!0}}))},wg:function(w){Object.assign(a,w)},ib:function(w){G.wg(w);y&&(G.Qj(),G.ih())},Rj:function(w,H,u){var f=a.Z;Aa.$();b.Cc.M();F.set("s0");b.Va.h(0);X.l(!0,!0);b.Va.o();F.set("s117");F.H("u159",a.Nf);F.H("u141",a.Nm);G.Fg(w,Math.PI,0,!0,90*q,w.O()/w.Y(),r);d&&(F.H("u141",a.ce),c.viewport(0,0,f/2,f/2),G.Fg(b.screen,0,0,!1,2*a.Sc*q,2*a.rg,r),c.viewport(f/2,0,f/2,f/2),G.Fg(b.screen,2*Math.PI,0,!1,2*a.Sc*q,2*a.rg,r));c.enable(c.BLEND);c.blendFunc(c.ONE,
c.ONE);H&&G.bk(H);F.set("s0");c.blendColor(0,0,0,1-u);c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_CONSTANT_ALPHA);b.Cc.h(0);X.l(!1,!1);c.disable(c.BLEND);m.oj(b.Va)},v:function(){Object.assign(b,{Va:null,Cc:null,screen:null});e=d=!1;k=-1;m=null}};return G}();ua.pb=function(){var a=!1,b=!0,d=null,e=null,k={Rc:function(){ha.aa()&&(F.pa("s119",{name:"_",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec2 u42;uniform vec3 u143;const float l=1.,m=0.,n=0.,E=1.;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 F=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 v=s(a);vec3 w=mix(u143,u83,c);float x=mix(l,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u81,1.,u85);vec2 j=u80/t;vec3 k=a0;float A=max(0.,-a0.z-m)*n;k.x+=A*sign(a0.x)*(1.-u85);vec3 B=v*(k+w)*x+b;vec2 C=j*z;vec3 D=vec3(g*C,-j)+B*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(D,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u41","u42","u78","u143"].concat(F.sf(),F.tf()),K:["a0"],R:[3],da:!0}),a=!0)},m:function(m){a&&F.j("s119",[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",value:m.Ea},{type:"1f",name:"u79",value:0},{type:"1f",name:"u87",value:1}].concat(m.Qg))},fb:function(m){e=m;d&&k.fi()},eb:function(m){d=m;e&&k.fi()},fi:function(){ha.aa()&&(F.j("s119",[{type:"3f",
name:"u143",value:[d[0]*e,d[1]*e,d[2]*e]}]),F.J())},um:function(m){for(var v=m.width/2,n=m.height/2,q=m.depth,r=m.yl,y=m.height/4,G=m.bl,w=2*G+4,H=[],u=[],f=-v+m.Ua,h=-r-m.Ua,B=v-m.Ua,J=-r-m.Ua,g=0;g<w;++g){var p=0,l=0;0===g?(p=-v,l=-r-q):1<=g&&g<=1+G?(l=(g-1)/G*Math.PI/2,p=f-Math.cos(l)*m.Ua,l=h+Math.sin(l)*m.Ua):g>=2+G&&g<=2+2*G?(l=(g-2-G)/G*Math.PI/2,p=B+Math.sin(l)*m.Ua,l=J+Math.cos(l)*m.Ua):g===w-1&&(p=v,l=-r-q);H.push(p,n+y,l,p,-n+y,l);0!==g&&u.push(2*g,2*g-2,2*g-1,2*g,2*g-1,2*g+1)}return k.instance({ja:H,
indices:u})},toggle:function(m){b=m},instance:function(m){var v=X.instance({ja:m.ja,indices:m.indices});return{U:function(){a&&b&&(F.set("s119"),v.bind(!0),v.U())}}}};return k}();ua.ia=function(){var a={xf:-87,nm:[85,95],ei:[90,90],di:[85,70],nd:24,cl:12,dl:2,kg:[-80,40],ci:[40,140],Hd:[1,8],mm:80,Ki:[-120,-10],bn:2,je:[0,-15],Be:1024,lb:512,Vd:4,uo:[6,30],Ji:1.2};a.Ti=a.kg;var b=!1,d=!1,e=!1,k=null,m=null,v=null,n=null,q=null,r=null,y=!1,G=!1,w=null,H=null,u=null,f=null,h=.5,B=[{type:"1f",name:"u167",
value:1}],J=null,g=null,p=null,l=null,C=null,K={em:function(){return{name:"_",u:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0,vv1;varying float vv2;uniform sampler2D u41;uniform vec2 u42;uniform float u144;uniform vec3 u143;const float p=0.,q=0.;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 H=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,s);vec2 f=u85*e;vec3 c=u85*r;vec2 w=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,t).rgb+vec3(u79,0.,0.),u82,c);float x=mix(texture2D(u41,u).r,0.,u85);a.z+=x;mat3 h=v(a);vec3 y=mix(u143,u83,c);float z=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u81,1.,u85);vec2 k=u80/w;vec3 l=a0;float C=max(0.,-a0.z-p)*q;l.x+=C*sign(a0.x)*(1.-u85);vec3 D=h*(l+y)*z+b;vec2 E=k*B;vec3 F=vec3(g*E,-k)+D*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 G=h*a2;vv2=-G.z,vv1=a0.yz;}",
g:"uniform sampler2D u174,u160;uniform vec2 u89,u175;uniform float u176,u167;varying vec2 vv0,vv1;varying float vv2;void main(){vec2 b=u175*u176+u89*vv0;vec4 a=u167*texture2D(u174,b);a.r*=step(0.,vv0.y),a.r*=1.-smoothstep(20.,60.,vv1.y-vv1.x),gl_FragColor=vec4(0.,0.,0.,a.r*vv2);}",i:"u41 u174 u160 u42 u78 u176 u175 u144 u143 u89 u167".split(" ").concat(F.sf()).concat(F.tf()),K:["a0","a2","a1"],R:[3,3,2],precision:"lowp"}},Rc:function(){F.pa("s120",{name:"_",u:"attribute vec3 a0;uniform vec3 u143;uniform vec2 u168,u169;uniform float u144,u170,u171,u172;varying float vv0,vv1;void main(){vec3 a=(a0+u143)*u144;float b=atan(a.x,a.z-u170),d=2.*(a.y-u171)/(u172-u171)-1.;vv0=a0.y;float g=1.-u168.x*u168.x/(u168.y*u168.y),c=u168.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u170);vv1=smoothstep(u169.x,u169.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u173;uniform vec4 u13;varying float vv0,vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv0),b=min(a,1.)*u173;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u144 u143 u168 u169 u170 u171 u172 u13 u173".split(" "),K:["a0"],R:[3],precision:"highp"});F.pa("s121",K.em());F.pa("s122",{name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u14),c=texture2D(u1,vv0-2.*u14),d=texture2D(u1,vv0-u14),f=texture2D(u1,vv0+u14),g=texture2D(u1,vv0+2.*u14),h=texture2D(u1,vv0+3.*u14);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u14"],precision:"lowp"});b=!0},m:function(L){if(b){if(void 0===L.ic||!L.ic)return!1;if(d)K.jj(L);else{n=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:a.Be,height:a.Be/4,G:4});var A=a.lb/4,E={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:a.lb,height:A,G:4};v=aa.instance(E);r=aa.instance(E);q=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:a.lb,height:A*a.Vd,G:4});A=.5-.5/L.jc[1];E=.5+.5/L.jc[1];for(var N=a.cl+1,x=[],z=[],P=new Float32Array(16*a.nd),S=new Uint16Array(6*
(a.nd-1)),la=0,ba=0,Q=0,fa=0;fa<a.nd;++fa){var t=2*fa/(a.nd-1)-1;t=Math.sign(t)*Math.pow(Math.abs(t),a.dl);t=Math.PI*(t+1)/2-Math.PI/2;var O=Math.sin(t),D=Math.cos(t),W=Math.sin(t*a.Ji),ja=Math.cos(t*a.Ji),ma=t/(Math.PI*L.jc[0])+.5,va=a.di[0]*O,Da=a.Ti[0],ka=a.di[1]*D+a.xf,na=ma,Fa=A,Y=a.ei[0]*O,oa=a.Ti[1],ea=a.ei[1]*D+a.xf,ca=E,Ca=16*fa;P[Ca]=Y;P[Ca+1]=oa;P[Ca+2]=ea;P[Ca+3]=W;P[Ca+4]=0;P[Ca+5]=ja;P[Ca+6]=ma;P[Ca+7]=ca;P[Ca+8]=va;P[Ca+9]=Da;P[Ca+10]=ka;P[Ca+11]=W;P[Ca+12]=0;P[Ca+13]=ja;P[Ca+14]=na;
P[Ca+15]=Fa;0!==fa&&(na=2*fa,Fa=6*(fa-1),S[Fa]=na,S[Fa+1]=na-1,S[Fa+2]=na-2,S[Fa+3]=na,S[Fa+4]=na+1,S[Fa+5]=na-1);Fa=Math.pow(.5*(1+Math.cos(Math.min(Math.max(Math.PI/a.ci[0]*va,-Math.PI),Math.PI))),a.bn);Da-=a.mm*Fa;na=a.ci[1]*Fa;va-=O*a.Hd[0];ka-=D*a.Hd[1];Y-=O*a.Hd[0];ea-=D*a.Hd[1];O=.001>Fa?2:N;for(D=0;D<O;++D)Fa=D/(O-1),ma=Da*(1-Fa)+oa*Fa,ca=a.Ki[0],ca=Math.min(Math.max((ma-ca)/(a.Ki[1]-ca),0),1),ca=ca*ca*(3-2*ca),x.push(va*(1-Fa)+Y*Fa,ma,(ka+na*Math.exp(400*-Math.abs(t)*Math.pow(Fa,4)))*(1-
ca)+ea*ca,W,0,ja,0,0);t=0===fa?0:2<O&&2<ba?O-1:1;for(W=1;W<=t;++W)ja=O>ba?O-2:0,z.push(la+W+ja,la+W-1,Q+W-1,Q+W-1,Q+W+(O<ba?ba-2:0),la+W+ja);ba=O;Q=la;la+=O}l=X.instance({ja:new Float32Array(x),indices:new Uint16Array(z)});C=X.instance({ja:P,indices:S});K.jj(L);F.j("s122",[{type:"1i",name:"u1",value:0}]);d=!0}}},jj:function(L){h=L.po;f=L.ke;J=[{type:"1i",name:"u41",value:1},{type:"1i",name:"u174",value:0},{type:"1i",name:"u160",value:2},{type:"3f",name:"u78",value:[L.Ea[0],L.Ea[1]-a.je[0],L.Ea[2]+
a.je[1]]},{type:"1f",name:"u176",value:L.qo},{type:"2f",name:"u89",value:[1,1/a.Vd]},{type:"2f",name:"u175",value:[0,1/a.Vd]},{type:"1f",name:"u167",value:1}].concat(L.Qg,L.Mj);F.j("s121",J)},dc:function(L){k=L},cc:function(L){g=L;g.md(K.yc)},wi:function(){return e&&null!==g&&null!==p},yc:function(){if(!(e||G&&y)||null===g||null===p)return!1;c.viewport(0,0,a.Be,a.Be/4);Aa.$();n.o();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);F.j("s120",[{type:"1f",name:"u170",value:a.xf},{type:"1f",name:"u171",
value:a.kg[0]},{type:"1f",name:"u172",value:a.kg[1]},{type:"3f",name:"u143",value:[w[0]+H[0],w[1]+H[1],w[2]+H[2]]},{type:"1f",name:"u173",value:h},{type:"2f",name:"u168",value:a.nm},{type:"2f",name:"u169",value:a.uo}]);g.xl();F.set("s1");var L=a.lb/4;c.viewport(0,0,a.lb,L);v.o();n.h(0);n.Ad();X.l(!0,!0);for(var A=0;A<a.Vd;++A)F.set("s122"),0!==A&&c.viewport(0,0,a.lb,L),r.o(),v.h(0),F.N("u14",1/a.lb,0),X.l(!1,!1),v.o(),r.h(0),F.N("u14",0,1/L),X.l(!1,!1),a.el&&c.colorMask(0===A,1===A,2===A,!0),F.set("s1"),
q.o(),v.h(0),c.viewport(0,A*L,a.lb,L),X.l(!1,!1),a.el&&c.colorMask(!0,!0,!0,!0);return e=!0},U:function(){K.wi()&&(p.bind(!1,!1),m.M(),c.clearColor(0,0,0,0),c.enable(c.DEPTH_TEST),c.depthMask(!0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),F.set("s121"),k.h(1),q.h(0),l.bind(!0),l.U(),C.bind(!0),C.U(),c.disable(c.DEPTH_TEST),c.depthMask(!1))},fm:function(){return m},add:function(){K.wi()&&(c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),m.h(0),X.l(!1,!1),c.disable(c.BLEND))},tg:function(L,
A){p&&p.remove();p=Aa.instance({width:L,height:A,Gc:!0});m&&m.remove();m=aa.instance({width:L,height:A,isFloat:!1,isPot:!1});K.yc()},eb:function(L,A,E){L||(L=w,A=H,E=u);F.j("s121",[{type:"3f",name:"u143",value:[E[0]+f[0],E[1]+f[1]-a.je[0],E[2]+f[2]+a.je[1]]}]);w=L;H=A;u=E;G=!0;!e&&y&&K.yc();F.J()},fb:function(L,A){F.j("s120",[{type:"1f",name:"u144",value:L}]);F.j("s121",[{type:"1f",name:"u144",value:A}]);y=!0;!e&&G&&K.yc();F.J()},xg:function(L){F.j("s121",[{type:"1f",name:"u79",value:L}]);F.J()},
Db:function(L){L&&(g=L);K.yc()},yg:function(L,A){B[0].value=1-L;F.j("s121",B);F.j("s121",A)},I:function(){},v:function(){e=d=b=!1;r=q=n=v=m=k=null}};return K}();ua.sa=function(){var a=!1,b=null,d=0,e=0,k=0,m=[{type:"1f",name:"u167",value:1}],v=null,n=null,q=null,r={Rc:function(){F.pa("s123",{name:"_",u:"attribute vec3 a0;uniform vec2 u177,u178;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u178)/u177;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",g:"uniform vec2 u179;uniform float u180,u181,u182;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u180,u181),a=vv0-b,c=u182*a,d=(c-a)*u179;gl_FragColor=vec4(d,0.,1.);}",
i:"u177 u178 u180 u181 u182 u179".split(" "),K:["a0"],R:[3],precision:"highp"});F.pa("s124",{name:"_",u:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u177,u178;uniform float u144;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,q);vec2 f=u85*e;vec3 c=u85*p;vec2 u=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,r).rgb+vec3(u79,0.,0.),u82,c);float v=mix(texture2D(u41,s).r,0.,u85);a.z+=v;mat3 w=t(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 j=u80/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u85);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u178)/u177,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u183,u184;uniform float u167;varying vec2 vv0,vv1;void main(){vec2 a=u167*texture2D(u183,vv0).rg;gl_FragColor=texture2D(u184,a+vv1);}",i:"u167 u41 u183 u184 u177 u178 u42 u78 u144 u143".split(" ").concat(F.sf(),F.tf()),K:["a0"],R:[3],precision:"lowp"});a=!0},m:function(y){if(a){if(void 0===y.ic||!y.pd)return!1;n=aa.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,G:4});q=Aa.instance({width:256,height:128});F.j("s124",[{type:"1i",name:"u41",value:1},{type:"1i",
name:"u183",value:2},{type:"1i",name:"u184",value:0},{type:"3f",name:"u78",value:y.Ea},{type:"1f",name:"u167",value:1}].concat(y.Mj,y.Qg));e=y.Ye;k=y.Xe;d=y.Ze}},dc:function(y){b=y},cc:function(y){v=y;v.md(r.Ue)},Ue:function(){c.viewport(0,0,256,128);q.o();n.o();var y=v.gm(),G=v.hm(),w=[{type:"2f",name:"u177",value:[y,G]},{type:"2f",name:"u178",value:[v.Il(),v.Jl()]}];F.j("s123",w.concat([{type:"1f",name:"u180",value:e},{type:"1f",name:"u181",value:k},{type:"1f",name:"u182",value:d},{type:"2f",name:"u179",
value:[1/y,-1/G]}]));v.xh();F.j("s124",w)},U:function(){F.set("s124");b.h(1);n.h(2);v.xh()},eb:function(y){F.j("s124",[{type:"3f",name:"u143",value:y}]);F.J()},fb:function(y){F.j("s124",[{type:"1f",name:"u144",value:y}]);F.J()},xg:function(y){F.j("s124",[{type:"1f",name:"u79",value:y}]);F.J()},no:function(y){d=y;r.Ue();F.J();xa.animate(Date.now())},Db:function(y){y&&(v=y);r.Ue()},yg:function(y,G){m.u167=1-y;F.j("s124",m);F.j("s124",G)},I:function(){}};return r}();ua.pc=function(){var a=[0,-.5],b=
!1,d=!1,e=null,k=null,m=null,v=null,n=null,q=-1,r=-1;return{Rc:function(){F.pa("s125",{name:"_",u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42,u11;uniform float u10;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u41,vec2(.25,.5));vec2 b=a.a*u42,c=2.*a.gb-f,d=u11+a0*u10;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u185;varying vec2 vv0;void main(){gl_FragColor=texture2D(u185,vv0);}",i:["u41","u185","u42","u11","u10"],precision:"lowp"});
F.pa("s126",{name:"_",g:"uniform sampler2D u2,u186,u187;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u187,vv0).rgb,c=texture2D(u186,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u187","u186"],precision:"lowp"});b=!0},m:function(y){b&&(n=aa.instance({isFloat:!1,isPot:!0,url:y.Le,B:function(){d=!0}}),F.j("s125",[{type:"1i",name:"u41",value:1},{type:"1i",name:"u185",value:0},{type:"2f",name:"u42",value:y.Vj},{type:"2f",name:"u11",value:a},
{type:"1f",name:"u10",value:3.8}]),F.j("s126",[{type:"1i",name:"u186",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u187",value:2}]))},dc:function(y){k=y},tg:function(y,G){var w={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:y,height:G,G:4};q=2/y;r=2/G;m=aa.instance(w);v=aa.instance(w);e=Aa.instance({width:y,height:G})},U:function(y,G){if(d){e.bind(!1,!0);F.set("s88");for(var w=0;2>w;++w){F.N("u14",q,0);m.o();0!==w&&v.h(0);var H=0===w&&!V.ea;X.l(H,H);F.N("u14",0,r);v.o();m.h(0);X.l(!1,
!1)}F.set("s125");k.h(1);n.h(0);m.o();c.clearColor(1,0,0,1);c.clear(c.COLOR_BUFFER_BIT);X.l(!1,!1);F.set("s126");G.o();v.h(0);m.h(1);y.h(2);X.l(!1,!1)}},I:function(){}}}();var Lc=function(){var a={instance:function(b){var d=b.Zf,e=b.Vf,k=b.od,m=b.background?b.background:aa.$h(),v=b.Oa,n={scale:1,offsetX:0,offsetY:0},q=null;b.Uf&&(n.scale=b.Uf.scale,n.offsetY=b.Uf.offsetY);return{Vh:function(){return v},Oh:function(){return m},set:function(){q=eb.Ul();eb.qj(n);eb.te();eb.ue();xa.ij(k,m,!1,!1)},J:function(){eb.qj(q)},
bc:function(){return{modelURL:d,materialsURLs:e,background:m.bc(!1),od:k.bc(!1),Oa:v.bc(!0)}},Yl:function(){return k.bc(!1)},ip:function(r){m.h(r)},I:function(){k.remove();v.remove();b.background&&m.remove()}}},Yc:function(b,d,e){function k(){if(3===++q&&d){var r=a.instance({Zf:b.modelURL,Vf:b.materialsURLs,background:m,od:v,Oa:n});d(r)}}var m=null,v=null,n=null,q=0;aa.Yc(b.background,function(r){!r&&e?e():(m=r,k())});aa.Yc(b.dataState,function(r){!r&&e?e():(v=r,k())});aa.Yc(b.light,function(r){!r&&
e?e():(n=r,k())})}};return a}();return Ta||window.JEELIZVTO}();(function(U,sa){"function"===typeof define&&define.amd?define(sa):"object"===typeof exports?module.exports=sa():U.ResizeSensor=sa()})("undefined"!==typeof window?window:this,function(){function U(La,Za){var cb=Object.prototype.toString.call(La),Eb=0,Ma=La.length;if("[object Array]"===cb||"[object NodeList]"===cb||"[object HTMLCollection]"===cb||"[object Object]"===cb||"undefined"!==typeof jQuery&&La instanceof jQuery||"undefined"!==typeof Elements&&
La instanceof Elements)for(;Eb<Ma;Eb++)Za(La[Eb]);else Za(La)}if("undefined"===typeof window)return null;var sa=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(La){return window.setTimeout(La,20)},Na=function(La,Za){function cb(){var Ma=[];this.add=function(Kb){Ma.push(Kb)};var ib,qb;this.call=function(){ib=0;for(qb=Ma.length;ib<qb;ib++)Ma[ib].call()};this.remove=function(Kb){var yb=[];ib=0;for(qb=Ma.length;ib<qb;ib++)Ma[ib]!==Kb&&yb.push(Ma[ib]);
Ma=yb};this.length=function(){return Ma.length}}function Eb(Ma,ib){if(Ma)if(Ma.resizedAttached)Ma.resizedAttached.add(ib);else{Ma.resizedAttached=new cb;Ma.resizedAttached.add(ib);Ma.resizeSensor=document.createElement("div");Ma.resizeSensor.className="resize-sensor";Ma.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";Ma.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
Ma.appendChild(Ma.resizeSensor);Ma.resizeSensor.offsetParent!==Ma&&(Ma.style.position="relative");var qb=Ma.resizeSensor.childNodes[0],Kb=qb.childNodes[0],yb=Ma.resizeSensor.childNodes[1],Ob,cc,Fb,Wb,nc=Ma.offsetWidth,dc=Ma.offsetHeight,ec=function(){Kb.style.width="100000px";Kb.style.height="100000px";qb.scrollLeft=1E5;qb.scrollTop=1E5;yb.scrollLeft=1E5;yb.scrollTop=1E5};ec();var oc=function(){cc=0;Ob&&(nc=Fb,dc=Wb,Ma.resizedAttached&&Ma.resizedAttached.call())};ib=function(){Fb=Ma.offsetWidth;Wb=
Ma.offsetHeight;(Ob=Fb!=nc||Wb!=dc)&&!cc&&(cc=sa(oc));ec()};var fc=function(gc,pc,Pb){gc.attachEvent?gc.attachEvent("on"+pc,Pb):gc.addEventListener(pc,Pb)};fc(qb,"scroll",ib);fc(yb,"scroll",ib)}}U(La,function(Ma){Eb(Ma,Za)});this.detach=function(Ma){Na.detach(La,Ma)}};Na.detach=function(La,Za){U(La,function(cb){if(cb){if(cb.resizedAttached&&"function"==typeof Za&&(cb.resizedAttached.remove(Za),cb.resizedAttached.length()))return;cb.resizeSensor&&(cb.contains(cb.resizeSensor)&&cb.removeChild(cb.resizeSensor),
delete cb.resizeSensor,delete cb.resizedAttached)}})};return Na});var mc={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/"},nb={notLoaded:-1,init:0,realtime:2,loadingModel:3,paused:4},Ra={isRT:!0,sku:void 0,materialsReplacements:"",mode:nb.notLoaded},hb={displayWidth:-1,displayHeight:-1,cvWidth:-1,cvHeight:-1},Zc={cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,trackIframe:null},ya=Object.assign({},Zc),Ad={ADJUST_START:null,
ADJUST_END:null,LOADING_START:null,LOADING_END:null},Ic=null,Vb={enabled:!1,callback:null,interval:1E3},xc={error:!1},kc=null,bc=null,yc="undef",xb={start:function(U){console.log("INFO in JeelizVTOWidget.js: start()");if(Ra.mode!==nb.notLoaded)xb.resume();else{wa();if(U.settings)for(var sa in U.settings)mc[sa]=U.settings[sa];U.NNCPath&&Ta.set_NNCPath(U.NNCPath);U.faceDetectionCallback&&(Vb.enabled=!0,Vb.callback=U.faceDetectionCallback,Vb.interval="undefined"===typeof U.faceDetectionInterval?1E3:
U.faceDetectionInterval);Ic=Object.assign({},Ad,U.callbacks||{});ya.container=U.placeHolder||document.getElementById("JeelizVTOWidget");if(!ya.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");ya.cv=U.canvas||document.getElementById("JeelizVTOWidgetCanvas");ya.cv||(ya.cv=document.createElement("canvas"),ya.container.appendChild(ya.cv));ya.cv.style.position="absolute";ya.loading=document.getElementById("JeelizVTOWidgetLoading");U.onError&&(xc.error=
U.onError);Db();sa=Cb(ya.container);if(!sa.width)return Promise.reject("PLACEHOLDER_NULL_WIDTH");if(!sa.height)return Promise.reject("PLACEHOLDER_NULL_HEIGHT");mb();new ResizeSensor(ya.container,function(Na){mb()});(U.searchImageMask||U.searchImageColor||U.searchImageRotationSpeed)&&Ta.set_loading(U.searchImageMask,U.searchImageColor,U.searchImageRotationSpeed);U.callbackReady&&(bc=U.callbackReady);Ra.mode=nb.init;yc="undefined"===typeof U.assetsPath?mc.appstaticURL+"jeefit/":U.assetsPath;"undefined"!==
typeof U.catalog&&(kc=U.catalog);if(U.onWebcamGet)Ta.onWebcamGet(U.onWebcamGet);return new Promise(function(Na,La){Ta.init(yc,ra,function(){Ra.isRT=!1;db("NO_ERROR_LABEL");La()},ya.cv);var Za=U.sku?U.sku:null;Ta.onHalfLoad(function(){!1===U.isShadow&&Ta.switch_shadow(!1);xb.load(Za,Na,U.materialsReplacements)})})}},destroy:function(){return Ta.destroy().then(function(){Ra.mode=nb.notLoaded;Ra.sku=void 0;Ra.materialsReplacements="";bc=kc=null;Object.assign(ya,Zc)})},pause:function(U){if(!Ra.isRT)return Promise.reject();
Ra.mode=nb.paused;var sa=Ta.switch_sleep(!0,U);return U?sa:Promise.resolve(sa)},resume:function(U){if(!Ra.isRT)return Promise.reject();Ra.mode=nb.realtime;var sa=Ta.switch_sleep(!1,U);return U?sa:Promise.resolve(sa)},set_videoRotation:function(U){Ra.isRT&&Ta.set_videoRotation(U)},set_videoSizes:function(U,sa,Na,La,Za,cb){Ra.isRT&&Ta.set_videoSizes(U,sa,Na,La,Za,cb)},resize:function(){mb()},set_scale:function(U){Ta.set_scale(U)},capture_image:function(U,sa,Na){Ta&&Ta.ready?Ta.capture_image(U,sa,Na,
!1):sa(!1)},toggle_loading:function(U){U?(Ha(ya.loading),lc("LOADING_START")):(Sa(ya.loading),lc("LOADING_END"))},load_modelStandalone:function(U,sa){if(!Ra.isRT)throw Error("Loading standalone models is only available in RT mode");Ra.mode===nb.paused&&xb.resume();Ra.mode=nb.loadingModel;if("string"===typeof U){var Na=U;Ia(U,Na).then(sa).catch(Qa)}else{var La=Na="RANDOM_SKU_"+Date.now().toString();Ta.set_modelStandalone(U,Nb.bind(null,La,sa),La)}Ra.sku=Na;Ra.materialsReplacements=""},load:function(U,
sa,Na){xb.toggle_loading(!0);Ra.isRT&&xb.load_RT(U,sa,Na)},load_RT:function(U,sa,Na){var La=Na?JSON.stringify(Na):"";U===Ra.sku&&La===Ra.materialsReplacements?xb.toggle_loading(!1):(Ra.sku=U,Ra.materialsReplacements=La,Ra.mode=nb.loadingModel,Ra.mode===nb.paused&&xb.resume(),U?kc&&kc[U]?Tb(U,kc[U],sa,Na):qa(mc.glassesDBURL+U).then(function(Za){if(Za.error)return Qa();Tb(U,Za.intrinsic,sa,Na)}).catch(Qa):(Ra.mode=nb.realtime,xb.toggle_loading(!1),Ta.start_rendering(),sa&&sa()))},enter_adjustMode:Ub,
exit_adjustMode:tb,set_LUT:function(U){return Ta&&Ta.ready?Ta.set_LUT(U||null):Promise.reject("NOT_READY")}};return xb}();window.JEELIZVTO=JEELIZVTO;
window.JEELIZVTOWIDGET={VERSION:"3.0.3",start:JeelizVTOWidget.start,pause:JeelizVTOWidget.pause,resume:JeelizVTOWidget.resume,load:JeelizVTOWidget.load,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,capture_image:JeelizVTOWidget.capture_image,set_videoRotation:JeelizVTOWidget.set_videoRotation,resize:JeelizVTOWidget.resize,set_scale:JeelizVTOWidget.set_scale,set_videoSizes:JeelizVTOWidget.set_videoSizes,destroy:JeelizVTOWidget.destroy,enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,
set_LUT:JeelizVTOWidget.set_LUT};
